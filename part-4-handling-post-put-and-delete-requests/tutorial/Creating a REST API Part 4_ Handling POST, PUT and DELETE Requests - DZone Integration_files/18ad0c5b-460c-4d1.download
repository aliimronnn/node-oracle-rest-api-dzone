/*! permutive-javascript-sdk v19.24.1 (web) (built 2022-08-18T14:36:11.675Z) */(()=>{"use strict";var __webpack_modules__={2688:(e,t,n)=>{function r(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}n.d(t,{w:()=>r})},787:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(3735),o=n(6567);function i(e){return(0,r.zG)((0,o.Y3)((()=>JSON.parse(e))),(0,o.fS)(r.gn))}},7183:(e,t,n)=>{n.d(t,{h:()=>r});const r=e=>new o(e);class o{constructor(e){const t=this;this._worker=e,this._callbacks={},this._id=0,e.addEventListener("message",(function(e){o.onMessage(t,e)}))}set id(e){this._id=e}get id(){return this._id}newId(){const e=this.id;return this.id=this.id+1,e}static onMessage(e,t){if(n=t.data,!(Array.isArray(n)&&n.length>=2))return;var n;const[r,o,i]=t.data,s=e._callbacks[r];s&&(delete e._callbacks[r],s(o,i))}static isServiceWorker(e){return void 0!==e.controller}postMessage(e){const t=this,n=this.newId(),r=[n,e];return new Promise((function(e,i){var s;if(t._callbacks[n]=function(t,n){if(t)return i(new Error(t.message));e(n)},o.isServiceWorker(t._worker)){const e=new MessageChannel;e.port1.onmessage=function(e){o.onMessage(t,e)},null===(s=t._worker.controller)||void 0===s||s.postMessage(r,[e.port2])}else t._worker.postMessage(r)}))}}},1828:(e,t,n)=>{n.d(t,{ap:()=>o,gz:()=>c});var r=n(3735);function o(e,t){return function(n){return function(r){return e.ap(e.map(r,(function(e){return function(n){return t.ap(e,n)}})),n)}}}function i(e,t,n){return function(r){for(var o=Array(n.length+1),s=0;s<n.length;s++)o[s]=n[s];return o[n.length]=r,0===t?e.apply(null,o):i(e,t-1,o)}}var s={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(r){return[e,t,n,r]}}}},5:function(e){return function(t){return function(n){return function(r){return function(o){return[e,t,n,r,o]}}}}}};function a(e){return s.hasOwnProperty(e)||(s[e]=i(r.bc,e-1,[])),s[e]}function c(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,o=a(r),i=e.map(t[0],o),s=1;s<r;s++)i=e.ap(i,t[s]);return i}}},9320:(e,t,n)=>{n.d(t,{oA:()=>W,t9:()=>T,hX:()=>K,DZ:()=>G,Ew:()=>C,xH:()=>U,jV:()=>j,xb:()=>M,UI:()=>B,uK:()=>$,u4:()=>J,vP:()=>Q,DY:()=>x,G0:()=>A});var r,o=n(3735),i=n(9384);n(4268),n(7209),r=void 0;i.Xl,i.Od;var s=i.ri,a=i.YM,c=(i.F4,a);i.Gb;var u=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},l=function(e){return e.length>0},d=function(e){return function(t){return u(u([],t),[e])}},p=d,g=function(e){var t=function(e){return function(t){if(1===t.length)return f(t);for(var n=[v(t)],r=function(t){n.every((function(n){return!e.equals(n,t)}))&&n.push(t)},o=0,i=y(t);o<i.length;o++)r(i[o]);return n}}(e);return function(e){return function(n){return t((0,o.zG)(n,h(e)))}}},m=i.r1;function h(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var f=m,_=function(e){return[e]};i.F4;var v=c,y=function(e){return e.slice(1)};n(4011);var b=n(4870);n(5605);function w(e){return function(t,n){if(void 0===n){var r=w(e);return function(e){return r(t,e)}}for(var o,i=0;i<n.length;i++)if(o=n[i],e.equals(o,t))return!0;return!1}}var k=s,D=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var o=e(r,t[r]);i.pC(o)&&n.push(o.value)}return n}},E=function(e){return D((function(t,n){return e(n)}))},S=(o.yR,function(e,t){return P(e,(function(e,n,r){return t(n,r)}))}),P=function(e,t){return function(n){for(var r=n.length,o=e,i=0;i<r;i++)o=t(i,o,n[i]);return o}};i.F4;var M=function(e){return 0===e.length},O=l,q=p;function C(e){return function(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return i.G(t[n]);return i.YP}}(e)}var I=function(e){return e.slice()},x=function(e){return function(t){return t.length<=1?I(t):t.slice().sort(e.compare)}};var T=w;function A(e){var t=g(e);return function(n,r){if(void 0===r){var o=A(e);return function(e){return o(e,n)}}return O(n)&&O(r)?t(r)(n):O(n)?I(n):I(r)}}function j(e){var t=T(e);return function(n,r){if(void 0===r){var o=j(e);return function(e){return o(e,n)}}return n.filter((function(e){return t(e,r)}))}}var L=function(e,t,n){return(0,o.zG)(e,J(t,n))},z=_,B=function(e){return function(t){return t.map((function(t){return e(t)}))}},R=function(e){return function(t){return(0,o.zG)(t,function(e){return function(t){for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},U=R(o.yR),N=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var o=e(r,t[r]);i.pC(o)&&n.push(o.value)}return n}},G=function(e){return N((function(t,n){return e(n)}))},W=G(o.yR),K=function(e){return function(t){return t.filter(e)}},$=function(e){return F((function(t,n){return e(n)}))},F=function(e){return function(t){for(var n=[],r=[],o=0;o<t.length;o++){var i=t[o];e(o,i)?r.push(i):n.push(i)}return(0,b.s4)(n,r)}},J=S,Q=function(e){return function(t){return L(t,e.of([]),(function(t,n){return e.ap(e.map(t,(function(e){return function(t){return(0,o.zG)(e,q(t))}})),n)}))}};i.F4},70:(e,t,n)=>{n.d(t,{G5:()=>m,dO:()=>d,Pd:()=>_,tS:()=>f,g_:()=>D,ij:()=>P,fS:()=>E,nM:()=>y,tO:()=>b,t$:()=>i,UI:()=>l,Vn:()=>v,EQ:()=>k,F2:()=>s,LF:()=>S,i$:()=>O,Y3:()=>M});var r=n(3735),o=n(9384),i=o.t$,s=o.F2,a=function(e,t){return(0,r.zG)(e,l(t))},c=function(e,t){return(0,r.zG)(e,g(t))},u="Either",l=function(e){return function(t){return y(t)?t:s(e(t.right))}},d={URI:u,map:a},p=s,g=function(e){return function(t){return y(t)?t:y(e)?e:s(t.right(e.right))}},m={URI:u,map:a,ap:c},h=function(e){return function(t){return y(t)?t:e(t.right)}},f=h,_=function(e,t){return function(n){return y(n)?i(e(n.left)):s(t(n.right))}},v=function(e){return function(t){return y(t)?i(e(t.left)):t}},y=(r.yR,o.nM),b=o.tO,w=function(e,t){return function(n){return y(n)?e(n.left):t(n.right)}},k=w,D=k,E=function(e){return function(t){return y(t)?e(t.left):t.right}},S=function(e){return y(e)?s(e.left):i(e.right)},P=function(e){return function(t){return null==t?i(e):s(t)}},M=function(e,t){try{return s(e())}catch(e){return i(t(e))}},O=w(r.yR,r.yR);o.F4,o.Xl},4268:(e,t,n)=>{n.d(t,{Uz:()=>o,f7:()=>r,w4:()=>i});n(3735);var r=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},o=function(e){return function(t){return r((function(n,r){return t.equals(e(n),e(r))}))}},i={equals:function(e,t){return e===t}};i.equals},6567:(e,t,n)=>{n.d(t,{DT:()=>a,EQ:()=>f,G:()=>s,UI:()=>u,Uo:()=>p,Wi:()=>m,Y3:()=>b,YP:()=>i,fS:()=>v,g_:()=>_,ij:()=>y,pC:()=>g,tS:()=>d});var r=n(3735),o=n(9384),i=(n(6017),n(4870),n(5605),o.YP),s=o.G;function a(e){return function(t){return e(t)?s(t):i}}var c=function(e){return"Left"===e._tag?i:s(e.right)},u=function(e){return function(t){return m(t)?i:s(e(t.value))}},l=s,d=function(e){return function(t){return m(t)?i:e(t.value)}},p=(r.yR,c),g=o.pC,m=function(e){return"None"===e._tag},h=function(e,t){return function(n){return m(n)?e():t(n.value)}},f=h,_=f,v=function(e){return function(t){return m(t)?e():t.value}},y=function(e){return null==e?i:s(e)},b=function(e){try{return s(e())}catch(e){return i}};o.F4,o.Xl},7209:(e,t,n)=>{n.d(t,{Fp:()=>c,VV:()=>a,Zt:()=>s,uZ:()=>u});var r=n(4268),o=n(3735),i=function(e){return function(t,n){return t===n||0===e(t,n)}},s=function(e){return{equals:i(e),compare:function(t,n){return t===n?0:e(t,n)}}},a=(o.W8,function(e){return function(t,n){return t===n||e.compare(t,n)<1?t:n}}),c=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}},u=function(e){var t=a(e),n=c(e);return function(e,r){return function(o){return n(t(o,r),e)}}};r.w4.equals},6017:(e,t,n)=>{n.d(t,{ff:()=>r});n(3735);var r=function(e){return function(t){return!e(t)}}},356:(e,t,n)=>{n.d(t,{hX:()=>V,jV:()=>R,xb:()=>A,XP:()=>L,dx:()=>z});n(4268);var r=n(3735),o=n(9384),i=(n(4870),n(2751)),s=(n(5605),function(e){for(var t in e)if(o.e$.call(e,t))return!1;return!0}),a=function(e){return function(t){return Object.keys(t).sort(e.compare)}};i.Df;var c=function(e,t){return function(n){if(o.e$.call(n,e)&&n[e]===t)return n;var r=Object.assign({},n);return r[e]=t,r}},u=function(e,t){return o.e$.call(t,e)};var l={};function d(e){return function(t){var n={};for(var r in t)o.e$.call(t,r)&&(n[r]=e(r,t[r]));return n}}function p(e){return d((function(t,n){return e(n)}))}function g(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return g(i.Df).apply(void 0,e);var n=a(e[0]);return function(e,t){return function(r){for(var o=e,i=n(r),s=i.length,a=0;a<s;a++){var c=i[a];o=t(c,o,r[c])}return o}}}function m(e){if("compare"in e){var t=a(e);return function(e){return function(n){return function(r){for(var o=e.empty,i=t(r),s=i.length,a=0;a<s;a++){var c=i[a];o=e.concat(o,n(c,r[c]))}return o}}}}return m(i.Df)(e)}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return h(i.Df).apply(void 0,e);var n=a(e[0]);return function(e,t){return function(r){for(var o=e,i=n(r),s=i.length-1;s>=0;s--){var a=i[s];o=t(a,r[a],o)}return o}}}function f(e){return M(i.Df)(e)}function _(e){return function(t){var n={},r=!1;for(var i in t)if(o.e$.call(t,i)){var s=t[i];e(i,s)?n[i]=s:r=!0}return r?n:t}}var v=function(e){return function(t){return function(n){if(s(n)||s(t))return l;var r={};for(var o in n)u(o,t)&&(r[o]=e.concat(n[o],t[o]));return r}}},y=function(e,t){return(0,r.zG)(e,p(t))},b=function(e){var t=C(e);return function(e,n,o){return(0,r.zG)(e,t(n,o))}},w=function(e){return function(t){var n=I(e)(t);return function(e,t){return(0,r.zG)(e,n(t))}}},k=function(e){var t=x(e);return function(e,n,o){return(0,r.zG)(e,t(n,o))}},D=function(e){var t=g(e);return function(e,n,o){return(0,r.zG)(e,t(n,o))}},E=function(e){var t=m(e);return function(e){var n=t(e);return function(e,t){return(0,r.zG)(e,n(t))}}},S=function(e){var t=h(e);return function(e,n,o){return(0,r.zG)(e,t(n,o))}},P=function(e){var t=O(e);return function(e){var n=t(e);return function(e,t){return n(e,(0,r.ls)(r.SK,t))}}},M=function(e){var t=P(e);return function(e){var n=t(e);return function(e){return n(e,r.yR)}}},O=function(e){return function(t){var n=a(e);return function(e,r){var o=n(e);if(0===o.length)return t.of(l);for(var i=t.of({}),s=function(n){i=t.ap(t.map(i,(function(e){return function(t){var r;return Object.assign({},e,((r={})[n]=t,r))}})),r(n,e[n]))},a=0,c=o;a<c.length;a++){s(c[a])}return i}}},q=function(e){return _((function(t,n){return e(n)}))};function C(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=g(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return C(i.Df).apply(void 0,e)}function I(e){if("compare"in e){var t=m(e);return function(e){var n=t(e);return function(e){return n((function(t,n){return e(n)}))}}}return I(i.Df)(e)}function x(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=h(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return x(i.Df).apply(void 0,e)}var T="ReadonlyRecord";i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df;i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df;var A=s,j=function(e){return function(t){return Object.keys(t).sort(e.compare)}},L=j(i.Df);var z=c;function B(e){return f(e)}var R=function(e){return function(t){return function(n){return A(n)||A(t)?{}:v(e)(t)(n)}}},U=y,N=b,G=w,W=k,K=D,$=E,F=S,J=P,Q=function(e){return function(t){var n=j(e);return function(e,r){var o=n(e);if(0===o.length)return t.of({});for(var i=t.of({}),s=function(n){i=t.ap(t.map(i,(function(e){return function(t){return e[n]=t,e}})),r(n,e[n]))},a=0,c=o;a<c.length;a++){s(c[a])}return i}}},V=q;var H="Record";i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df},4870:(e,t,n)=>{n.d(t,{s4:()=>r});n(3735);var r=function(e,t){return{left:e,right:t}}},5857:(e,t,n)=>{n.d(t,{e5:()=>p,Eh:()=>u,G0:()=>d});var r=n(4268),o=n(6017);new Set;var i=function(e){return function(t){for(var n,r=t.values(),o=!1;!o&&!(n=r.next()).done;)o=e(n.value);return o}};function s(e){return(0,o.ff)(i((0,o.ff)(e)))}function a(e){var t=c(e);return function(n,r){if(void 0===r){var o=a(e);return function(e){return o(e,n)}}return s((function(e){return t(e,r)}))(n)}}function c(e){return function(t,n){if(void 0===n){var r=c(e);return function(e){return r(t,e)}}for(var o,i=n.values(),s=!1;!s&&!(o=i.next()).done;)s=e.equals(t,o.value);return s}}var u=function(e){var t=a(e);return(0,r.f7)((function(e,n){return t(e,n)&&t(n,e)}))};function l(e){return function(t){for(var n,r=t.values(),o=new Set;!(n=r.next()).done;){var i=n.value;e(i)&&o.add(i)}return o}}function d(e){var t=m(e);return function(n,r){if(void 0===r){var o=d(e);return function(e){return o(n,e)}}if(g(n))return r;if(g(r))return n;var i=new Set(n);return r.forEach((function(e){t(e,i)||i.add(e)})),i}}function p(e){var t=m(e);return function(n,r){if(void 0===r){var o=p(e);return function(e){return o(e,n)}}return l((function(e){return!t(e,r)}))(n)}}new Set;var g=function(e){return 0===e.size},m=c},5151:(e,t,n)=>{n.d(t,{Hi:()=>f,PM:()=>h,RD:()=>k,UA:()=>_,UI:()=>u,dO:()=>m,oE:()=>E,of:()=>d,pE:()=>D,tD:()=>i,tS:()=>p});var r=n(3735),o=n(9384),i=function(e){return function(){return Promise.resolve().then(e)}};var s=function(e,t){return(0,r.zG)(e,u(t))},a=function(e,t){return(0,r.zG)(e,l(t))},c=function(e,t){return(0,r.zG)(e,p(t))},u=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},l=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},d=function(e){return function(){return Promise.resolve(e)}},p=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},g="Task";var m={URI:g,map:s},h={URI:g,of:d},f={URI:g,map:s,ap:a},_={URI:g,map:s,of:d,ap:a,chain:c},v=r.yR,y=(o.F4,d(o.Xl)),b=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,n){return Promise.resolve().then((function(){return e(n,t)()}))})))}}}(e);return function(e){return o.Od(e)?t(e):y}},w=function(e){var t=function(e){return function(t){return function(){return o.Gb(t).reduce((function(t,n,r){return t.then((function(t){return Promise.resolve().then(e(r+1,n)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,o.YM(t))).then(o.ri))}}}(e);return function(e){return o.Od(e)?t(e):y}},k=function(e){return b((function(t,n){return e(n)}))}(r.yR),D=function(e){return w((function(t,n){return e(n)}))},E={URI:g,map:s,of:d,ap:a,chain:c,fromIO:i,fromTask:v}},7112:(e,t,n)=>{function r(e){return function(t,n){return function(r){return e.chain(r,(function(r){return e.map(n(r),(function(e){var n;return Object.assign({},r,((n={})[t]=e,n))}))}))}}}n.d(t,{Do:()=>Y,ak:()=>Z,tS:()=>J,g_:()=>U,Uo:()=>B,fF:()=>z,t$:()=>T,UI:()=>$,F2:()=>A,Y3:()=>N});var o=n(1828),i=n(70),s=n(3735);function a(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.map(e,n)}))}}}function c(e){return(0,s.ls)(i.F2,e.of)}function u(e){return(0,s.ls)(i.t$,e.of)}function l(e){return function(t){return e.map(t,i.F2)}}function d(e){return function(t){return e.map(t,i.t$)}}function p(e){return function(t){return(0,s.ls)(i.ij(t),e.of)}}function g(e){var t=p(e);return function(e){var n=t(e);return function(e){return(0,s.ls)(e,n)}}}function m(e){var t=_(e),n=g(e);return function(e){var r=n(e);return function(e){return t(r(e))}}}function h(e){return a(e,i.dO)}function f(e){return(0,o.ap)(e,i.G5)}function _(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?e.of(n):t(n.right)}))}}}function v(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?t():e.of(n)}))}}}function y(e){return function(t,n){return function(r){return e.map(r,i.Pd(t,n))}}}function b(e){return function(t){return function(n){return e.map(n,i.Vn(t))}}}function w(e){return function(t,n){return function(r){return e.map(r,i.EQ(t,n))}}}function k(e){return function(t,n){return function(r){return e.chain(r,i.EQ(t,n))}}}function D(e){return function(t){return function(n){return e.chain(n,i.EQ(t,e.of))}}}function E(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?t(n.left):e.of(n)}))}}}function S(e){var t=E(e);return function(n){return t((function(t){return e.map(n(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function P(e){return function(t){return function(n){return e.chain(n,i.EQ((function(n){return e.map(t(n),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function M(e){return function(t){return e.map(t,i.LF)}}function O(e){return function(t){return e.map(t,i.i$)}}var q=n(9384),C=n(5151),I=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},x=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},T=u(C.PM),A=c(C.PM),j=l(C.dO),L=d(C.dO),z=(C.tD,C.tD,j),B=C.of,R=(C.tD,C.dO,k(C.UA)),U=R,N=(C.UA,function(e,t){return function(){return I(void 0,void 0,void 0,(function(){var n;return x(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e().then(q.F2)];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,q.t$(t(n))];case 3:return[2]}}))}))}}),G=(C.dO,C.PM,C.PM,C.UA,C.UA,C.UA,C.UA,C.dO,function(e,t){return(0,s.zG)(e,$(t))}),W=function(e,t){return(0,s.zG)(e,F(t))},K=function(e,t){return(0,s.zG)(e,J(t))},$=h(C.dO),F=(C.dO,C.dO,f(C.Hi)),J=_(C.UA),Q=(C.UA,A),V="TaskEither";var H={URI:V,map:G,ap:W,chain:K};var Y=Q(q.F4),Z=r(H);q.Xl},5605:(e,t,n)=>{function r(e,t){return function(n){var r=e.traverse(n);return function(e,o){return n.map(r(e,o),t.separate)}}}function o(e,t){return function(n){var r=e.traverse(n);return function(e,o){return n.map(r(e,o),t.compact)}}}n.d(t,{BL:()=>o,Fj:()=>r})},3735:(e,t,n)=>{n.d(t,{MZ:()=>o,Q1:()=>c,SK:()=>p,W8:()=>s,a9:()=>i,bc:()=>l,gn:()=>a,ls:()=>u,yR:()=>r,zG:()=>d});function r(e){return e}var o=r;function i(e){return function(){return e}}var s=i(!0),a=i(null),c=i(void 0);function u(e,t,n,r,o,i,s,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return o(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return i(o(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(i(o(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return a(s(i(o(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(s(i(o(r(n(t(e.apply(this,arguments)))))))))}}}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function d(e,t,n,r,o,i,s,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return o(r(n(t(e))));case 6:return i(o(r(n(t(e)))));case 7:return s(i(o(r(n(t(e))))));case 8:return a(s(i(o(r(n(t(e)))))));case 9:return c(a(s(i(o(r(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var p=function(e,t){return t}},9384:(e,t,n)=>{n.d(t,{F2:()=>l,F4:()=>f,G:()=>s,Gb:()=>m,Od:()=>p,Xl:()=>h,YM:()=>g,YP:()=>i,e$:()=>_,nM:()=>a,pC:()=>o,r1:()=>v,ri:()=>d,t$:()=>u,tO:()=>c});var r=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},o=function(e){return"Some"===e._tag},i={_tag:"None"},s=function(e){return{_tag:"Some",value:e}},a=function(e){return"Left"===e._tag},c=function(e){return"Right"===e._tag},u=function(e){return{_tag:"Left",left:e}},l=function(e){return{_tag:"Right",right:e}},d=function(e){return[e]},p=function(e){return e.length>0},g=function(e){return e[0]},m=function(e){return e.slice(1)},h=[],f={},_=Object.prototype.hasOwnProperty,v=function(e){return r([e[0]],e.slice(1))}},4011:(e,t,n)=>{n.d(t,{Df:()=>o,Eq:()=>r});var r={equals:function(e,t){return e===t}},o={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};r.equals,o.compare},2751:(e,t,n)=>{n.d(t,{Df:()=>o,Eq:()=>r,pn:()=>s,xb:()=>i});var r={equals:function(e,t){return e===t}},o={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},i=function(e){return 0===e.length},s=function(e,t){return function(n){return n.endsWith(e,t)}}},655:(e,t,n)=>{n.d(t,{_T:()=>r,mG:()=>o});function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function o(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}Object.create;Object.create},477:e=>{e.exports=function(e,t,n,r){var o=self||window;try{try{var i;try{i=new o.Blob([e])}catch(t){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),i=i.getBlob()}var s=o.URL||o.webkitURL,a=s.createObjectURL(i),c=new o[t](a,n);return s.revokeObjectURL(a),c}catch(r){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new o[t](r,n)}}},9417:(e,t,n)=>{n(1057),n(3351)},8206:(e,t,n)=>{n.d(t,{lg:()=>m,Bt:()=>h});var r=n(9320),o=n(3735),i=n(6567),s=n(6017),a=n(356),c=n(2751),u=n(6013);class l{constructor(e,t,n,r){this.userId=e,this.network=t,this.api=n,this.logger=r,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["","0","-1"]}getId(){return this.logger.debug("identities[appnexus]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.appnexus(this.url).then((e=>(this.logger.debug("identities[appnexus]: end HTTP request"),{type:"attempted",result:(0,o.zG)((0,i.DT)((e=>this.isValidAlias(e.uid)))(e),(0,i.UI)((e=>e.uid)))})),(e=>({type:"attempted",result:i.YP})))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class d{constructor(e,t,n,r,o){this.config=e,this.network=t,this.api=n,this.userId=r,this.logger=o,this.tag="pxid",this.ttlInSeconds=86400,this.usedForThirdPartyData=!1,this.url=`https://18ad0c5b-460c-4d19-a729-dc537805538f.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,i.ij)(e.uid)})),(e=>({type:"attempted",result:i.YP})))}reset(){return(0,u.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}const p=new Set(["public","email","email_md5","email_sha256"]),g=(e,t)=>!!e.id&&!(0,r.t9)(c.Eq)(e.tag,t);class m{constructor(e,t,n,r,o){this.metrics=e,this.trace=t,this.permutiveData=n,this.identityProviderEnv=r,this.logger=o,this.identities={},this.providers={},this.identitiesLastModified=new Date,this.identities=this.getCachedIdentitiesAndMigrateIfRequired()}get getIdentitiesLastModified(){return this.identitiesLastModified}prepareThirdPartyIdentities(){this.logger.debug("Identities: starting to load identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),n=[{load:e=>{return t=e.config,n=e.network,r=e.api,o=e.userId,s=e.logger,(0,i.G)(new d(t,n,r,o,s));var t,n,r,o,s}},{load:e=>{return t=e.userId,n=e.network,r=e.api,o=e.logger,(0,i.G)(new l(t,n,r,o));var t,n,r,o}},{load:e=>(e.cookies,i.YP)},{load:e=>(e.cookies,i.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,i.YP)}],s=(0,r.oA)(n.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,o.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(s).then((e=>e.map((([e,t])=>(this.providers[e.tag]=e,this.setTPDIdentityIfPresent(e.tag,t,e.ttlInSeconds)))))).then((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()}))}getPrioritizedIdentities(e){const t={default:0,appnexus:1,pxid:1},n=Object.entries(e).map((([e,{id:t,expiry:n,priority:r}])=>Object.assign(Object.assign(Object.assign({tag:e},t?{id:t}:{}),n?{expiry:n}:{}),void 0!==r?{priority:r}:{}))),o=n.filter((e=>g(e,Object.values(this.providers).map((e=>e.tag))))),s=n.filter((e=>((e,t)=>!!e.id&&!!(0,r.t9)(c.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),a=(0,r.DZ)((e=>(0,i.ij)(e.priority)))(o),u=a.length>0?Math.max(...a):0,l=o.map((e=>void 0!==e.priority?Object.assign(Object.assign({},e),{priority:e.priority}):Object.assign(Object.assign({},e),{priority:u+1}))),d=s.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:u+f}:{tag:e.tag,id:e.id,priority:u+_}));return l.concat(d)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}getCustomerDefinedIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>g({tag:e,id:t.value,expiry:t.expiry,priority:t.priority},Object.values(this.providers).map((e=>e.tag)))))}getTPDIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>{var n,r;return!!t.value&&!!(null===(r=null===(n=this.providers)||void 0===n?void 0:n[e])||void 0===r?void 0:r.usedForThirdPartyData)}))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,n=e=>{throw new Error(e)},r=e=>(e.forEach((e=>{(e=>"string"==typeof e.id&&"string"==typeof e.tag)(e)||n(t),(e=>"email_sha256"!==e.tag||m.emailSHA256Regex.test(e.id))(e)||n("Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")})),e);return"string"==typeof e?(o=e).length>0?[{id:o,tag:"default"}]:n(t):Array.isArray(e)?r(e):n(t);var o}checkIdentitiesHaveBeenModified(e){const t={concat:(e,t)=>c.Eq.equals(e.value,t.value)?{}:(0,o.bc)(e,t)};return(0,o.zG)((0,a.jV)(t)(this.identities)(e),u.hk,(e=>{const t=(0,s.ff)(a.xb)(e);return this.logger.debug("identities: is modified",t,e),t}))}setIdentities(e){let t=!1;const n=e.filter((e=>!p.has(e.tag))).reduce(((e,{tag:n,id:r,expiry:o,priority:i})=>(void 0===this.identities[n]&&(t=!0,this.logger.debug(`identities[${n}]: added`)),e[n]=Object.assign(Object.assign(Object.assign({},r?{value:r}:{}),o?{expiry:o}:{}),void 0!==i?{priority:i}:{}),e)),{});(t||this.checkIdentitiesHaveBeenModified(n))&&(this.identitiesLastModified=new Date),this.identities=Object.assign(Object.assign({},this.identities),n),this.permutiveData.setData("identities",this.identities)}reset(){return(0,o.zG)(this.identities={},(e=>Promise.all(Object.values(this.providers).map((e=>e.reset()))).then(o.Q1)))}getFilteredIdentities(e){return(0,u.m8)(...Object.entries(this.identities).filter((([t,n])=>e(t,n))).map((([e,{value:t,expiry:n,priority:r}])=>(0,o.bc)(e,Object.assign(Object.assign({id:t},n?{expiry:n}:{}),void 0!==r?{priority:r}:{})))))}shouldAskForNewIdentity(e){var t;const n=(0,i.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,i.g_)((()=>!0),this.isIdentityExpired)(n)}getCachedTPDIdentity(e){return this.identities[e]?(0,i.ij)(this.identities[e].value):i.YP}setTPDIdentityIfPresent(e,t,n=86400){const r=()=>Date.now()+Math.floor(1e3*n);return(0,i.g_)((()=>this.setIdentities([{tag:e,expiry:r()}])),(t=>this.setIdentities([{tag:e,id:t,expiry:r()}])))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,o.bc)(e,i.YP):(0,o.zG)(t.result,(t=>this.metrics.track({name:(0,i.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(n=>(0,o.bc)(e,t.result)))))}isIdentityExpired(e){return e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,u.m8)(...Object.entries(e).filter((([e,t])=>!this.isIdentityExpired(t)&&!p.has(e)))))(this.permutiveData.getData("identities")||{})}}m.emailSHA256Regex=/^[a-f0-9]{64}$/;const h=(e,t,n,o,i)=>{const s=(e,t)=>{const n=["(null)"];return n.indexOf(e)>-1||!!y[e]||(0,r.jV)(c.Eq)(t,n).length>0},a=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,n)=>["thestudentroom.co.uk"].some((e=>n.indexOf(e)>-1))&&(0,r.jV)(c.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":a,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":a,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},l={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!v[e]},d=u[e]||l[t];return!!d&&d(i,n,o)},f=2,_=3,v={},y={}},6815:(e,t,n)=>{n.d(t,{z:()=>r});class r{ingestIfEligible(e){return Promise.resolve()}}},64:(e,t,n)=>{n.d(t,{CL:()=>d,D0:()=>o,ED:()=>i,EW:()=>p,MU:()=>f,PH:()=>l,UW:()=>h,Uy:()=>c,eV:()=>s,jH:()=>g,mL:()=>m,qr:()=>a,t2:()=>u});var r=n(5506);const o=(0,r.MU)("engagement_edge_only",!0),i=(0,r.MU)("segment_transition_edge_only",!0),s=(0,r.MU)("track_form_submission",!0),a=(0,r.MU)("track_link_click",!0),c=(0,r.MU)("track_pageview_complete",!0),u=(0,r.MU)("track_pageview_engagement",!0),l=((0,r.$S)("sync_segments_cookie",!1),(0,r.$S)("track_slot_clicked",!0)),d=(0,r.$S)("track_slot_rendered",!0),p=(0,r.$S)("track_slot_viewable",!1),g=(0,r.$S)("track_targeting_keys",!1),m=((0,r.p1)("revenue_insights_enabled",!1),(0,r.p1)("data_provider_config",{ac_bidders:[]}),"_psegs"),h=!0,f=6e5},274:(e,t,n)=>{n.d(t,{U:()=>r});const r={$ip_address:"$ip_address",$ip_address_hash:"$ip_address_hash",$ip_geo_info_city:"$ip_geo_info_city",$ip_geo_info_continent:"$ip_geo_info_continent",$ip_geo_info_country:"$ip_geo_info_country",$ip_geo_info_postal_code:"$ip_geo_info_postal_code",$ip_geo_info_province:"$ip_geo_info_province",$ip_isp_info_autonomous_system_organization:"$ip_isp_info_autonomous_system_organization",$ip_isp_info_isp:"$ip_isp_info_isp",$ip_isp_info_organization:"$ip_isp_info_organization"}},8764:(e,t,n)=>{n.d(t,{v:()=>i});class r{constructor(e,t,n,r,o,i,s){this.logger=e,this.permutive=t,this.id=n,this.segmentCode=r,this.triggerType=o,this.config=i,this.workspaceLevelConfig=s}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const n={reaction_id:this.id,type:e};this.permutive.track("Reaction",n,t),this.logger.log(n.type,n)}}var o=n(5506);class i{constructor(e,t,n){this.logger=e,this.permutive=t,this.clientContext=n,this.optimisedActivationsConfig={dfp:{dfp:[103622,103626,105614,105613,105615,105310,105200,103459,103807,104165,105462,106061,106058,106264,106267,106268,106064,106266,106265,105763,105196,105197,102199,102201,104621,103455,103464,103453,103461,103454,103451,103457,103460,103456,98287,103452,106063,106060,108966,108969,106066,110072,110597,110716,110769,110771,110773,112851,112847,112848,113001,113605,113604,113010,114681,115381,115382,115383,115384,115609,114833,116089,116158,116684,117400,117406,117405,117404,117403,117402,117401,117399,117398,117397,117396,117395,117394,117393,117392,117391,117390,117389,117388,117387,117385,117384,117383,117382,117381,117375,117368,117376,117377,117379,117380,117378],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]}getActivations(e){return(0,o.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new r(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,n=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(r=t).operator?r.criteria.every(n):r.criteria.some(n));var r}}},5506:(e,t,n)=>{n.d(t,{$S:()=>s,Hn:()=>o,MU:()=>i,p1:()=>a});const r={web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!0,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},dfp:{auto_init:!0,networks:[{network_code:"2916070",name:"DZone"}],track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]}},o=e=>{const t=r[e];return(e,n)=>{var r;return null!==(r=null==t?void 0:t[e])&&void 0!==r?r:n}},i=o("web"),s=o("dfp"),a=o("prebid");o("facebook_pixel_v2"),o("socio_demo_cohorts"),o("ctv")},427:(e,t,n)=>{n.d(t,{z:()=>o});var r=n(3629);class o extends class{constructor(e){this.context=e}getContext(){return this.context}updateContext(...e){e.forEach((([e,t])=>{this.context[e]=t}))}}{constructor(e){super(e)}getClient(){var e;const t=null!==(e=document.title)&&void 0!==e?e:"";return Promise.resolve({type:"web",user_agent:navigator.userAgent||"",url:(0,r.bk)(window.location.href),domain:window.location.hostname||"",title:t,referrer:(0,r.bk)(document.referrer)})}}},1228:(e,t,n)=>{n.d(t,{E:()=>r});class r{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}isAvailable(){var e;return!!(null===(e=this.crypto)||void 0===e?void 0:e.subtle)}generateKey(e=!1){return this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"])}encrypt(e,t){const[n,r]=this._encrypt(e,this.str2bytes(t));return n.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(r,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const n=new Uint8Array(t,0,12),r=new Uint32Array(t,12,1)[0],o=t.slice(16,16+r);return this._decrypt(e,n,o).then(this.bytes2str)}_encrypt(e,t){const n=this.crypto.getRandomValues(new Uint8Array(12));return[this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},e,t),n]}_decrypt(e,t,n){return this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,n)}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}},4572:(e,t,n)=>{n(6013)},449:(e,t,n)=>{n.d(t,{M:()=>_,m:()=>f});var r=n(655),o=n(2688),i=n(9320),s=n(70),a=n(3735),c=n(6567),u=n(5151),l=n(7112),d=n(550),p=n(6013),g=n(5595);const m="permutive-events-cache",h="permutive-events-for-page",f="historical";class _{constructor(e,t,n,r,o,i,s){this.config=e,this.namespace=t,this.logger=n,this.network=r,this.trace=o,this.metrics=i,this.makeEventsStore=s,this.eventPutQueue=Promise.resolve(),this.eventsCache=this.makeEventsRepository(m),this.eventsForPage=this.makeEventsRepository(h),this.eventStore=s(),this.eventsTTLInMilliseconds=(0,a.zG)((0,c.ij)(this.config.eventsTTLInDays),(0,c.tS)((e=>"number"==typeof e&&e>0?(0,c.G)(24*e*3600):c.YP))),this.eventsCache.events=(0,p.PQ)((()=>{const e=this.trace.startSpan("load_event_cache");return this.loadFromDisk().then((t=>(e.finish(),this.logger.debug("Event cache loaded, #e",t.length),t)))})),this.readiness=this.eventsCache.events.then((()=>this.migratePreviousPagesEvents()))}migratePreviousPagesEvents(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,u.pE)((e=>(0,l.Y3)((()=>e.flush()),o.w)));return(0,a.zG)([this.eventsForPage,this.eventsCache],t,(0,u.UI)((t=>{const n=t.reduce(((e,t)=>(0,s.g_)((t=>[...e,t]),(()=>e))(t)),[]);return n.length>0&&this.network.error(`Migrate previous events failed. Got:\n${n.join("\n ")}`),e.finish()})),(e=>e()))}))}get eventsForCurrentPage(){return this.eventsForPage.events}all(){return Promise.all([this.eventsCache.events,this.eventsForPage.events]).then(i.xH)}resetIfNeeded(){return Promise.resolve(!1)}add(e,{persistOnDisk:t}){return(0,r.mG)(this,void 0,void 0,(function*(){this.logger.debug("Adding to cache",e);return(yield this.eventsForPage.events).push(e),t&&this.readiness.then((()=>this.eventsForPage.flush())),e}))}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e){const t=this.config.eventsCacheLimitBytes;let n=2*JSON.stringify(e).length,r=1;for(;n>t;)e.splice(0,r),r*=2,n=2*JSON.stringify(e).length;return{events:e,sizeInBytes:n}}loadFromDisk(){this.logger.log("Loading event cache...");const e=this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{}),t=e=>{this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})},n=(0,a.zG)(this.eventsTTLInMilliseconds,(0,c.g_)((0,a.a9)(a.yR),(e=>(0,i.hX)((t=>e>Date.now()-t.time.getTime()))))),o=(0,a.ls)((0,c.fS)((()=>[])),u.of),s=(0,l.g_)((e=>{const t=(0,u.of)([]);return e instanceof g.m?t:(this.network.error(`Error fetching data from store. Got ${e}`),()=>(0,r.mG)(this,void 0,void 0,(function*(){return yield this.reset("historical"),t()})))}),o);return(0,a.zG)([this.eventStore.get(m),this.eventStore.get(h)],(0,i.UI)(s),(0,i.vP)(u.oE),(0,u.UI)((t=>(this.logger.debug("Read events from store",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",e),t))),(0,u.UI)((0,a.ls)(i.xH,this.filterEventsByWorkspace,this.pruneEventsToSizeLimit.bind(this),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,e.events.length>0&&t(e),e.events)),(0,i.UI)(d.kJ),n)),(e=>e()))}reset(e){return(0,r.mG)(this,void 0,void 0,(function*(){return this.logger.debug("Resetting Events Cache"),(0,a.zG)(this.eventStore.deleteStore(),(0,l.UI)((()=>(this.eventStore=this.makeEventsStore(),e===f?Promise.all([this.eventsCache.reset(),this.eventsForPage.flush()]):Promise.all([this.eventsCache.reset(),this.eventsForPage.reset()])))),(0,l.UI)((()=>this.all())),(0,l.g_)((()=>(0,u.of)([])),(e=>(0,a.a9)(e))),(e=>e()))}))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t={key:e,events:Promise.resolve([]),sizeInBytes:0,flush:()=>(0,r.mG)(this,void 0,void 0,(function*(){const e=yield t.events;this.logger.debug("Writing",e.length,"events to",t.key);const n=this.trace.startSpan(`write_${t.key}`),r=JSON.stringify(e);return t.sizeInBytes=2*r.length,this.eventPutQueue=this.eventPutQueue.then((r=>this.eventStore.put(e.map(d.XO),t.key)().then((e=>{if((0,s.nM)(e)){(e=>{const n=`Events cache failed to put ${t.key}. Got ${e}`;return e instanceof g.m?this.logger.error(n):this.network.error(n)})(e.left)}n.finish()}))))})),reset:()=>(t.events=Promise.resolve([]),t.sizeInBytes=0,t.flush())};return t}}},8790:(e,t,n)=>{n.d(t,{K:()=>z});var r=n(1228),o=n(2688),i=n(70),s=n(6567),a=n(7112);var c=n(3735),u=n(2485),l=n(655);let d,p;const g=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,_=new WeakMap;let v={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return m.get(e);if("objectStoreNames"===t)return e.objectStoreNames||h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return w(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function y(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(p||(p=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(k(this),t),w(g.get(this))}:function(...t){return w(e.apply(k(this),t))}:function(t,...n){const r=e.call(k(this),t,...n);return h.set(r,t.sort?t.sort():[t]),w(r)}}function b(e){return"function"==typeof e?y(e):(e instanceof IDBTransaction&&function(e){if(m.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));m.set(e,t)}(e),t=e,(d||(d=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,v):e);var t}function w(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(w(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&g.set(t,e)})).catch((()=>{})),_.set(t,e),t}(e);if(f.has(e))return f.get(e);const t=b(e);return t!==e&&(f.set(e,t),_.set(t,e)),t}const k=e=>_.get(e);function D(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=w(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(w(s.result),e.oldVersion,e.newVersion,w(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),a}function E(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),w(n).then((()=>{}))}const S=["get","getKey","getAll","getAllKeys","count"],P=["put","add","delete","clear"],M=new Map;function O(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(M.get(t))return M.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=P.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!S.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&i.done]))[0]};return M.set(t,i),i}v=(e=>({...e,get:(t,n,r)=>O(t,n)||e.get(t,n,r),has:(t,n)=>!!O(t,n)||e.has(t,n)}))(v);var q=n(5151),C=n(6013);function I(e){return"development"===e.environment?window.isSecureContext:"https:"===window.location.protocol}class x{constructor(e,t,n,r,o,i,s){this.namespace=e,this.logger=t,this.cryptoAlg=n,this.idb=r,this.mainObjectStore=o,this.keyObjectStore=i,this.keyObjectKey=s,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.hasForcedCompaction=!1,this.logger.debug("IDB: Created",this.idb),this.cryptoKey=this.getOrGenerateKey()}static initialise(e,t,n,r,o,s,u,l,d,p){const g=(0,C.G6)(navigator.userAgent)&&!1,m=[I(e),o.isAvailable(),!g].every((e=>!0===e)),h=(e,t,n)=>t.includes(n)?(0,c.Q1)():e.createObjectStore(n),f=m?(0,i.Y3)((()=>function(e){if(!(0,C.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t,n=0;return new Promise((e=>{const r=()=>(n++,indexedDB.databases().finally(e));t=window.setInterval(r,100),r()})).finally((()=>{clearInterval(t),e.track({name:"sdk_idb_conn_attempt_safari_count",value:n,labels:{}})}))}(n).then((()=>D(s,p,{upgrade:e=>{const t=[...e.objectStoreNames];h(e,t,u),h(e,t,l)}})))),(e=>String(e))):(0,i.t$)("Connection not attempted. Default to localStorage");return(0,i.g_)((e=>(0,a.t$)(e)),(e=>(0,a.Y3)((()=>e.then((e=>new x(t,r,o,e,u,l,d)))),(e=>String(e)))))(f)}put(e,t){return(0,l.mG)(this,void 0,void 0,(function*(){return(0,c.zG)((()=>(0,l.mG)(this,void 0,void 0,(function*(){return(0,c.bc)(JSON.stringify(e),yield this.cryptoKey)}))),(0,q.tS)((([e,t])=>(0,q.of)(this.cryptoAlg.encrypt(t,e)))),(0,q.tS)((e=>()=>(0,l.mG)(this,void 0,void 0,(function*(){return yield this.resetIfRequired(this.puts++),e})))),(0,q.tS)((e=>(0,a.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),o.w))),(0,q.UI)((0,i.g_)((n=>{throw this.logger.error(`IDB: Failed to put "${t.toString()}" value`,e,". Got \n",n),"QuotaExceededError"===n.name&&this.forceCompaction(),n}),(()=>t))),(e=>e()))}))}get(e){return this.cryptoKey.then((t=>(0,c.zG)(this.namespace.getNamespacedStorageKey(String(e)),(n=>this.idb.get(this.mainObjectStore,n).then((e=>e?this.cryptoAlg.decrypt(t,e):null)).then(JSON.parse).catch((t=>{const n=(0,o.w)(t);throw this.logger.error(`IDB: Get ${e.toString()} failed. Got`,n),n}))))))}delete(e){return(0,c.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logger.debug("IDB: Deleting",this.idb),this.idb.close(),E(this.idb.name)}getOrGenerateKey(){return(0,c.zG)(this.namespace.getNamespacedStorageKey(this.keyObjectKey),(e=>this.idb.get(this.keyObjectStore,e).then((e=>e||this.storeGivenOrGeneratedKey())).catch((e=>{const t=(0,o.w)(e);return this.logger.error("IDB: Get or generate key failed. Got\n",t),this.cryptoAlg.generateKey(!1)}))))}storeGivenOrGeneratedKey(e=this.cryptoAlg.generateKey(!1)){return(0,c.zG)((0,q.of)(this.namespace.getNamespacedStorageKey(this.keyObjectKey)),(0,q.tS)((t=>(0,a.Y3)((()=>(0,l.mG)(this,void 0,void 0,(function*(){return this.idb.put(this.keyObjectStore,yield e,t)}))),o.w))),(0,q.UI)((0,i.g_)((e=>{throw this.logger.error(`IDB: Failed to store crypto key to ${this.keyObjectStore} due to unexpected error,\n`,e),e}),(()=>e))),(e=>e()))}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logger.debug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return D(e).then((t=>(t.close(),E(e))))}resetIfRequired(e){return(0,C.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.reset():Promise.resolve()}reset(){return(0,l.mG)(this,void 0,void 0,(function*(){const e=this.idb.name,t=this.idb.version;yield this.deleteStore(),this.idb=yield D(e,t),this.idb.createObjectStore(this.mainObjectStore),this.idb.createObjectStore(this.keyObjectStore),yield this.storeGivenOrGeneratedKey(this.cryptoKey),this.logger.debug("IDB: Reset to",this.idb)}))}}var T=n(3195),A=n(5595);class j{constructor(e,t,n,r,o,s,a,l,d,p){this.version=3,this.db=((e,t,n,r,o,i,s,a,l,d,p)=>(0,c.zG)(x,(0,u._)({logger:d,consentTracking:p})).initialise(e,t,n,d,r,o,i,s,a,l))(e,t,n,r,o,s,a,l,this.version,d,p)().then((0,i.fS)((e=>(0,T.S)(t,d,p))))}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new A.m(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,a.Y3)((()=>this.db.then((n=>n.put(e,t)))),(e=>{const t=(0,o.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,a.Y3)((()=>this.db.then((t=>t.get(e))).then(s.ij)),(e=>{const t=(0,o.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,a.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,a.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}var L=n(449);class z extends L.M{constructor(e,t,n,o,i,s,a,c){super(e,t,n,o,i,s,(()=>new j(e,t,s,new r.E,"18ad0c5b-460c-4d19-a729-dc537805538f",`events_${a.get()}`,`keys_${a.get()}`,"events",n,c)))}}},2923:(e,t,n)=>{n.d(t,{X:()=>r});class r{constructor(){this.properties={}}overrideCustomProps(e){this.properties=e}getCustomProps(){return this.properties}}},4314:(e,t,n)=>{n.d(t,{c:()=>a});var r=n(2688),o=n(3735),i=n(550),s=n(7545);class a{constructor(e,t,n,r,o,i){this.eventHandler=e,this.api=t,this.metrics=n,this.userId=r,this.network=o,this.eventsCache=i,this.DEBOUNCE_TIME=500,this.MAX_DEBOUNCE_TIME=5e3,this.batch={requestData:[],requestOptions:[],processingStrategies:[]},this.scheduler=new s.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedFlushIfNotEmpty=this.scheduler.schedule(this.flush.bind(this)),this.scheduler.scheduleForPageUnload((()=>this.flushWithBeacon.bind(this)(this.batch)))}add(e,t,n){return this.batch.requestData.push(e),this.batch.requestOptions.push(t),this.batch.processingStrategies.push(n),this.debouncedFlushIfNotEmpty(this.batch),Promise.resolve()}flush(e){return this.flushIfNotEmpty(e,!1)}flushWithBeacon(e){return this.flushIfNotEmpty(e,!0)}flushIfNotEmpty(e,t){const{requestData:n,requestOptions:i,processingStrategies:s}=e,a=e=>this.network.error(`Error sending events batch. Got ${(0,r.w)(e)}`,this.userId.get()),c=t?(0,o.ls)((e=>this.api.trackBatchBeacon(e)),(e=>Promise.resolve())):e=>this.api.trackBatch(this.metrics,e);return n.length>0?(0,o.zG)(this.resetBatch(),(e=>this.trackMetrics(n)),(e=>c(n).then((e=>this.isBatchResponse(e)?this.onBatchResponseSuccess(e,n,i,s):(0,o.Q1)())).catch(a))):Promise.resolve()}onBatchResponseSuccess(e,t,n,r){const s=(e,t)=>"never"!==t?(0,o.ls)((()=>this.eventHandler.newEvent((0,i.XO)(e),null)),(()=>this.eventsCache.add(e,{persistOnDisk:!0}))):o.Q1,a=(e,t,n)=>{const r={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:(new Date).toISOString()};return(0,o.zG)(n(e.error.message),(t=>console.error(e)),(t=>this.eventHandler.newEvent(r,e)))};return e.forEach((({body:e},c)=>{const u=t[c],l=n[c],d=r[c];return(0,i.bk)(e)?a(e,u,l.error):((e,t,n,r)=>{const a=(0,i.mh)(e,t);return(0,o.zG)(n(a),s(a,r))})(e,u,l.success,d)}))}resetBatch(){this.batch={requestData:[],requestOptions:[],processingStrategies:[]}}trackMetrics(e){this.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e).length,labels:{}})}isBatchResponse(e){return!!e}}},3530:(e,t,n)=>{n.d(t,{w:()=>a});var r=n(3735),o=n(6567),i=n(3195);const s="permutive-pvc";class a{constructor(e,t,n,r,o,s,a){this.config=e,this.namespace=t,this.metrics=n,this.cryptoAlg=r,this.logger=o,this.consentTracking=s,this.network=a,this.DB_NAME="pvc",this.PVC_MAIN_OBJECT_STORE="pvc",this.CRYPTO_KEY_OBJECT_STORE="keys",this.CRYPTO_KEY_OBJECT_KEY="pvc",this.DB_VERSION=1,this.db=new Promise((e=>e((0,i.S)(this.namespace,this.logger,this.consentTracking))))}put(e){return this.db.then((t=>t.put(e,s))).then(r.Q1)}getIfPresent(){return this.db.then((e=>e.get(s))).then(o.ij)}reset(){return this.db.then((e=>e.delete(s)))}}},9678:(e,t,n)=>{n.d(t,{LP:()=>i,dG:()=>r,eP:()=>o});const r=4096,o=`Cookie exceeds maximum supported size of ${r} bytes for most browsers.`,i="Cookie is missing required parameters."},9175:(e,t,n)=>{n.d(t,{S:()=>c});var r=n(3735),o=n(9678);class i{constructor(e,t,n){this.namespace=e,this.config=t,this.logger=n}setCookie(e,t,n=!1){var r;if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:n,cookieDomain:i}=null!==(r=this.config)&&void 0!==r?r:{};throw this.logger.warn(`Unable to set cookie. ${o.LP}`,{value:t,cookieName:e,cookieExpiry:n,cookieDomain:i}),new Error(o.LP)}const i=this.namespace.getNamespacedStorageKey(e),s=[encodeURIComponent(i),"=",encodeURIComponent(t),"; expires=",this.config.cookieExpiry,"; domain=",this.config.cookieDomain,"; path=/",n?"; samesite=none; secure":""].join("");if(s.length>o.dG)throw this.logger.warn(`Unable to set cookie ${i}. ${o.eP}`),new Error(o.eP);return this.logger.debug(`Setting cookie ${s}`),document.cookie=s,!0}getCookie(e,t=!1){const n=t?e:this.namespace.getNamespacedStorageKey(e),r=new RegExp("\\b"+encodeURIComponent(n)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.namespace.getNamespacedStorageKey(e);return document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain="+this.config.cookieDomain+"; path=/",!0}}var s=n(590);const a=e=>{const{logger:t,consentTracking:n}=e,r=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{constructor(){super(...arguments),this.setCookie=(0,s.vX)(super.setCookie.bind(this),r,n.isRevoked)}}},c=(e,t,n,o)=>new((0,r.zG)(i,a({consentTracking:o,logger:n})))(e,t,n)},3319:(e,t,n)=>{n.d(t,{S:()=>l});var r=n(3735),o=n(2688),i=n(787),s=n(70);class a{constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){return(0,r.zG)(this.getExternalData(e),i.A)}setExternalData(e,t){const n=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(n,t)}catch(e){}}setExternalJsonData(e,t){return(0,r.zG)((n=t,(0,s.Y3)((function(){var e=JSON.stringify(n);if("string"!=typeof e)throw new Error("Converting unsupported structure to JSON");return e}),r.yR)),(0,s.UI)((t=>this.setExternalData(e,t))),(0,s.g_)((e=>{throw(0,o.w)(e)}),r.Q1));var n}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}var c=n(590);const u=e=>{const{logger:t,consentTracking:n}=e,r=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},o=r,i=r;return e=>class extends e{constructor(){super(...arguments),this.setExternalData=(0,c.vX)(super.setExternalData.bind(this),o,n.isRevoked),this.setExternalJsonData=(0,c.vX)(super.setExternalJsonData.bind(this),i,n.isRevoked)}}},l=(e,t,n)=>new((0,r.zG)(a,u({consentTracking:n,logger:t})))(e)},6715:(e,t,n)=>{n.d(t,{P:()=>r});class r{constructor(e,t,n,r,o,i,s,a,c=[],u={}){this.logger=e,this.network=t,this.userId=n,this.viewId=r,this.messages=o,this.sessionManager=i,this.cookies=s,this.externalData=a,this.blockers=c,this.addons=u,this.listenForBlockers=!0}makeSafe(e){return(...t)=>{try{return e(...t)}catch(e){this.network.error(e,this.userId.get())}}}utcNow(){const e=new Date;return new Date(e.toUTCString())}addBlocker(e){this.blockers.push(e),this.logger.log("<blockers> added blocker "+e),this.messages.on(e,(()=>{if(this.listenForBlockers){const t=this.blockers.indexOf(e);t>=0&&(this.blockers.splice(t,1),this.logger.log("<blockers> removed blocker "+e)),0===this.blockers.length&&(this.listenForBlockers=!1,this.messages.emit("permutive:blockers:empty"),this.logger.log("<blockers> complete"))}}))}}},4828:(e,t,n)=>{n.d(t,{SX:()=>i});class r{constructor(){this.prefix="[Permutive]",this.debugStyle=["color: blue"].join(";")}log(...e){return console.log.bind(window.console,this.prefix)(...e)}debug(...e){return console.debug.bind(window.console,"%c%s",this.debugStyle,this.prefix)(...e)}warn(...e){return console.warn.bind(window.console,this.prefix)(...e)}error(...e){return console.error.bind(window.console,this.prefix)(...e)}}class o{log(){}debug(){}warn(){}error(){}}const i=e=>{var t;return e.loggingEnabled&&void 0!==(null===(t=window.console)||void 0===t?void 0:t.log)?new r:new o}},8167:(e,t,n)=>{n.d(t,{Q:()=>r});class r{constructor(){this.messageListenerMap={},this.replayQueue={}}on(e,t,n={withReplay:!1}){var r,o;null!==(r=(o=this.messageListenerMap)[e])&&void 0!==r||(o[e]=[]),n.withReplay&&this.processReplayQueue(e,t),this.messageListenerMap[e].push(t)}once(e,t){const n=r=>{t(r),this.off(e,n)};this.on(e,n)}off(e,t){var n;if(!t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);const r=(null!==(n=this.messageListenerMap[e])&&void 0!==n?n:[]).indexOf(t);r>=0&&this.messageListenerMap[e].splice(r,1)}emit(e,t,n={withReplay:!1}){var r;(null===(r=this.messageListenerMap[e])||void 0===r?void 0:r.length)>0?this.emitMessageWithPayload(e,t):n.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){var n,r;null!==(n=(r=this.replayQueue)[e])&&void 0!==n||(r[e]=[]),this.replayQueue[e].push(t)}processReplayQueue(e,t){var n;null===(n=this.replayQueue[e])||void 0===n||n.forEach((e=>t(e)))}emitMessageWithPayload(e,t){var n;null===(n=this.messageListenerMap[e])||void 0===n||n.forEach((e=>e(t)))}}},6830:(e,t,n)=>{n.d(t,{x:()=>Zt,e:()=>Yt});const r=()=>({kind:"null",value:null}),o=e=>({kind:"string",value:e}),i=e=>({kind:"number",value:e}),s=e=>({kind:"array",value:e}),a=e=>({kind:"object",value:e}),c=e=>e,u=()=>({kind:"bottom"}),l=e=>({kind:"inner",a:e}),d=e=>({kind:"top",error:e}),p=e=>({kind:"unbounded",group:e}),g=(e,t)=>({kind:"windowed",key:t,group:e}),m=(e,t,n)=>({kind:"countLimit",n,limit:t,group:e}),h=(e,t,n)=>({kind:"uniqueLimit",n,limit:t,group:e}),f=e=>({kind:"numberGroup",group:e}),_=e=>({kind:"stringGroup",group:e}),v=e=>({kind:"tuple",tuple:e}),y=e=>({state:e}),b=(e,t)=>({commands:e,payload:t});function w(e){return e}function k(e,t,n,r,o,i,s,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return o(r(n(t(e))));case 6:return i(o(r(n(t(e)))));case 7:return s(i(o(r(n(t(e))))));case 8:return a(s(i(o(r(n(t(e)))))));case 9:return c(a(s(i(o(r(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var D=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},E=function(e){return D((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},S=function(e){return function(t,n){return t===n||0===e(t,n)}},P=function(e){return{equals:S(e),compare:function(t,n){return t===n?0:e(t,n)}}},M=function(e){return function(t){return P((function(n,r){return t.compare(e(n),e(r))}))}},O=function(e){return function(t,n){return-1===e.compare(t,n)}},q=function(e){return function(t,n){return 1===e.compare(t,n)}},C=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}};var I={equals:function(e,t){return e===t}},x={equals:I.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};const T=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return l(t(e.a));case"top":return d(e.error)}},A=e=>P(((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return x.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var j=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},L=function(e){return"Some"===e._tag},z={_tag:"None"},B=function(e){return{_tag:"Some",value:e}},R=function(e){return"Left"===e._tag},U=(Object.prototype.hasOwnProperty,function(e){return j([e[0]],e.slice(1))});var N=z,G=B;function W(e){return function(t){return e(t)?G(t):N}}var K=function(e){return"Left"===e._tag?N:G(e.right)},$=function(e){return{equals:function(t,n){return t===n||(H(t)?H(n):!H(n)&&e.equals(t.value,n.value))}}},F=function(e){return{equals:$(e).equals,compare:function(t,n){return t===n?0:V(t)?V(n)?e.compare(t.value,n.value):1:-1}}},J=function(e){return function(t){return H(t)?N:G(e(t.value))}},Q=K,V=L,H=function(e){return"None"===e._tag},Y=function(e){return function(t){return H(t)?e():t.value}};var Z;Z=void 0;var X=function(e){return e[0]},ee=X;var te=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},ne=function(e){return e.length>0},re=function(e,t){return e<0||e>=t.length},oe=function(e){return function(t){return te([e],t)}},ie=oe,se=function(e){return function(t){return te(te([],t),[e])}},ae=se,ce=U,ue=function(e){return ne(e)?B(e):z},le=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],o=1;o<n;o++)r.push(e(o));return r}};var de=ce;var pe=function(e){return function(t){var n=Math.max(1,e);return n>=t.length?[de(t),[]]:[k(t.slice(1,n),ie(me(t))),t.slice(n)]}},ge=function(e){return D((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},me=ee;var he={equals:function(e,t){return e===t}},fe={equals:he.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};var _e=function(e,t){return function(n){for(var r=n.length,o=e,i=0;i<r;i++)o=t(i,o,n[i]);return o}};var ve=function(e){return 0===e.length},ye=ne,be=ie,we=ae,ke=function(e,t){return e<=0?[]:le(t)(e)};var De=re,Ee=function(e){return function(t){return De(e,t)?Me(t):t.slice(0,e)}};var Se=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};var Pe=function(e){return function(t){return e<=0||ve(t)?Me(t):e>=t.length?[]:t.slice(e,t.length)}};var Me=function(e){return e.slice()},Oe=function(e){return ve(e)?[]:e.slice().reverse()},qe=function(e){return function(t){return t.length<=1?Me(t):t.slice().sort(e.compare)}},Ce=function(e,t,n){for(var r=[],o=Math.min(e.length,t.length),i=0;i<o;i++)r[i]=n(e[i],t[i]);return r};var Ie=function(e){return function(t){return e>=1&&ye(t)?pe(e)(t):ve(t)?[Me(t),[]]:[[],Me(t)]}};var xe=function(e){return function(t){return k(t,function(e){return function(t){for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},Te=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var o=e(r,t[r]);L(o)&&n.push(o.value)}return n}},Ae=function(e){return Te((function(t,n){return e(n)}))},je=Ae(w),Le=_e,ze=function(e){var t=Be(e);return function(e){return t((function(t,n){return e(n)}))}},Be=function(e){return function(t){return Le(e.of([]),(function(n,r,o){return e.ap(e.map(r,(function(e){return function(t){return k(e,we(t))}})),t(n,o))}))}},Re=function(e){return P((function(t,n){for(var r=t.length,o=n.length,i=Math.min(r,o),s=0;s<i;s++){var a=e.compare(t[s],n[s]);if(0!==a)return a}return fe.compare(r,o)}))},Ue=function(e){return{_tag:"Left",left:e}},Ne=function(e){return{_tag:"Right",right:e}},Ge=function(e,t){return k(e,$e(t))},We=function(e,t){return k(e,Je(t))},Ke="Either",$e=function(e){return function(t){return Ve(t)?t:Ne(e(t.right))}},Fe=Ne,Je=function(e){return function(t){return Ve(t)?t:Ve(e)?e:Ne(t.right(e.right))}},Qe={URI:Ke,map:Ge,ap:We,of:Fe},Ve=R;var He=function(e){return-1===e?1:1===e?-1:0};function Ye(e,t){return je(e.map(t))}function Ze(e,t,n,r){const o=(e,t)=>{if(0===e.length)return je(t.map((e=>G({1:e[1],2:n(N,G(e[2]))}))));if(0===t.length)return je(e.map((e=>G({1:e[1],2:n(G(e[2]),N)}))));if(e.length>0&&t.length>0&&O(r)(e[0][1],t[0][1])){const[r,...i]=e,s=r[1],a=r[2];return be({1:s,2:n(G(a),N)})(o(i,t))}if(e.length>0&&t.length>0&&q(r)(e[0][1],t[0][1])){const[r,...i]=t,s=r[1],a=r[2];return be({1:s,2:n(N,G(a))})(o(e,i))}if(e.length>0&&t.length>0){const[r,...i]=e,[s,...a]=t,c=r[1],u=r[2],l=s[2];return be({1:c,2:n(G(u),G(l))})(o(i,a))}throw new Error("Non exhaustive match in mapOption2")},i=M((e=>e[1]))(r),s=(e=>{const t=Ye(e,(e=>V(e[2])?G({1:e[1],2:e[2].value}):N));return 0===t.length?N:G(t)})(o(qe(i)([...e].map((e=>({1:e[0],2:e[1]})))),qe(i)([...t].map((e=>({1:e[0],2:e[1]}))))));return J((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function Xe(e,t,n,r){const o=M((e=>e[0]))(r),i=qe(o)([...t]).reduceRight(((e,t)=>{if(Ve(e)){const r=n(t[1],e.left);return V(r)?Ue(r.value):Ne(t[0])}return e}),Ue(e));return Q(i)}function et(e,t){return new Map([...e].map(t))}function tt(e,t){return new Map([...e].filter(t))}function nt(e){return JSON.stringify(rt(e))}function rt(e){switch(e.kind){case"null":return st.encode(e);case"string":return at.encode(e);case"number":return ct.encode(e);case"array":return ut.encode(e);case"object":return lt.encode(e)}}function ot(e){return null===e?st.decode(e):"number"==typeof e?ct.decode(e):"string"==typeof e?at.decode(e):Array.isArray(e)?ut.decode(e):lt.decode(e)}const it=(e,t)=>Ue(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),st={encode:e=>null,decode:e=>null===e?Ne({kind:"null",value:null}):it(e,"SimpleNull")},at={encode:e=>e.value,decode:e=>"string"==typeof e?Ne(o(e)):it(e,"SimpleString")},ct={encode:e=>e.value,decode:e=>"number"==typeof e?Ne(i(e)):it(e,"SimpleNumber")},ut={encode:e=>e.value.map(rt),decode:e=>{if(Array.isArray(e)){const t=ze(Qe)(ot)(e);return $e(s)(t)}return it(e,"SimpleArray")}},lt={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:rt(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=ze(Qe)((([e,t])=>k(ot(t),$e((t=>function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}(e,t))))))(Object.entries(e));return $e((e=>a(new Map([...e]))))(t)}return it(e,"SimpleObject")}};function dt(e){return k(e,gt,J(nt),Y((()=>"<encode error>")))}function pt(e){return J(yt)(function(e){switch(e.state.kind){case"top":return G(o(e.state.error));case"bottom":return N;case"inner":return gt(e.state.a)}}(e))}function gt(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return mt(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?G(s(function(e,t){const n=J((e=>be(e)(t)))(e);return Y((()=>t))(n)}(J((e=>o(function(e){const t=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>1===e[2]?t(e[1]):t(e[1])+JSON.stringify(e[2]);return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return o(e.error);case"inner":return i(e.a)}},n=e=>Ye([ht,ft,e=>k(e,vt,a,G)],(t=>t(e))),r=e=>Ye([ht,_t,e=>k(e,vt,(e=>et(e,(([e,t])=>[JSON.stringify(e),t]))),a,G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return n(e.group);case"numberGroup":return r(e.group)}}(e.payload)))):N}function mt(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||V(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||V(e.limit)}}function ht(e){switch(e.kind){case"unbounded":return N;case"windowed":return G(o("w"));case"countLimit":return G(o(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return G(o(1===e.n?"u":`u${e.n}`))}}function ft(e){switch(e.kind){case"unbounded":return N;case"windowed":return G(o(V(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return G(o(V(e.limit)?e.limit.value:""))}}function _t(e){switch(e.kind){case"unbounded":return N;case"windowed":return V(e.key)?G(i(e.key.value)):G({kind:"null",value:null});case"countLimit":case"uniqueLimit":return V(e.limit)?G(i(e.limit.value)):G({kind:"null",value:null})}}function vt(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function yt(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?yt(e.value[0]):s(e.value.map(yt));case"object":return k(tt(e.value,(([e,t])=>"null"!==t.kind)),(e=>et(e,(e=>[e[0],yt(e[1])]))),a);default:return e}}function bt(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return N;const[t,n,r,o]=e;if("string"===t.kind&&"string"===n.kind&&"object"===o.kind){const e=W((e=>wt(e[1].value)&&kt(e[2].value)))({1:t,2:n});return J((e=>({prim:e[1].value,grp:e[2].value,cutoff:r,m:o.value})))(e)}return N})(e);if(V(t)){const{prim:e,grp:n,cutoff:r,m:o}=t.value,i=Dt(r,o,Et(n));return"string"==typeof i?d(i):l(b(St(e),i))}const n=(e=>{if(3!==e.length)return N;const[t,n,r]=e;if("string"===t.kind&&"object"===r.kind){const e=W((e=>kt(e.value)))(t);return J((e=>({grp:e.value,cutoff:n,m:r.value})))(e)}return N})(e);if(V(n)){const{grp:e,cutoff:t,m:r}=n.value,o=Dt(t,r,Et(e));return"string"==typeof o?d(o):l(b(N,o))}const r=(e=>{if(2!==e.length)return N;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=W((e=>wt(e.value)))(t);return J((e=>({prim:e.value,m:n.value})))(e)}return N})(e);if(V(r)){const{prim:e,m:t}=r.value;return l(b(St(e),_(p(t))))}const o=(e=>{if(1!==e.length)return N;const[t]=e;return"object"===t.kind?G({m:t.value}):N})(e);if(V(o)){const{m:e}=o.value;return l(b(N,_(p(e))))}const i=(e=>{if(e.length<1)return N;const[t,...n]=e;if("string"===t.kind){const e=W((e=>wt(e.value)))(t);return J((e=>({prim:e.value,rest:n})))(e)}return N})(e);if(V(i)){const{prim:e,rest:t}=i.value;return l(b(St(e),Mt(t)))}return l(b(N,Mt(e)))},n=e=>"array"===e.kind?xe(n)(e.value):[e];return"null"===e.kind?y({kind:"bottom"}):y(t(n(e)))}function wt(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...n]=t;return-1!=="pmvn".indexOf(e)&&n.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}function kt(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function Dt(e,t,n){switch(e.kind){case"string":return _(n({1:G(e.value),2:t}));case"number":case"null":return f(n({1:"null"===e.kind?N:G(e.value),2:tt(et(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function Et(e){const t=e=>t=>h(t[2],t[1],e),n=e=>t=>m(t[2],t[1],e),r=e.split("");switch(!0){case"w"===r[0]&&void 0===r[1]:return e=>g(e[2],e[1]);case"u"===r[0]&&void 0===r[1]:return t(1);case"u"===r[0]&&void 0!==r[1]:return t(parseInt(r.slice(1).join("")));case"x"===r[0]&&void 0===r[1]:return n(1);case"x"===r[0]&&void 0!==r[1]:return n(parseInt(r.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function St(e){return J(c)(ue(Pt(e,(e=>{const t=e.split("");if(0===t.length)return N;const[n,...r]=t,o=(e=>{switch(e){case"p":return G("add");case"m":return G("mul");case"v":return G("max");case"n":return G("min");default:return N}})(n);return J((e=>{const{init:t,rest:n}=(o=e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t},function(e){var t=Ie(Se(e,o))(e);return{init:t[0],rest:t[1]}})(r);var o;return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(o)}))))}function Pt(e,t){const n=t(e);return Y((()=>[]))(J((e=>[e[1]].concat(Pt(e[2],t))))(n))}function Mt(e){return v(e.map(Ot))}function Ot(e){switch(e.kind){case"number":return l(e.value);case"string":return d(e.value);case"null":return{kind:"bottom"};case"object":return d("{object}");case"array":return d("{array}")}}const qt={strategy:(e,t,n)=>r=>{if(H(n))return t;if("delta"===e&&H(t))return N;if(H(t))return n;if(V(t)&&V(n))return r(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,r,o,i)=>{const s=Re(A(i));if("append"===e&&"add"===t)return Ce(n,r,zt("append",o.plus));if("append"===e&&"mul"===t)return Ce(n,r,zt("append",o.times));if("append"===e&&"max"===t)return C(s)(n,r);if("join"===e&&"add"===t)return Ce(n,r,zt("join",C(i)));if("join"===e&&"mul"===t)return Ce(n,r,zt("join",C(i)));if("join"===e&&"max"===t)return C(s)(n,r);if("min"===t)return qt.operation(e,"max",n,r,o,function(e){return P(((t,n)=>He(e.compare(t,n))))}(i));if("delta"===e&&"max"===t)return q(s)(n,r)?n:r.map(u);if("delta"===e)return Ce(n,r,((e,t)=>q(A(i))(e,t)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,n,r)=>{if("delta"===e&&"top"===n.kind&&"top"===r.kind)return q(x)(n.error,r.error)?d(n.error):{kind:"bottom"};if("delta"===e&&"bottom"===r.kind)return n;if("delta"===e&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===r.kind)return d(C(x)(n.error,r.error));if("top"===n.kind)return n;if("top"===r.kind)return r;if("inner"===n.kind&&"inner"===r.kind)return t(n.a,r.a);if("bottom"===n.kind)return r;if("bottom"===r.kind)return n;throw new Error("Non exhaustive match in extend")}},Ct={plus:(e,t)=>e+t,times:(e,t)=>e*t};function It(e,t,n,r){if("unbounded"===e.kind&&"unbounded"===t.kind){const o=e.group,i=t.group;return Y(u)(J((e=>l(p(e))))(Ze(o,i,n,r)))}if("windowed"===e.kind&&"windowed"===t.kind){const o=e.key,i=e.group,s=t.key,a=t.group,c=C(F(r))(o,s);return Y(u)(J((e=>l(g(e,c))))(Ze(i,a,n,r)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const o=e.n,i=t.n;if(o===i){const i=e.limit,s=e.group,a=t.limit,c=t.group,d=C(F(r))(i,a);return Y(u)(J((e=>l(m(e,d,o))))(Ze(s,c,n,r)))}return d("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const o=e.n,i=t.n;if(o===i){const i=e.limit,s=e.group,a=t.limit,c=t.group,d=C(F(r))(i,a);return Y(u)(J((e=>l(h(e,d,o))))(Ze(s,c,n,r)))}return d("Non matching counts")}return d("Non matching group types")}function xt(e,t,n,r,o,i){const s=(e,t)=>({1:Ee(e)(t).concat(ke(Math.max(0,e-t.length),u)),2:Pe(e)(t)}),a=(t,n,r)=>{if(0===t.length)return qt.operation(e,"max",n,r,o,i);if(t.length>0){const[c,...u]=t,l=s(c[2],n),d=l[1],p=l[2],g=s(c[2],r),m=g[1],h=g[2];return qt.operation(e,c[1],d,m,o,i).concat(a(u,p,h))}throw new Error("Non exhaustive match in recurse")};return Oe((c=e=>"bottom"===e.kind,function(e){return e.slice(Se(e,c))})(Oe(a(t,n,r))));var c}function Tt(e,t,n){return Y(r)(At(e,N)(t,n))}function At(e,t){const n=t=>(n,r)=>qt.strategy(e,n,r)(At(e,t)),r=(r,o)=>{if($(ge(E({1:I,2:he}))).equals(r.commands,o.commands)){const i=((t,r,o)=>{if("stringGroup"===r.kind&&"stringGroup"===o.kind){const e=It(r.group,o.group,n(t),x);return T(e,(e=>_(Lt(e,x))))}if("numberGroup"===r.kind&&"numberGroup"===o.kind){const e=It(r.group,o.group,n(t),fe);return T(e,(e=>f(Lt(e,fe))))}if("tuple"===r.kind&&"tuple"===o.kind){const n=V(t)?t.value:[];return l(v(xt(e,n,r.tuple,o.tuple,Ct,fe)))}throw new Error(`Non matching payload. Got ${r.kind} and ${o.kind}`)})(H(r.commands)?t:r.commands,r.payload,o.payload);return T(i,(e=>b(r.commands,e)))}throw new Error(`Non matching primitive strings. Got ${dt(r)} and ${dt(o)}`)};return(t,n)=>pt(y(qt.extend(e,r,bt(t).state,bt(n).state)))}function jt(e,t,n){const r=J((t=>tt(e,(([e,r])=>{return(o=n,function(e,t){return-1!==o.compare(e,t)})(e,t);var o}))))(t);return Y((()=>e))(r)}function Lt(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return H(e.key)?e:g(jt(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,r=e.n,o=e.group,i=(e,t)=>t<=1?N:G(t-1),s=Xe(r,o,i,t),a=C(F(t))(n,s);return m(jt(o,a,t),a,r)}case"uniqueLimit":{const n=e.limit,r=e.n,o=e.group,i=(e,t)=>{if("object"===e.kind){const n=[...e.value.keys(),...t.keys()],o=new Set(n);return o.size>=r?N:G(o)}return N},s=Xe(new Set,o,i,t),a=C(F(t))(n,s);return h(jt(o,a,t),a,r)}}}function zt(e,t){return(n,r)=>qt.extend(e,((e,n)=>l(t(e,n))),n,r)}var Bt=n(7183),Rt=n(3735),Ut=n(6567),Nt=n(477),Gt=n.n(Nt);function Wt(){return Gt()('/*! permutive-javascript-sdk v19.24.1 (web) (built 2022-08-18T14:36:11.675Z) */(()=>{"use strict";function e(e,t,n,r,o,a,i,c,s){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return o(r(n(t(e))));case 6:return a(o(r(n(t(e)))));case 7:return i(a(o(r(n(t(e))))));case 8:return c(i(a(o(r(n(t(e)))))));case 9:return s(c(i(a(o(r(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}const t=()=>({kind:"null",value:null}),n=e=>({kind:"string",value:e}),r=e=>({kind:"number",value:e}),o=e=>({kind:"array",value:e}),a=e=>({kind:"object",value:e}),i=e=>e,c=()=>({kind:"bottom"}),s=e=>({kind:"inner",a:e}),u=e=>({kind:"top",error:e}),l=e=>({kind:"unbounded",group:e}),d=(e,t)=>({kind:"windowed",key:t,group:e}),p=(e,t,n)=>({kind:"countLimit",n,limit:t,group:e}),m=(e,t,n)=>({kind:"uniqueLimit",n,limit:t,group:e}),g=e=>({kind:"numberGroup",group:e}),f=e=>({kind:"stringGroup",group:e}),h=e=>({kind:"tuple",tuple:e}),v=e=>({state:e}),b=(e,t)=>({commands:e,payload:t});function y(e){return e}function w(e,t,n,r,o,a,i,c,s){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return o(r(n(t(e))));case 6:return a(o(r(n(t(e)))));case 7:return i(a(o(r(n(t(e))))));case 8:return c(i(a(o(r(n(t(e)))))));case 9:return s(c(i(a(o(r(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var k=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},q=function(e){return k((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},z=function(e){return function(t,n){return t===n||0===e(t,n)}},S=function(e){return{equals:z(e),compare:function(t,n){return t===n?0:e(t,n)}}},D=function(e){return function(t){return S((function(n,r){return t.compare(e(n),e(r))}))}},x=function(e){return function(t,n){return-1===e.compare(t,n)}},j=function(e){return function(t,n){return 1===e.compare(t,n)}},A=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}};var _={equals:function(e,t){return e===t}},C={equals:_.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};const O=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return s(t(e.a));case"top":return u(e.error)}},M=e=>S(((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return C.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var L=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},P=function(e){return"Some"===e._tag},B={_tag:"None"},T=function(e){return{_tag:"Some",value:e}},E=function(e){return"Left"===e._tag},I=(Object.prototype.hasOwnProperty,function(e){return L([e[0]],e.slice(1))});var N=B,J=T;function G(e){return function(t){return e(t)?J(t):N}}var F=function(e){return"Left"===e._tag?N:J(e.right)},R=function(e){return{equals:function(t,n){return t===n||(Z(t)?Z(n):!Z(n)&&e.equals(t.value,n.value))}}},U=function(e){return{equals:R(e).equals,compare:function(t,n){return t===n?0:V(t)?V(n)?e.compare(t.value,n.value):1:-1}}},W=function(e){return function(t){return Z(t)?N:J(e(t.value))}},H=F,V=P,Z=function(e){return"None"===e._tag},Q=function(e){return function(t){return Z(t)?e():t.value}};var K;K=void 0;var X=function(e){return e[0]},$=X;var Y=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},ee=function(e){return e.length>0},te=function(e,t){return e<0||e>=t.length},ne=function(e){return function(t){return Y([e],t)}},re=ne,oe=function(e){return function(t){return Y(Y([],t),[e])}},ae=oe,ie=I,ce=function(e){return ee(e)?T(e):B},se=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],o=1;o<n;o++)r.push(e(o));return r}};var ue=ie;var le=function(e){return function(t){var n=Math.max(1,e);return n>=t.length?[ue(t),[]]:[w(t.slice(1,n),re(pe(t))),t.slice(n)]}},de=function(e){return k((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},pe=$;var me={equals:function(e,t){return e===t}},ge={equals:me.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};var fe=function(e,t){return function(n){for(var r=n.length,o=e,a=0;a<r;a++)o=t(a,o,n[a]);return o}};var he=function(e){return 0===e.length},ve=ee,be=re,ye=ae,we=function(e,t){return e<=0?[]:se(t)(e)};var ke=te,qe=function(e){return function(t){return ke(e,t)?De(t):t.slice(0,e)}};var ze=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};var Se=function(e){return function(t){return e<=0||he(t)?De(t):e>=t.length?[]:t.slice(e,t.length)}};var De=function(e){return e.slice()},xe=function(e){return he(e)?[]:e.slice().reverse()},je=function(e){return function(t){return t.length<=1?De(t):t.slice().sort(e.compare)}},Ae=function(e,t,n){for(var r=[],o=Math.min(e.length,t.length),a=0;a<o;a++)r[a]=n(e[a],t[a]);return r};var _e=function(e){return function(t){return e>=1&&ve(t)?le(e)(t):he(t)?[De(t),[]]:[[],De(t)]}};var Ce=function(e){return function(t){return w(t,function(e){return function(t){for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},Oe=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var o=e(r,t[r]);P(o)&&n.push(o.value)}return n}},Me=function(e){return Oe((function(t,n){return e(n)}))},Le=Me(y),Pe=fe,Be=function(e){var t=Te(e);return function(e){return t((function(t,n){return e(n)}))}},Te=function(e){return function(t){return Pe(e.of([]),(function(n,r,o){return e.ap(e.map(r,(function(e){return function(t){return w(e,ye(t))}})),t(n,o))}))}},Ee=function(e){return S((function(t,n){for(var r=t.length,o=n.length,a=Math.min(r,o),i=0;i<a;i++){var c=e.compare(t[i],n[i]);if(0!==c)return c}return ge.compare(r,o)}))},Ie=function(e){return{_tag:"Left",left:e}},Ne=function(e){return{_tag:"Right",right:e}},Je=function(e,t){return w(e,Re(t))},Ge=function(e,t){return w(e,We(t))},Fe="Either",Re=function(e){return function(t){return Ve(t)?t:Ne(e(t.right))}},Ue=Ne,We=function(e){return function(t){return Ve(t)?t:Ve(e)?e:Ne(t.right(e.right))}},He={URI:Fe,map:Je,ap:Ge,of:Ue},Ve=E;var Ze=function(e){return-1===e?1:1===e?-1:0};function Qe(e,t){return Le(e.map(t))}function Ke(e,t,n,r){const o=(e,t)=>{if(0===e.length)return Le(t.map((e=>J({1:e[1],2:n(N,J(e[2]))}))));if(0===t.length)return Le(e.map((e=>J({1:e[1],2:n(J(e[2]),N)}))));if(e.length>0&&t.length>0&&x(r)(e[0][1],t[0][1])){const[r,...a]=e,i=r[1],c=r[2];return be({1:i,2:n(J(c),N)})(o(a,t))}if(e.length>0&&t.length>0&&j(r)(e[0][1],t[0][1])){const[r,...a]=t,i=r[1],c=r[2];return be({1:i,2:n(N,J(c))})(o(e,a))}if(e.length>0&&t.length>0){const[r,...a]=e,[i,...c]=t,s=r[1],u=r[2],l=i[2];return be({1:s,2:n(J(u),J(l))})(o(a,c))}throw new Error("Non exhaustive match in mapOption2")},a=D((e=>e[1]))(r),i=(e=>{const t=Qe(e,(e=>V(e[2])?J({1:e[1],2:e[2].value}):N));return 0===t.length?N:J(t)})(o(je(a)([...e].map((e=>({1:e[0],2:e[1]})))),je(a)([...t].map((e=>({1:e[0],2:e[1]}))))));return W((e=>new Map(e.map((e=>[e[1],e[2]])))))(i)}function Xe(e,t,n,r){const o=D((e=>e[0]))(r),a=je(o)([...t]).reduceRight(((e,t)=>{if(Ve(e)){const r=n(t[1],e.left);return V(r)?Ie(r.value):Ne(t[0])}return e}),Ie(e));return H(a)}function $e(e,t){return new Map([...e].map(t))}function Ye(e,t){return new Map([...e].filter(t))}function et(e){return JSON.stringify(tt(e))}function tt(e){switch(e.kind){case"null":return ot.encode(e);case"string":return at.encode(e);case"number":return it.encode(e);case"array":return ct.encode(e);case"object":return st.encode(e)}}function nt(e){return null===e?ot.decode(e):"number"==typeof e?it.decode(e):"string"==typeof e?at.decode(e):Array.isArray(e)?ct.decode(e):st.decode(e)}const rt=(e,t)=>Ie(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),ot={encode:e=>null,decode:e=>null===e?Ne({kind:"null",value:null}):rt(e,"SimpleNull")},at={encode:e=>e.value,decode:e=>"string"==typeof e?Ne(n(e)):rt(e,"SimpleString")},it={encode:e=>e.value,decode:e=>"number"==typeof e?Ne(r(e)):rt(e,"SimpleNumber")},ct={encode:e=>e.value.map(tt),decode:e=>{if(Array.isArray(e)){const t=Be(He)(nt)(e);return Re(o)(t)}return rt(e,"SimpleArray")}},st={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:tt(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=Be(He)((([e,t])=>w(nt(t),Re((t=>function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}(e,t))))))(Object.entries(e));return Re((e=>a(new Map([...e]))))(t)}return rt(e,"SimpleObject")}};function ut(e){return w(e,dt,W(et),Q((()=>"<encode error>")))}function lt(e){return W(vt)(function(e){switch(e.state.kind){case"top":return J(n(e.state.error));case"bottom":return N;case"inner":return dt(e.state.a)}}(e))}function dt(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return pt(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?J(o(function(e,t){const n=W((e=>be(e)(t)))(e);return Q((()=>t))(n)}(W((e=>n(function(e){const t=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>1===e[2]?t(e[1]):t(e[1])+JSON.stringify(e[2]);return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return n(e.error);case"inner":return r(e.a)}},o=e=>Qe([mt,gt,e=>w(e,ht,a,J)],(t=>t(e))),i=e=>Qe([mt,ft,e=>w(e,ht,(e=>$e(e,(([e,t])=>[JSON.stringify(e),t]))),a,J)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return o(e.group);case"numberGroup":return i(e.group)}}(e.payload)))):N}function pt(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||V(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||V(e.limit)}}function mt(e){switch(e.kind){case"unbounded":return N;case"windowed":return J(n("w"));case"countLimit":return J(n(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return J(n(1===e.n?"u":`u${e.n}`))}}function gt(e){switch(e.kind){case"unbounded":return N;case"windowed":return J(n(V(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return J(n(V(e.limit)?e.limit.value:""))}}function ft(e){switch(e.kind){case"unbounded":return N;case"windowed":return V(e.key)?J(r(e.key.value)):J({kind:"null",value:null});case"countLimit":case"uniqueLimit":return V(e.limit)?J(r(e.limit.value)):J({kind:"null",value:null})}}function ht(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function vt(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?vt(e.value[0]):o(e.value.map(vt));case"object":return w(Ye(e.value,(([e,t])=>"null"!==t.kind)),(e=>$e(e,(e=>[e[0],vt(e[1])]))),a);default:return e}}function bt(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return N;const[t,n,r,o]=e;if("string"===t.kind&&"string"===n.kind&&"object"===o.kind){const e=G((e=>yt(e[1].value)&&wt(e[2].value)))({1:t,2:n});return W((e=>({prim:e[1].value,grp:e[2].value,cutoff:r,m:o.value})))(e)}return N})(e);if(V(t)){const{prim:e,grp:n,cutoff:r,m:o}=t.value,a=kt(r,o,qt(n));return"string"==typeof a?u(a):s(b(zt(e),a))}const n=(e=>{if(3!==e.length)return N;const[t,n,r]=e;if("string"===t.kind&&"object"===r.kind){const e=G((e=>wt(e.value)))(t);return W((e=>({grp:e.value,cutoff:n,m:r.value})))(e)}return N})(e);if(V(n)){const{grp:e,cutoff:t,m:r}=n.value,o=kt(t,r,qt(e));return"string"==typeof o?u(o):s(b(N,o))}const r=(e=>{if(2!==e.length)return N;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=G((e=>yt(e.value)))(t);return W((e=>({prim:e.value,m:n.value})))(e)}return N})(e);if(V(r)){const{prim:e,m:t}=r.value;return s(b(zt(e),f(l(t))))}const o=(e=>{if(1!==e.length)return N;const[t]=e;return"object"===t.kind?J({m:t.value}):N})(e);if(V(o)){const{m:e}=o.value;return s(b(N,f(l(e))))}const a=(e=>{if(e.length<1)return N;const[t,...n]=e;if("string"===t.kind){const e=G((e=>yt(e.value)))(t);return W((e=>({prim:e.value,rest:n})))(e)}return N})(e);if(V(a)){const{prim:e,rest:t}=a.value;return s(b(zt(e),Dt(t)))}return s(b(N,Dt(e)))},n=e=>"array"===e.kind?Ce(n)(e.value):[e];return"null"===e.kind?v({kind:"bottom"}):v(t(n(e)))}function yt(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...n]=t;return-1!=="pmvn".indexOf(e)&&n.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}function wt(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function kt(e,t,n){switch(e.kind){case"string":return f(n({1:J(e.value),2:t}));case"number":case"null":return g(n({1:"null"===e.kind?N:J(e.value),2:Ye($e(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function qt(e){const t=e=>t=>m(t[2],t[1],e),n=e=>t=>p(t[2],t[1],e),r=e.split("");switch(!0){case"w"===r[0]&&void 0===r[1]:return e=>d(e[2],e[1]);case"u"===r[0]&&void 0===r[1]:return t(1);case"u"===r[0]&&void 0!==r[1]:return t(parseInt(r.slice(1).join("")));case"x"===r[0]&&void 0===r[1]:return n(1);case"x"===r[0]&&void 0!==r[1]:return n(parseInt(r.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function zt(e){return W(i)(ce(St(e,(e=>{const t=e.split("");if(0===t.length)return N;const[n,...r]=t,o=(e=>{switch(e){case"p":return J("add");case"m":return J("mul");case"v":return J("max");case"n":return J("min");default:return N}})(n);return W((e=>{const{init:t,rest:n}=(o=e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t},function(e){var t=_e(ze(e,o))(e);return{init:t[0],rest:t[1]}})(r);var o;return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(o)}))))}function St(e,t){const n=t(e);return Q((()=>[]))(W((e=>[e[1]].concat(St(e[2],t))))(n))}function Dt(e){return h(e.map(xt))}function xt(e){switch(e.kind){case"number":return s(e.value);case"string":return u(e.value);case"null":return{kind:"bottom"};case"object":return u("{object}");case"array":return u("{array}")}}const jt={strategy:(e,t,n)=>r=>{if(Z(n))return t;if("delta"===e&&Z(t))return N;if(Z(t))return n;if(V(t)&&V(n))return r(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,r,o,a)=>{const i=Ee(M(a));if("append"===e&&"add"===t)return Ae(n,r,Bt("append",o.plus));if("append"===e&&"mul"===t)return Ae(n,r,Bt("append",o.times));if("append"===e&&"max"===t)return A(i)(n,r);if("join"===e&&"add"===t)return Ae(n,r,Bt("join",A(a)));if("join"===e&&"mul"===t)return Ae(n,r,Bt("join",A(a)));if("join"===e&&"max"===t)return A(i)(n,r);if("min"===t)return jt.operation(e,"max",n,r,o,function(e){return S(((t,n)=>Ze(e.compare(t,n))))}(a));if("delta"===e&&"max"===t)return j(i)(n,r)?n:r.map(c);if("delta"===e)return Ae(n,r,((e,t)=>j(M(a))(e,t)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,n,r)=>{if("delta"===e&&"top"===n.kind&&"top"===r.kind)return j(C)(n.error,r.error)?u(n.error):{kind:"bottom"};if("delta"===e&&"bottom"===r.kind)return n;if("delta"===e&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===r.kind)return u(A(C)(n.error,r.error));if("top"===n.kind)return n;if("top"===r.kind)return r;if("inner"===n.kind&&"inner"===r.kind)return t(n.a,r.a);if("bottom"===n.kind)return r;if("bottom"===r.kind)return n;throw new Error("Non exhaustive match in extend")}},At={plus:(e,t)=>e+t,times:(e,t)=>e*t};function _t(e,t,n,r){if("unbounded"===e.kind&&"unbounded"===t.kind){const o=e.group,a=t.group;return Q(c)(W((e=>s(l(e))))(Ke(o,a,n,r)))}if("windowed"===e.kind&&"windowed"===t.kind){const o=e.key,a=e.group,i=t.key,u=t.group,l=A(U(r))(o,i);return Q(c)(W((e=>s(d(e,l))))(Ke(a,u,n,r)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const o=e.n,a=t.n;if(o===a){const a=e.limit,i=e.group,u=t.limit,l=t.group,d=A(U(r))(a,u);return Q(c)(W((e=>s(p(e,d,o))))(Ke(i,l,n,r)))}return u("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const o=e.n,a=t.n;if(o===a){const a=e.limit,i=e.group,u=t.limit,l=t.group,d=A(U(r))(a,u);return Q(c)(W((e=>s(m(e,d,o))))(Ke(i,l,n,r)))}return u("Non matching counts")}return u("Non matching group types")}function Ct(e,t,n,r,o,a){const i=(e,t)=>({1:qe(e)(t).concat(we(Math.max(0,e-t.length),c)),2:Se(e)(t)}),s=(t,n,r)=>{if(0===t.length)return jt.operation(e,"max",n,r,o,a);if(t.length>0){const[c,...u]=t,l=i(c[2],n),d=l[1],p=l[2],m=i(c[2],r),g=m[1],f=m[2];return jt.operation(e,c[1],d,g,o,a).concat(s(u,p,f))}throw new Error("Non exhaustive match in recurse")};return xe((u=e=>"bottom"===e.kind,function(e){return e.slice(ze(e,u))})(xe(s(t,n,r))));var u}function Ot(e,n,r){return Q(t)(Mt(e,N)(n,r))}function Mt(e,t){const n=t=>(n,r)=>jt.strategy(e,n,r)(Mt(e,t)),r=(r,o)=>{if(R(de(q({1:_,2:me}))).equals(r.commands,o.commands)){const a=((t,r,o)=>{if("stringGroup"===r.kind&&"stringGroup"===o.kind){const e=_t(r.group,o.group,n(t),C);return O(e,(e=>f(Pt(e,C))))}if("numberGroup"===r.kind&&"numberGroup"===o.kind){const e=_t(r.group,o.group,n(t),ge);return O(e,(e=>g(Pt(e,ge))))}if("tuple"===r.kind&&"tuple"===o.kind){const n=V(t)?t.value:[];return s(h(Ct(e,n,r.tuple,o.tuple,At,ge)))}throw new Error(`Non matching payload. Got ${r.kind} and ${o.kind}`)})(Z(r.commands)?t:r.commands,r.payload,o.payload);return O(a,(e=>b(r.commands,e)))}throw new Error(`Non matching primitive strings. Got ${ut(r)} and ${ut(o)}`)};return(t,n)=>lt(v(jt.extend(e,r,bt(t).state,bt(n).state)))}function Lt(e,t,n){const r=W((t=>Ye(e,(([e,r])=>{return(o=n,function(e,t){return-1!==o.compare(e,t)})(e,t);var o}))))(t);return Q((()=>e))(r)}function Pt(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return Z(e.key)?e:d(Lt(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,r=e.n,o=e.group,a=(e,t)=>t<=1?N:J(t-1),i=Xe(r,o,a,t),c=A(U(t))(n,i);return p(Lt(o,c,t),c,r)}case"uniqueLimit":{const n=e.limit,r=e.n,o=e.group,a=(e,t)=>{if("object"===e.kind){const n=[...e.value.keys(),...t.keys()],o=new Set(n);return o.size>=r?N:J(o)}return N},i=Xe(new Set,o,a,t),c=A(U(t))(n,i);return m(Lt(o,c,t),c,r)}}}function Bt(e,t){return(n,r)=>jt.extend(e,((e,n)=>s(t(e,n))),n,r)}function Tt(e,t){return Ot("append",e,t)}var Et=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},It=function(e){return"Some"===e._tag},Nt={_tag:"None"},Jt=function(e){return{_tag:"Some",value:e}},Gt=function(e){return"Left"===e._tag},Ft=Object.prototype.hasOwnProperty,Rt=function(e){return Et([e[0]],e.slice(1))};var Ut=function(e){return e[0]},Wt=Ut;var Ht=function(e){return e.length>0},Vt=function(t){var n=function(e){return function(t){if(1===t.length)return Kt(t);for(var n=[Xt(t)],r=function(t){n.every((function(n){return!e.equals(n,t)}))&&n.push(t)},o=0,a=$t(t);o<a.length;o++)r(a[o]);return n}}(t);return function(t){return function(r){return n(e(r,Qt(t)))}}},Zt=Rt;function Qt(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var Kt=Zt;var Xt=Wt,$t=function(e){return e.slice(1)};function Yt(e){return function(t,n){if(void 0===n){var r=Yt(e);return function(e){return r(t,e)}}for(var o,a=0;a<n.length;a++)if(o=n[a],e.equals(o,t))return!0;return!1}}var en=Ht;var tn=function(e){return e.slice()};var nn=Yt;function rn(e){var t=Vt(e);return function(n,r){if(void 0===r){var o=rn(e);return function(e){return o(e,n)}}return en(n)&&en(r)?t(r)(n):en(n)?tn(n):tn(r)}}function on(e){var t=nn(e);return function(n,r){if(void 0===r){var o=on(e);return function(e){return o(e,n)}}return n.filter((function(e){return!t(e,r)}))}}var an=Gt,cn=function(e){return function(t){return an(t)?e(t.left):t.right}};var sn=function(e){return function(t){return!e(t)}},un=Nt,ln=Jt;var dn=It;var pn={equals:function(e,t){return e===t}},mn=function(e){for(var t in e)if(Ft.call(e,t))return!1;return!0};function gn(e){return function(t){var n={},r=!1;for(var o in t)if(Ft.call(t,o)){var a=t[o];e(o,a)?n[o]=a:r=!0}return r?n:t}}var fn=function(e){return gn((function(t,n){return e(n)}))};var hn=mn;var vn=fn;vn(sn(hn));function bn(...e){return e.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}sn((function(e){return 0===e.length}));function yn(e,t){const n=Object.keys(e),r=n.length,o={};for(let a=0;a<r;a++){const r=n[a],i=t(r,e[r]);dn(i)&&(o[r]=i.value)}return o}function wn(e){var t;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}let kn=!1,qn=[],zn=!1;const Sn={};let Dn={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),get1PSegments:()=>({}),get3PSegments:()=>({}),getSegmentsArray:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};const xn=e=>{const t=Dn.get1PSegments(),n={"1p":Object.assign(Object.assign({},t["1p"]),e["1p"])};Dn.get1PSegments=()=>n},jn=e=>{const t=Object.assign({},e);delete t["1p"],Dn.get3PSegments=()=>t},An=()=>{const e=Pn.concat(Dn.get1PSegments(),Dn.get3PSegments()),t=Ln(e);Dn.getSegments=()=>e,Dn.getSegmentsArray=()=>t};function _n(e,t,n,r,o,a,i){kn=!1,qn=[],zn=!1;const c=Ln(r.segments);Dn={getCurrentTime:()=>new Date,getCurrentSession:()=>r.sessionId,getCurrentView:()=>r.viewId,get1PSegments:()=>r.segments,get3PSegments:()=>({}),getSegments:()=>Pn.concat(Dn.get1PSegments(),Dn.get3PSegments()),getSegmentsArray:()=>c,getLookalikeModels:()=>r.lookalikeModels,setSegmentActivation:(e,t)=>{}};const s=yn(t,((t,n)=>{var r;return(null===(r=e[t])||void 0===r?void 0:r.checksum)===n?un:ln(((e,t)=>{const n=a[e].interpret(null,Dn);return Object.assign({checksum:t},!1===n.result?{}:{result:n})})(t,n))}));if(0===o.length)return{diff:Object.assign(Object.assign({},e),s),errors:[]};if(0===Object.keys(s).length)return{diff:e,errors:[]};{const r=Cn(s,t,n,o,"bootstrap",a,i);return{diff:Object.assign(Object.assign({},e),r.diff),errors:r.errors}}}function Cn(e,t,n,r,o,a,i){let c={diff:{},errors:[]};const s=r.length,u=()=>r.filter((e=>{return t=i["!UpdateLookalikeModels"]||[],wn(n=e)&&t.includes(n.properties.segment_number.toString());var t,n})).length===r.length?"lookalikeTransition":"transition",l=(e,t,n)=>"transition"===e?n===t-1?u():"event":e;for(let u=0;u<s;u++){const d=r[u],p=l(o,s,u),m=On(Object.assign(Object.assign({},e),c.diff),t,n,d,p,a,i);c={diff:Object.assign(Object.assign({},c.diff),m.diff),errors:c.errors.concat(m.errors)}}return c}function On(n,r,o,a,i,c,s){"bootstrap"!==i&&(Dn.setSegmentActivation=Mn(n));const u=t,l=(t,n)=>{const r=c[t],i=r.lift(a,Dn),s=e(nt(n.state||null),cn(u)),l=e(nt(i),cn(u),(e=>Tt(s,e))),d=o[t],p=d?e(nt(d),cn(u),(e=>Tt(l,e))):l,m=tt(l),g=r.interpret(tt(p),Dn),f=n.activations||{};return Object.assign(Object.assign(Object.assign({checksum:n.checksum},null===m?{}:{state:m}),!1===g.result?{}:{result:g}),0===Object.keys(f).length?{}:{activations:f})},d=[],p={},m=function(e,t,n,r,o){switch(e){case"event":const e=(null==o?void 0:o[r.name])||[];if(kn)return e;{qn.push(r);const t=[...o["!UpdateSecondPartyData"]||[],...o["!UpdateThirdPartyData"]||[]];return on(pn)(e,t)}case"lookalikeTransition":return(null==o?void 0:o[r.name])||[];case"transition":const a=(null==o?void 0:o[r.name])||[];if(zn){const e=o["!UpdateLookalikeModels"]||[];return a.concat(e)}return a;case"bootstrap":const i=((null==o?void 0:o[r.name])||[]).filter((e=>void 0!==t[e]));return on(pn)(i,[...kn?[]:(o["!UpdateSecondPartyData"]||[]).concat(o["!UpdateThirdPartyData"]||[]),...zn?[]:o["!UpdateLookalikeModels"]||[]]);case"updateExternalState":return Object.keys(n);case"updateEnvironment":return[...o["!UpdateLookalikeModels"]||[],...o["!UpdateSecondPartyData"]||[],...o["!UpdateThirdPartyData"]||[]];case"updateLAL":return o["!UpdateLookalikeModels"]||[];case"updateTPD":return[...o["!UpdateSecondPartyData"]||[],...o["!UpdateThirdPartyData"]||[]]}}(i,n,o,a,s),g=m.length;!function(e){wn(e)&&(xn({"1p":{[e.properties.segment_number]:"SegmentEntry"===e.name}}),An())}(a);for(let e=0;e<g;e++){const t=m[e],o=n[t]||{checksum:r[t]};let a=o;try{a=l(t,o)}catch(e){d.push(`Failed to interpret query ${t}. Got ${e}`)}p[t]=a}return{diff:p,errors:d}}function Mn(e){return(t,n,r)=>{if("activations"in e[r]){const o=e[r].activations,a=t in o;o[t]=a?rn(pn)(o[t],[n]):[n]}else e[r].activations={[t]:[n]}}}function Ln(e){return Object.keys(e).reduce(((t,n)=>{const r=Object.keys(e[n]),o=[];return r.forEach((t=>{!0===e[n][t]&&o.push(t)})),t[n]=o,t}),{})}const Pn={empty:{},concat:(e,t)=>{const n=Object.assign({},e);for(const[e,r]of Object.entries(t))n[e]?n[e]=bn(n[e],r):n[e]=r;return n}};const[Bn,Tn]=function(){var e=this&&this.__assign||function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)},t=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},o=function(){function o(e){return"number"==typeof e?a[e]:e}function l(e){return"number"==typeof e?i[e]:e}function d(e){return"number"==typeof e?c[e]:e}function p(e){switch(e.length){case 0:return null;case 1:return e[0];default:return e}}function m(e,t,n){void 0===n&&(n=h);var r=d(t).reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e);return null===r?null:n(r)}function g(e,t){var n=d(t).slice();return n.unshift(e),n}function f(e,t,n){return void 0===n&&(n=h),m(e,g("properties",t),n)}var h=function(e){return e},v=function(e){return!0};function b(e,t){return function(n){for(var r=0;r<e.length;r++){if((e[r](n)||!1)===t)return t}return!t}}var y=function(e){return function(t){return!e(t)}},w=function(e,t){return function(n){return n>=e&&n<=t}},k=function(e){return new Date(e).getTime()},q=function(e){return m(e,["time"],k)},z=function(e,t){return m(t,e,k)},S=function(e,t,n,r,o,a){return function(i){var c=m(i,e,(function(e){return e.filter(r).map((function(e){return m(e,t)})).reduce(o,a)}));return n(null===c?a:c)}};function D(e,n,r,o){var a,i;try{for(var c=t(e),s=c.next();!s.done;s=c.next()){var u=s.value;if(r(u)&&n(u)===o)return o}}catch(e){a={error:e}}finally{try{s&&!s.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}return!o}var x=function(e){return function(t){return("string"==typeof e||"number"==typeof e)&&"string"==typeof t&&t.toLowerCase().indexOf(l(e).toLowerCase())>-1}},j=function(e){return function(t){return null!=t&&Array.isArray(t)&&t.indexOf(e)>=0}};function A(e,t,n,r,o){var a=m(e.getSegments(),[t,n])||!1;return o&&(r||a)&&e.setSegmentActivation(t,n,o),a}function _(e,t,n){return m(e.getSegments(),[t,n])||!1}function C(e,t,r){return void 0===r&&(r=18e5),function(o){return{a:{m:function(e,t){return[t[0],o.a.m(null!=e[0]&&e[0][0]===t[0][0]?e[1]:o.a.z,t[1])]},z:[[],o.a.z]},p:function(n,r){return[[e(n)],m(r,t)===e(n)?o.p(n,r):o.a.z]},r:function(t,n){return o.r(t,n[0]!=[]&&n[0][0]===e(t)?n[1]:o.a.z)},d:o.d.sq||{l:function(a,i){var c=m(a,t),s=e(i);if(c!==s)return null;var u=o.d.l(a,i);if(!(Array.isArray(u)&&u.length>1))return null;var l=n(u),d=l[0],p=l.slice(1),g=+(q(a)||i.getCurrentTime()),f=Math.floor(g/r),h={};return h[f]={},h[f][s]=1===p.length?p[0]:p,[d,"u",null,h]},i:function(t,n){if(!Array.isArray(t)||"object"!=typeof t[3])return[[],o.a.z];var r=e(n),a=t[3];return[[r],Object.keys(a).map((function(e){return a[e][r]})).filter((function(e){return e})).map((function(e){return o.d.i([t[0]].concat(e))})).reduce(o.a.m,o.a.z)]}}}}}var O=C((function(e){return e.getCurrentSession()}),["session_id"],18e5),M=C((function(e){return e.getCurrentView()}),["view_id"],3e5);function L(e,t,a,i){return void 0===i&&(i=1),{a:{m:function(e,t){return e.concat(t).slice(-a)},z:[]},p:function(n,r){return m(r,["name"])===o(t)?[e.p(n,r)]:[]},r:function(t,n){return e.r(t,n.reduce((function(t,n){return e.a.m(t,n)}),e.a.z))},d:e.d.ftn||{l:function(t,n){var r,o=e.d.l(t,n),c=m(t,["time"],k)*i;return o&&[o[0],"x"+a,null,(r={},r[c]=2==o.length?o[1]:o.slice(1),r)]},i:function(t,o){return t?Object.keys(t[3]||{}).sort().reverse().map((function(e){return Array.isArray(e)?r([t[0]],n(t[3][e]),!1):[t[0],t[3][e]]})).map((function(t){return e.d.i(t,o)})):[]}}}}var P=function(e,t){return null===e?null==t?null:{b:t}:null==t?{a:e}:{a:e,b:t}},B=function(e,t){return e&&t?e(t):null},T=function(e,t,n){if(n&&n.result&&Array.isArray(n.result)){var r=B(e.d&&e.d.m,{result:n.result[0]}),o=B(t.d&&t.d.m,{result:n.result[1]});return P(r,o)}return null};function E(e,t){var n=s[e];if(!t||!n)return!1;if(!n.length)return!0;for(var r=0,o=!1,a=function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);if(r>=55296&&r<=56319){var o=e.charCodeAt(n+1);if(o>=56320&&o<=57343){t.push(e.slice(n,n+2)),++n;continue}}t.push(e.charAt(n))}return t}(t.toLowerCase()),i=0;i<a.length;i++){for(var c=a[i];r>0&&!n[r][c];)r=n[r].su?n[r].su:0;if(n[r][c]&&(o=!!n[r=n[r][c]].te))break}return o}return{q:function(e){return{lift:function(t,n){return e.d.l(t,n)},interpret:function(t,n){return function(t,n){return{result:e.r(t,n)}}(n,e.d.i(t,n))},migrate:function(t){return t&&e.d.m?e.d.m(t):null},m:e.a.m,z:e.a.z,p:e.p,r:e.r,i:e.d.i}},a:function(e){return b(e,!1)},acq:function(e,t){return{p:function(n,r){return[e.p(n,r),t.p(n,r)]},r:function(n,r){return e.r(n,r[0])&&t.r(n,r[1])},a:{z:[e.a.z,t.a.z],m:function(n,r){return[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]}},d:{l:function(n,r){return P(e.d.l(n,r),t.d.l(n,r))},i:function(n,r){return n?[e.d.i(n.a||null,r),t.d.i(n.b||null,r)]:[e.a.z,t.a.z]},m:function(n){return T(e,t,n)}}}},acs:E,acs_:function(e,t){return function(n){return E(t,m(n,e))}},af_i:function(e,t,n){return void 0===n&&(n=v),function(r){return m(r,e,(function(e){return D(e,t,n,!1)}))&&!0}},af_l:function(e,t,n){return void 0===n&&(n=v),function(r){var o=m(r,e,(function(e){return e.filter(n).length}));return t(null===o?0:o)}},af_m:function(e,t,n,r){return void 0===r&&(r=v),function(o){var a=m(o,e,(function(e){return e.filter(r)}));return null===a||0===a.length?n(0):n(a.map((function(e){return m(e,t)})).reduce((function(e,t){return e+t}),0)/a.length)}},af_n:function(e,t,n,r){return void 0===r&&(r=v),S(e,t,n,r,(function(e,t){return Math.min(e,t)}),Number.POSITIVE_INFINITY)},af_p:function(e,t,n,r){return void 0===r&&(r=v),S(e,t,n,r,(function(e,t){return e*t}),1)},af_s:function(e,t,n,r){return void 0===r&&(r=v),S(e,t,n,r,(function(e,t){return e+t}),0)},af_u:function(e,t,n){return void 0===n&&(n=v),function(r){return m(r,e,(function(e){return D(e,t,n,!0)}))||!1}},af_x:function(e,t,n,r){return void 0===r&&(r=v),S(e,t,n,r,(function(e,t){return Math.max(e,t)}),Number.NEGATIVE_INFINITY)},as:function(e,t,n){var r=g("properties",t);return function(t){for(var o=m(t,r),a=n.length,i=!0,c=0;c<a;c++){var s=n[c];if(!(i=e(s)(o)))break}return i}},c:j,c_:function(e,t){return function(n){return j(t)(m(n,e))}},cl_:function(e,t){return function(n){return j(l(t))(m(n,e))}},cx:function(e){return function(t){return j(l(e))(t)}},ctu:function(e,t,n,r){return{a:r?{m:function(e,t){return e.filter((function(e){return-1===t.indexOf(e)})).concat(t).slice(-r)},z:[]}:{m:function(e,t){return e.filter((function(e){return-1===t.indexOf(e)})).concat(t)},z:[]},p:function(r,a){return m(a,["name"])===o(e)&&t(a)?m(a,n):[]},r:function(e,t){return t},d:{l:function(){return null},i:function(){return[]}}}},ctv:function(t,n,r,a){function i(e,t){var n,r=function(e){return{k:e.k,c:1+e.c}},o={arr:[],add:{k:t,c:1}};return t?(n=e.reduce((function(e,t){return e.add.k===t.k?{arr:e.arr,add:r(t)}:{arr:e.arr.concat(t),add:e.add}}),o)).arr.concat(n.add):e}return{a:a?{m:function(e,t){return i(e,t).slice(-a)},z:[]}:{m:function(e,t){return i(e,t)},z:[]},p:function(e,a){return m(a,["name"])===o(t)&&n(a)?m(a,r):null},r:function(t,n){return n.reduce((function(t,n){var r;return e(e({},t),((r={})[n.k]=n.c,r))}),{})},d:{l:function(e){return null},i:function(e){return[]}}}},ctw:function(e,t,n,r){return{a:r?{m:function(e,t){return e.concat(t).slice(-r)},z:[]}:{m:function(e,t){return e.concat(t)},z:[]},p:function(r,a){return m(a,["name"])===o(e)&&t(a)?m(a,n):[]},r:function(e,t){return t},d:{l:function(){return null},i:function(){return[]}}}},cw:function(e,t,n){return void 0===n&&(n=h),{a:{m:function(e,t){return e+t},z:0},p:function(n,r){return m(r,["name"])===o(e)&&t(r)?1:0},r:function(e,t){return n(t)},d:{l:function(n){return m(n,["name"])===o(e)&&t(n)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},e:function(e){return function(t){return t===e}},e_:function(e,t){return function(n){return m(n,e)===t}},fm:function(e,t){return{p:t.p,r:function(n,r){return e(t.r(n,r))},a:t.a,d:t.d}},ftn:function(e,t,n){return{a:{m:function(e,t){return e.concat(t.slice(0,n-e.length))},z:[]},p:function(n,r){return m(r,["name"])===o(t)?[e.p(n,r)]:[]},r:function(t,n){return e.r(t,n.reduce((function(t,n){return e.a.m(t,n)}),e.a.z))},d:L(e,t,n,-1).d}},fw:function(e,t,n,r){return void 0===r&&(r=h),{a:{m:function(e,t){return null===e?t:e},z:null},p:function(r,a){return m(a,["name"])===o(e)&&t(a)?m(a,n):null},r:function(e,t){return t},d:{l:function(n){return m(n,["name"])===o(e)&&t(n)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},g:function(e){return function(t){return t>e}},g_:function(e,t){return function(n){return m(n,e)>t}},gb:function(e,t,n){return{a:{m:function(n,r){var o=Object.keys(n).concat(Object.keys(r)).filter((function(e,t,n){return n.indexOf(e)===t})).sort((function(e,t){return Math.max(m(n,[t,1]),m(r,[t,1]))-Math.max(m(n,[e,1]),m(r,[e,1]))})).slice(0,t).reduce((function(t,o){var a=e.a.m(m(n,[o,0])||e.a.z,m(r,[o,0])||e.a.z);return t[o]=[a,Math.max(m(n,[o,1]),m(r,[o,1]))],t}),{});return o},z:{}},p:function(t,r){var o,a,i=m(r,g("properties",n)),c=e.p(t,r);return null==i||(null==(a=c)||"object"==typeof a&&0===Object.keys(a).length||a===e.a.z)?{}:((o={})[i]=[c,m(r,["time"],k)],o)},r:function(t,n){var r={};return Object.keys(n).forEach((function(o){return r[o]=e.r(t,n[o][0])})),r},d:{l:function(){return null},i:function(){return{}}}}},ge:function(e){return function(t){return t>=e}},ge_:function(e,t){return function(n){return m(n,e)>=t}},i_:h,ifp:function(e){return{a:{m:function(e,t){return t},z:null},p:function(e){return null},r:function(t,n){return function(t){return _(t,"1p",e)}(t)},d:{l:function(e,t){return null},i:function(e){return null}}}},isp:function(e,t,n,r){return{a:{m:function(e,t){return t},z:!1},p:function(n,r){return _(n,e,t)},r:function(o,a){return A(o,e,t,n,r)},d:{l:function(e,t){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},itp:function(e,t,n,r){return{a:{m:function(e,t){return t},z:!1},p:function(n,r){return _(n,e,t)},r:function(o,a){return A(o,e,t,n,r)},d:{l:function(e,t){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},k:m,l:function(e){return function(t){return t<e}},l_:function(e,t){return function(n){var r=m(n,e);return null!==r&&r<t}},le:function(e){return function(t){return t<=e}},le_:function(e,t){return function(n){var r=m(n,e);return null!==r&&r<=t}},lm:function(e,t){var n=function(t){return function(e,t,n){var r,o=e||{},a=t[n]||{},i=(a["1p"]||{}).const||0;return Object.keys(o).forEach((function(e){o[e].forEach((function(t){var n=(a[e]||{})[t]||0;i+=n}))})),r=i,1/(1+Math.pow(Math.E,-r))}(t.getSegmentsArray(),t.getLookalikeModels(),e)};return{a:{m:function(e,t){return t},z:null},p:function(e){return null},r:function(e,r){return t(n(e))},d:{l:function(e,t){return null},i:function(e){return null}}}},ltn:L,mnw:function(e,t,n,r){void 0===r&&(r=h);var a=Number.POSITIVE_INFINITY;return{a:{m:function(e,t){return e<t?e:t},z:a},p:function(r,i){return m(i,["name"])===o(e)&&t(i)?m(i,n):a},r:function(e,t){return r(t)},d:{l:function(r){return m(r,["name"])===o(e)&&t(r)?["n",m(r,n)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:a}}}},mxw:function(e,t,n,r){void 0===r&&(r=h);var a=Number.NEGATIVE_INFINITY;return{a:{m:function(e,t){return e>t?e:t},z:a},p:function(r,i){return m(i,["name"])===o(e)&&t(i)?m(i,n):a},r:function(e,t){return r(t)},d:{l:function(r){return m(r,["name"])===o(e)&&t(r)?["v",m(r,n)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:a}}}},n0:y(h),n:function(e){return function(t){return t!==e}},nt:y,n_:function(e,t){return function(n){return m(n,e)!==t}},o:function(e){return b(e,!0)},ocq:function(e,t){return{p:function(n,r){return[e.p(n,r),t.p(n,r)]},r:function(n,r){return e.r(n,r[0])||t.r(n,r[1])},a:{z:[e.a.z,t.a.z],m:function(n,r){return[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]}},d:{l:function(n,r){return P(e.d.l(n,r),t.d.l(n,r))},i:function(n,r){return n?[e.d.i(n.a||null,r),t.d.i(n.b||null,r)]:[e.a.z,t.a.z]},m:function(n){return T(e,t,n)}}}},oe:function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r},os:function(e,t,n){var r=g("properties",t);return function(t){for(var o=m(t,r),a=n.length,i=!1,c=0;c<a;c++){var s=n[c];if(i=e(s)(o))break}return i}},pacs:function(e,t){return function(n){return E(t,f(n,e))}},pb:function(e,t,n){return function(r){return w(t,n)(f(r,e))}},pc:function(e,t){return function(n){var r=f(n,e);return null!=r&&Array.isArray(r)&&r.indexOf(t)>=0}},pc_:function(e,t){return function(n){var r=f(n,e),o=l(t);return null!=r&&Array.isArray(r)&&r.indexOf(o)>=0}},pe:function(e,t){return function(n){return f(n,e)===t}},pg:function(e,t){return function(n){return f(n,e)>t}},pge:function(e,t){return function(n){return f(n,e)>=t}},pl:function(e,t){return function(n){var r=f(n,e);return null!==r&&r<t}},ple:function(e,t){return function(n){var r=f(n,e);return null!==r&&r<=t}},pn:function(e,t){return function(n){return f(n,e)!==t}},ps:function(e,t){return function(n){return x(t)(f(n,e))}},pw:function(e,t,n,r){return void 0===r&&(r=h),{a:{m:function(e,t){return e*t},z:1},p:function(r,a){return m(a,["name"])===o(e)&&t(a)?m(a,n):1},r:function(e,t){return r(t)},d:{l:function(r){return m(r,["name"])===o(e)&&t(r)?(a=m(r,n))>=1?["m2p",a]:a>0?["m2p",null,1/a]:0==a?["m2p",0]:a>-1?["m2p",null,1/a,1]:["m2p",a,null,1]:null;var a},i:function(e){return e?Array.isArray(e)?0===(t=e.slice(1))[0]?0:Math.pow(-1,t[2]||0)*(t[0]||1)/(t[1]||1):e:1;var t}}}},ref:function(e){return function(t){return u[e](t)}},s:x,s_:function(e,t){return function(n){return x(t)(m(n,e))}},scq:function(e,t,n){return void 0===n&&(n=h),{p:function(n,r){return[e.p(n,r),t.p(n,r)]},r:function(r,o){return n(e.r(r,o[0])+t.r(r,o[1]))},a:{z:[e.a.z,t.a.z],m:function(n,r){return[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]}},d:{l:function(n,r){return P(e.d.l(n,r),t.d.l(n,r))},i:function(n,r){return n?[e.d.i(n.a||null,r),t.d.i(n.b||null,r)]:[e.a.z,t.a.z]},m:function(n){return T(e,t,n)}}}},sq:O,sw:function(e,t,n,r){return void 0===r&&(r=h),{a:{m:function(e,t){return e+t},z:0},p:function(r,a){return m(a,["name"])===o(e)&&t(a)?m(a,n):0},r:function(e,t){return r(t)},d:{l:function(r){return function(n){return m(n,["name"])===o(e)&&t(n)}(r)?(a=m(r,n))<0?["p2",null,-a]:["p2",a]:null;var a},i:function(e){return e?Array.isArray(e)?((t="p2"===e[0]?e.slice(1):e)[0]||0)-(t[1]||0):e:0;var t}}}},t:v,tb:function(e,t){return function(n){return w(e,t)(q(n))}},te:function(e){return function(t){return q(t)===e}},te_:function(e,t){return function(n){return z(e,n)===t}},tg:function(e){return function(t){return q(t)>e}},tg_:function(e,t){return function(n){return z(e,n)>t}},tge:function(e){return function(t){return q(t)>=e}},tge_:function(e,t){return function(n){return z(e,n)>=t}},ti:k,tl:function(e){return function(t){return q(t)<e}},tl_:function(e,t){return function(n){return z(e,n)<t}},tle:function(e){return function(t){return q(t)<e}},tle_:function(e,t){return function(n){return z(e,n)<t}},tn:function(e){return function(t){return q(t)!==e}},tn_:function(e,t){return function(n){return z(e,n)!==t}},tw:function(e,t,o){var a=o||100,i=Math.ceil(t/a),c=function(e){return Math.floor(e/i)},s=function(e,n,r){var o;return[c(e-t),(o={},o[c(n)]=r,o)]},u=function(t,n){var r=Math.max(t[0],n[0]),o=Object.keys(t[1]).filter((function(e){return e>=r})).concat(Object.keys(n[1]).filter((function(e){return e>=r}))).filter((function(e,t,n){return n.indexOf(e)===t})).reduce((function(r,o){var a=e.a.m(t[1][o]||e.a.z,n[1][o]||e.a.z);return a!==e.a.z&&(r[o]=a),r}),{});return[r,o]},l=[Number.NEGATIVE_INFINITY,{}],d=function(e){var t=function(t){return t.map((function(t){var r=n(t,3),o=r[0],a=(r[1],r[2]);return s(e.t,a,o)})).reduce(u,l)};return u(t(e.in),t(e.out))},g=function(t){if(void 0!==t.result)return g(t.result);if(void 0!==t.w)return g(d(t));var r=n(t,2),o=(r[0],r[1]),a=null,i={};for(var c in o){var s=e.d.m({result:o[c]});s&&Array.isArray(s)&&(a=s[0],i[c]=p(s.slice(1)))}return a&&[a,"w",t[0],i]};return{a:{m:function(e,t){var n=e.w?d(e):e;return u(n,t)},z:l},p:function(t,n){return s(t.getCurrentTime(),m(n,["time"],k),e.p(t,n))},r:function(t,n){var r=(n.w?d(n):n)[1];return e.r(t,Object.keys(r).reduce((function(t,n){return e.a.m(t,r[n])}),e.a.z))},d:e.d.tw||{l:function(t,o){var a=e.d.l(t,o);return a&&r([a[0],"w"],n(s(o.getCurrentTime(),m(t,["time"],k),a.slice(1))),!1)},i:function(n,r){var o=Array.isArray(n)?n:[],a=r.getCurrentTime(),i=c(a-t);return[o[2]||null,Object.keys(o[3]||{}).map((function(t){var n;return(n={})[t]=e.d.i(o[3][t],r),n})).reduce((function(e,t){return Object.keys(t).filter((function(e){return parseInt(e)>=i})).forEach((function(n){return e[n]=t[n]})),e}),{})]},m:e.d.m&&g}}},vgw:function(e,t,n,r){void 0===r&&(r=h);var a={v:0,k:0};return{a:{m:function(e,t){var n=e.k+t.k;return{v:n?e.v+t.k*(t.v-e.v)/n:0,k:n}},z:a},p:function(r,i){return m(i,["name"])===o(e)&&t(i)?{v:m(i,n),k:1}:a},r:function(e,t){return r(t.v)},d:{l:function(r){return m(r,["name"])===o(e)&&t(r)?0==(a=m(r,n))?["p3",1]:a<0?["p3",1,null,-a]:["p3",1,a]:null;var a},i:function(e){return e?Array.isArray(e)?{v:(((t=e.slice(1))[1]||0)-(t[2]||0))/(t[0]||1),k:t[0]||0}:void 0:a;var t}}}},vq:M,w:function(e){return function(t){return t===l(e)}},x:function(e){return function(t){return t!==l(e)}},y:function(e,t){return function(n){return f(n,e)===i[t]}},y_:function(e,t){return function(n){return m(n,e)===i[t]}},z:function(e,t){return function(n){return f(n,e)!==i[t]}},z_:function(e,t){return function(n){return m(n,e)!==i[t]}}}}(),a=["Pageview","Download","LinkClick","Register","Search"],i=["hadoop","agile","devops","python","scrum","data mining","integration","cloud","docker","java","kanban","apache","visualization","azure","coap","ingestion","taxonomy","zones","business intelligence","r","data warehouse","waterfall","data","mapreduce","security","kubernetes","munging","redis","spring boot","analytics","clustering","data management","microservice","sql","lean","automation","cluster","methodologies","acid","aggregate","api","aws","b-tree","ballerina","base","complex event processing","consistency","containers","data lineage","distributed system","document store","dynamo db","elasticsearch","fault tolerance","graph store","high availability","in-memory","join","journaling","key-value store","mariadb","object-relational mapper","parallelism","persistence","scalability","schema","sharding","wide-column store","architect","database","hybrid transaction/analytical processing","jpa","log-structured merge","monitor","multi-version concurrency control","oracle","replication","container","data science","framework","git","html","iterative","jasmine","observability","serverless","spiral","structured query language","testing","apache flink","architecture","back-end","big data","chef","ci/cd","culture","devsecops","front-end","json","tech debt","Agile testing","JBoss Tools","apache kafka","apache nifi","artificial intelligence","branch","couchbase","css","data lake","grok","ibm","jenkins","mongodb","neo4j","non-first normal form query language","repository","soa","spock","swift","yugabyte","Azure Data Explorer","Azure Data Lake","Kanban board","algorithm","angular","application","continuous delivery","data flow management","data swamp","data validation","jboss","shard","sprint","tools","Architectural model","Azure Stream Analytics","Azure Web Apps","Business requirements","Clustering high-dimensional data","Container","Enterprise architecture planning","JBoss","JBoss Developer Studio","JBoss Seam","Kubernetes","Windows Azure Caching","ai","application programming interface","behavior-driven development","blockchain","career development","container format","cucumber","deployment descriptor","deployment environment","development","frameworks","k6","kotlin","languages","large-scale scrum","linux","microservices","mocha","pull request","rust","saas","scala","sdlc framework","software decision","source control","team management","test","web dev","API","Acceptance test-driven development","Agile contracts","Agile modeling","Architecture","Crowdsourced testing","Deployment descriptor","Deployment environment","DevOps","Disciplined agile delivery","Eclipse","Extreme programming","Git","GitHub","Integration testing","Performance Monitor","Project management","Requirement","Software architecture","Software project management","Test management","Test-driven development","Web container","aqua","artifact","away","blob storage","camunda","cloud database","cloudbees","cockroachdb","continuous","cyberark","datadog","decision tree","device layer","digitalocean","dynatrace","gitops","hyber-converged","influxdata","integration test","intellij","interative.ai","ionic","jdbc","jfrog","joint","k8","kubeflow","lacework","microsegmentation","nginx","normal distribution","normalizing","nutanix","okra","optimization","panoply","parse","perforce","perl","persistent storage","polyglot","postgres","rancher","requirement","saltstack","stream processing","sysdig","technical debt","tibco","transformation","vmware","AWS","AWS Lambda","Adaptive software development","Architectural pattern","Architecture domain","Behavior-driven development","Blockchain","Business activity monitoring","Cloud computing","Cloud database","Code integrity","Data architecture","Data integration","Eclipse Modeling Framework","Enterprise architecture","GitLab","Information architecture","IoT","Java performance","Network monitoring","SOA","Service Component Architecture","Service-oriented architecture","Software architect","Solution architect","Theory of constraints","Waterfall model","a+","a-frame","acc","ada","agentless security","amazon web service","amos","ansible","apache cassandra","application platform","assemblage","atoll","bamboo","beyond security","boo","bottle","broadcom","bs","ca technologies","camping","cards","career","castor","cg","check point","ciao","circleci","cloud app","cloud infrastructure","cloud integration","cloud managed","cloud management","cloud native","cloud orchestration","cloud-native security","cockroach","cocoa","code integrity","compliance","conceptual model","continuous-delivery","corona","crowdsource","data dog","data platform","databank","datapump","datastore","dedicated computing","deep learning","dependency","deployment practices","digital integration hub","distributed systems","distribution network analysis","dry run","dynamo","eclipse","elastic compute","embedded software","enterprise application development","error handling","event-driven architecture","f*","fl","flatfile","gaming","gauge","glow","go","grails","graph analytics","griffon","grunt","headless bi","hoc","hollywood","hudson","iaas","icon","id","industry standard","influx data","infrastructure as code","inheritance","integrated cloud services","interview","io","iot","irony","jena","jira","kata","knockout","lift","linx","load balancing","loggly","lua","machine learning","mad","mason","master","matlab","mauve","mdl","merge","meteor","micro focus","micro service","milestone","monad","multi-access edge computing","nashorn","native cloud","network virtualization","new relic","nexus","nikto","nu","oauth","orcl","orm","ox","oz","paas","pact","padrino","philosophy","pipeline","planning","prescriptive forecasting","project management","protocol","push","qa","qp","query-language","react","red hat","remediation as code","rest","rollback","rule of three","s2","sail","sawzall","seamless integration","semaphore","server infrastructure","server software","sinatra","smart connected products","snowball","spring-boot","sre","staging","stripes","sumo logic","sys dig","sysops","system management software","team-management","telemetry","terraform","theory of constraints","titan","trust","ubuntu","unidirectional gateway","unit test","vala","velocity","version control","vim","workplace","xaas","xamarin","xl","xod","zk","3d","A/B testing","AI","API testing","ASP.NET","Acceptance testing","Apache Cordova","Automated Testing Framework","Big data","Black-box testing","Business process management","CakePHP","Data integrity","Data mining","Data security","Data warehouse","Database","Development testing","Doctest","Dynamic testing","Enterprise application integration","Enterprise integration","Exploratory testing","Fastest","Functional testing","Integrated development environment","Integration","Integration platform","JUnit","Java Database Connectivity","JavaScript framework","Katalon Studio","Lean manufacturing","Load testing","Manual testing","Metamorphic testing","Microservices","Mobile application testing","Model-based testing","Non-functional testing","Pair testing","Penetration test","React Native","Regression testing","Requirements analysis","Requirements engineering","Risk-based testing","SPARK","Scalability testing","Security testing","Session-based testing","Shift left testing","Software testing","Spring Framework","Spring Integration","Stress testing","System integration","System testing","System under test","Test assertion","Test automation","Test case","Test data","Test design","Test engineer","Test harness","Test method","Test plan","Test script","Test strategy","Test stub","Test suite","TestFlight","TestNG","Testbed","Turing test","White-box testing","a sharp","aks","alice","amazon dynamodb","animation","apache cordova","arc","artificial neural network","augmented reality","autonomic computing","bertrand","beta","bootstrap","c sharp","c#","ceylon","charm","chatbots","chip","classification","cloudera","cluster analysis","cnapp","cognitive computing","concept","console","convolutional neural network","cross platform","crystal","csharp","dart","data engineering","data governance","data integration","data lakes","data operationalization","data preparation","data processing","delegation","delphi","django","e","ease","ec","ec2","elan","electron","eli","ella","emerald","emulator","english","erlang","etoys","extreme programming","factor","factory","feature-flag","flask","fluent","flutter","forth","foundation","fp","games","gke","google","gpu-accelerated databases","groovy","gui","haskell","heuristic search techniques","iac","ide","idl","influxdb","integrated development environment","j","jolie","joy","jrt","julia","junit","jwt","k","knowledge engineering","kspm","leap","lightbox","logic programming","lustre","machine intelligence","machine perception","mary","mbaas","mec","mfgp","microdata","microservices architecture","milk","natural  language  processing","neural network","newsql","nintendo","nosql","obj","object type","opa","orc","p","p4","parser","pearl","php","planner","playstation","plus","polygon","query language","rdbms","recurrent neural network","relational database management system","resilient distributed dataset","rpl","scheme","scratch","self","shell","skysql","slip","smart data","smoke testing","snap","software quality","squirrel","sr","steam","strand","structured data","supervised learning","swarm behavior","trac","triton","uniface","ur","vertica","whiley","wso2","xbox","yagni","yorick",".NET",".net","ABAP","ADO.NET","AKS","ASP.NET AJAX","ASP.NET Core","ASP.NET MVC","ASP.NET Web Forms","AWS Elastic Beanstalk","Abstract data type","ActionScript","ActionScript 3","Agile","Ajax framework","Alibaba Cloud","Alpine Linux","Amazon Web Services","Analytics","Apache","Apache Airflow","Apache CXF","Apache Camel","Apache CloudStack","Apache Flink","Apache MXNet","Apache Maven","Apache Phoenix","Apache Tomcat","Apache Wicket","Appcelerator Titanium","Application framework","Application lifecycle management","Application security","Arch Linux","Array data type","Artificial Intelligence System","Aspect-oriented programming","AspectJ","Assembly Language","Babylon.js","Backbone.js","Blackbox","Bodhi Linux","Bootstrap aggregating","Browser security","Business process","C Language","C Programming Language","CDI","CDIO","CI/CD","CNAPP","COBOL","CPython","CSS","CSS Animations","Capability Maturity Model","Capacity management","Change data capture","Chart.js","CherryPy","Chrome OS","ChromeOS","Cloud analytics","Cloud engineering","Cloud management","Cloud storage","CloudFront","Cloudera","Cluster manager","CocoonJS","Code Access Security","CodeIgniter","Common Language Runtime","Compiled language","Computer language","Computer programming","Computer security","Computing","Configuration management","Conflict of interest","Control Flow Graph","Control Language","Convolutional neural network","Corona SDK","Cross platform","Cumulative flow diagram","Cynefin framework","D3.js","Data access","Data access layer","Data analysis","Data definition language","Data lake","Data management","Data manipulation language","Data processing","Data science","Dataflow programming","Decision tree","Declarative programming","Defensive programming","Dependency graph","Dependency injection","Design by committee","Distributed development","Distributed version control","DrJava","Dynamic Language Runtime","Dynamic programming","EC2","Eclipse Che","Eclipse Paho","Eclipse Public License","Emacs","Embedded Java","Ember.js","Enterprise resource planning","Entity Framework","Event-driven architecture","Event-driven programming","Express","Ext JS","FUEL","Feature-driven development","Flow-based programming","Functional programming","Functional reactive programming","GKE","Game testing","General-purpose programming language","Generic programming","GeoJSON","GnuCOBOL","Golang","Google App Engine","Google Chrome","Google Cloud Storage","Google Test","Gradle","Graph Query Language","GraphQL","HTML","HTML5","HTML5 Boilerplate","HTML5test","Hackathon","Hadoop","History of computing","History of software","HotJava","HtmlUnit","IBM Cloud","ICloud","IOPS","IPython","IaC","Imperative programming","Indeed.com","Information security","Information security audit","Information security management","Infrastructure","Infrastructure as code","Interaction Design Foundation","Interaction design","IronPython","Issue tracking system","JQuery","JQuery Mobile","JQuery UI","JSDelivr","JSHint","JSON","JSON-LD","JSR 250","JShell","Java","Java 2D","Java Applet","Java Card","Java Cryptography Extension","Java Data Objects","Java Decompiler","Java Development Kit","Java EE","Java FX","Java Foundation Classes","Java Management Extensions","Java Message Service","Java Native Interface","Java Persistence API","Java Script","Java Server Pages","Java Swing","Java Web Start","Java bytecode","Java class file","Java compiler","Java language","Java memory model","Java processor","Java resource bundle","Java virtual machine","Java-gnome","JavaFX","JavaFX Script","JavaHelp","JavaScript","JavaScript engine","JavaScript library","JavaServer Faces","JavaServer Pages","Jeff Sutherland","Jsoup","KSPM","Kali Linux","LXC","Laravel","Lean IT","Lean Six Sigma","Lean product development","Lean software development","Lean startup","Lean thinking","Linux Australia","Liskov substitution principle","Log analysis","MEAN","MEC","MFGP","MapReduce","MariaDB","Material Design","Matlab","Mental model","Microsoft Visual Studio","Minimum viable product","Modular design","MuleSoft","MySQL","Mylyn","Napier","NativeScript","NetBeans","Network performance","Next.js","Node-RED","Node.js","Non-functional requirement","OCaml","Object Query Language","Object-oriented programming","Objective C","Objective-C++","Observability","Open Source","OpenID","OpenSSL","OpenStack","PHP","PHP 5","PHP Development Tools","PHPUnit","PL/SQL","Performance Analyzer","Performance appraisal","Performance improvement","Performance indicator","Perl 6","Planning poker","Play Framework","Portability testing","PostgreSQL","PowerShell","Project portfolio management","Prolog","Push technology","PyCharm","PyTorch","Python programming language","Query language","RDF query language","Rapid application development","Real user monitoring","Redis","Relational database","Release management","Reliability engineering","Requirement prioritization","Requirements elicitation","Requirements management","Resource Description Framework","Robot Framework","Robustness testing","Rolling release","Ruby programming language","SAS","SOAP","SQLite","SWOT analysis","SaaS","Scalatra","Scripting language","Security","Sed","Sencha Touch","Serverless Framework","Serverless computing","Sharing economy","Shell script","Site reliability engineering","Smalltalk","Software build","Software company","Software configuration management","Software construction","Software craftsmanship","Software deployment","Software developer","Software development process","Software framework","Software quality","Software quality assurance","Software requirements","Software requirements specification","Software security assurance","Spring Batch","Spring Cloud","Spring Security","Stack overflow","Svelte","Swing Application Framework","Symfony","System requirements","Technical writing","Technological revolution","Test Environment Management","Test Studio","Test double","Transaction Control Language","TypeScript","Underscore.js","Usability testing","User story","User-centered design","VB.NET","Version control","Virtual Machine","Virtual private cloud","Visual Basic","Visual Basic 6","Visual Studio Code","Vue.js","Vulnerability","WSO2","Ward Cunningham","Web developer","WinJS","XHTML","XML","XML editor","YAML","active learning","adaptive software development","aerospike","agent","alert management","alert-management","algorithms","amazon web services","apache airflow","apache arrow","apache camel","apache cxf","apache foundation","apache iceberg","apache maven","apache mxnet","apache phoenix","apache wicket","app-store","application lifecycle management","application-programming-interface","ar","architectural model","artificial intelligence system","as-a-service","atomicity","attack","augmented-reality","authentication","autonomy","aws lambda","babylon.js","back end","backbone.js","bento","bitcoin","blackbox","branching","breach","bug tracking","business process","business process management","bytecoin","c++","capability maturity model","capacity management","capacity test","cardinality","career-dev","career-development","casb","cdi","cdn","chart.js","cherrypy","chrome os","chromeos","church","ci cd","ci-cd","clarion","cloud computing","clusters","cobol","cocoonjs","codeigniter","coinbase","column","commit","committer","community","complex-adaptive systems","composite index","computing","configuration drift","configuration management","conflict of interest","continuous deployment","continuous integration","continuous quality","continuous testing","continuous-deployment","continuous-integration","control flow graph","crypto","csrf","cumulative flow diagram","curry","cynefin framework","d3.js","dast","data analysis","data integrity","data server","data-server","ddos","dependency graph","dependency theory","deployment-practices","design by committee","dev-ops","development operations","development-operations","development-ops","dimension","distributed development","distributed-system","distributed-systems","durability","dynamodb","dzone.tradepub.com","eclipse foundation","elastic-search","elixir","emacs","ember.js","exploit","express","ext js","fail fast","feature flag","feature-driven development","featureflag","feedback loop","firebird","firewall","flix","flux","fork","foss","front end","fuel","fuzzing","game development","genetic algorithm","getting started with kubernetes","glove","go!","golo","google app engine","gosu","governance","gradle","hackathon","halide","hana-cloud","hekaton","history of computing","history of software","horovod","iast","indeed.com","indicator","infosec","infrastructure","integration testing","interaction design","internet of things","iops","isolation","issue tracking system","iterations","itsec","java performance","javascript","jboss tools","jeff sutherland","jquery","kaleidoscope","katalon studio","key-value-stores","kubernetes-native database essentials","language","laravel","lead time","license","licensing obligation","liskov substitution principle","litecoin","log analysis","logo","lucid","lxc","maintainer","malware","material design","mean","mental model","minimum viable product","ml","mobile","mobile development","model-based testing","modular design","ms sql server","mulesoft","multi-region database deployments","mylyn","mysql","nativescript","netbeans","netsec","network performance","next.js","node-red","node.js","object-relational mapping","object-relational-mapping","ocaml","odbc","one-stop shop","open data","openstack","oracle database","oracle-database","oracledb","orchestration","osi","out-of-the-box tools","owasp","pair-programming","parasail","partition","pascal","performance analyzer","performance appraisal","performance improvement","performance indicator","pivot table","pivot-table","planning meeting","player-input","point-in-time","point-in-time recovery","primecoin","project portfolio management","proof of concept software","proprietary","pull requests","quality assurance","quality-assurance","range query","ransomware","rapid application development","rasp","readme","refcard","release management","reliability engineering","rolling release","row","ruby","saml","sap hana cloud","sas","sass","sast","sdlc-framework","sdlc-frameworks","secure","sencha touch","server environments","server-environment","serverless computing","sharing economy","shift left","site reliability engineering","site-reliability","snap!","soap","software build","software company","software construction","software craftsmanship","software deployment","software developer","software development process","software testing","software-decision","software-testing","source code","spanner","spark","spring batch","sso","staging environment","stella","svelte","swot analysis","symfony","synonym","technical writing","technological revolution","test management","test-driven development","threat","time-series","torch","travis ci","travis-ci","travisci","tree","trendreport","turing","underscore.js","unit testing","user acceptance test","user story","user-centered design","version-control","virtual machine","virtual-reality","visual basic","vital","vr","vue.js","vulnerability","waf","ward cunningham","web developer","web3","whitepaper","wsdl","xamarin.forms","xml","xss","yaml","zipper"],c=[["client","title"],["node","tags"],["client","url"],["node","title"],["category"],["node","zone"],["dest_url"],["client","domain"],["node","authorCompany"],["searchQuery"],["user","companySize"]],s=[],u=[o.os(o.s,0,[240,4,132]),o.o([o.os(o.s,4,[90,7,162,24,169]),o.os(o.s,0,[90,24,169]),o.os(o.s,2,[90,24,1326]),o.os(o.s,3,[90,7,32,24,169])]),o.os(o.s,2,[1,1053,35,1107,94,301,203,313,315,1129,1130,1148,1150,1151,2,96,8,336,590,1170,80,111,222,25,372,84,410,1288,1310,1315,1327,429,430,435,1347,1348,1357]),o.os(o.cx,1,[160,185,122,10,4,193,190,250,137,191,183,100,177,176,1]),o.os(o.s,4,[1,2]),o.os(o.s,3,[29,11,18,14,22,0,15,26,3,19,16,12,17]),o.o([o.os(o.s,4,[9,173]),o.os(o.s,0,[91,107,155,156,97,81,9,159,3,133]),o.os(o.s,2,[91,107,155,156,97,81,9,159,3,133]),o.os(o.s,3,[91,107,155,156,97,81,9,159,3,133])]),o.os(o.s,4,[2,6]),o.os(o.s,3,[1183,1219,1244])];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}({102199:o.q(o.ocq(o.ocq(o.tw(o.cw(0,o.o([o.y(4,182),o.os(o.cx,1,[47,25,2]),o.os(o.s,0,[1051,1,1052,"artifcat",35,1077,148,1085,1087,"build artifact",1094,1106,94,301,203,1116,1119,313,1122,47,126,1125,1126,1127,1128,"deployment pipline",1149,2,96,8,336,337,1167,1168,1171,80,1203,1209,111,222,25,1222,372,1240,84,1258,1264,1266,1268,1284,410,1287,1309,1313,1314,1325,170,28,430,1333,435,244,1346,1353,1354,448]),o.ref(2),o.os(o.s,3,[47,2,25])]),o.ge(1)),2592e6),o.cw(1,o.o([o.os(o.s,3,["ci/ cd",94,205,2,96,84,88]),o.ps(5,182)]),o.ge(1))),o.cw(2,o.o([o.os(o.s,2,[35,205,2,96,590,84]),o.os(o.s,6,[35,203,205,2,96,"feature-flags","logic-monitor",84])]),o.ge(1)))),102201:o.q(o.ocq(o.ocq(o.tw(o.cw(0,o.o([o.os(o.cx,1,[971,"Distributed Computing",472,"Wide-column store","Structured query language","Strong consistency","Sharding","Schema","Scalability","Replication","Polyglot persistence","Persistence","Parallelism","Object-relational mapper","NoSQL","NewSQL","Non-first normal form query language","Multi-version concurrency control",916,"Log-structured merge","Lightning memory-mapped database","Key-value store","JPA","Journaling","Join","In-memory","Hybrid transaction/analytical processing","High availability",832,"Graph store","Fault tolerance","Eventual consistency","ElasticSearch","Dynamo DB","Document store","Distributed system","Distributed relational database",471,"Database management system",469,779,"Data lineage","Database clustering","Consistency","Complex event processing","Cloud-native database","B-Tree","BASE",703,"Aggregate","ACID",69]),o.os(o.s,4,[38,39,11,42,44,45,46,48,31,5,20,49,50,51,52,53,54,0,55,70,56,57,58,71,59,72,23,74,635,114,637,61,62,63,76,64,65,66,87,67]),o.os(o.s,0,[38,39,536,"analytical processing",283,"apache lucene","apache spark",42,44,204,45,46,48,31,5,1141,20,320,321,322,"dbms",49,50,51,52,53,340,54,0,55,"hybrid transaction",56,219,57,58,98,59,"lmdb",72,23,60,112,74,"mvcc","n1ql",61,1254,75,396,397,62,63,1276,1281,238,651,27,76,115,64,65,85,66,28,33,67,119]),o.os(o.s,2,[38,39,11,42,44,204,45,"complex-data-processing",46,48,31,5,20,1142,320,321,322,49,1154,50,51,1157,52,"eventual-consistecy",53,340,54,0,55,"high-availability",70,56,608,219,57,58,71,98,59,1218,"log-structured",23,60,112,74,61,"object-relational-mapper",1255,75,396,397,62,63,1277,1280,237,238,412,652,27,115,64,65,85,66,429,33,87,1344,67,119]),o.os(o.s,3,[38,39,11,42,44,45,46,48,31,5,20,49,50,51,52,53,54,0,55,70,56,57,58,71,59,72,23,74,114,61,62,63,76,64,65,85,66,33,87,67])]),o.ge(1)),2592e6),o.cw(1,o.o([o.os(o.s,3,[38,39,11,42,44,45,46,48,31,5,20,49,50,51,52,53,54,0,55,70,56,57,58,71,59,72,23,74,635,114,637,61,62,63,76,64,65,85,66,87,67]),o.os(o.s,5,[38,39,11,42,44,45,46,48,31,5,20,49,50,51,52,53,54,0,55,70,56,57,58,71,59,72,23,74,635,114,637,61,62,63,76,64,65,66,87,67])]),o.ge(1))),o.cw(2,o.os(o.s,6,[38,39,11,42,44,"capella",310,45,46,48,31,5,20,49,1155,50,51,52,53,54,0,55,70,56,57,58,71,59,72,23,60,74,114,61,62,63,76,64,65,85,66,33,87,67,119]),o.ge(1)))),103451:o.q(o.ocq(o.cw(0,o.o([o.ps(4,862),o.ps(0,9),o.ps(2,9)]),o.ge(1)),o.cw(1,o.o([o.pc_(1,9),o.ps(3,9),o.ps(5,862)]),o.ge(1)))),103452:o.q(o.ocq(o.cw(0,o.o([o.ps(4,697),o.os(o.s,0,[1,407,"project manager",4]),o.os(o.s,2,[1,"project-management",4])]),o.ge(1)),o.cw(1,o.o([o.ps(3,1),o.ps(5,697)]),o.ge(1)))),103453:o.q(o.ocq(o.cw(0,o.o([o.y(4,458),o.os(o.s,0,[146,123,104,540,542,550,552,554,30,556,559,5,78,208,324,592,604,618,622,624,374,625,"natural language processing",633,653,672,673]),o.os(o.s,2,[146,1054,104,540,"artificial-intelligence",542,550,552,554,30,556,559,5,78,208,324,592,1182,604,618,622,624,374,625,"machine-learning",1237,633,653,672,673])]),o.ge(1)),o.cw(1,o.o([o.os(o.s,3,[146,1054,104,540,542,550,552,554,30,556,559,5,78,208,324,592,1182,604,618,622,624,374,625,1237,633,653,672,673]),o.ps(5,458)]),o.ge(1)))),103454:o.q(o.ocq(o.cw(0,o.o([o.os(o.s,4,[123,11,104,92,200,18,36,14,564,127,565,566,108,5,568,569,570,78,128,129,20,209,600,346,0,15,23,26,227,228,233,236,3,654,655,131,663,242,671,16,438,246,12,17]),o.os(o.s,0,[123,11,104,92,200,18,36,14,564,127,565,566,108,5,568,569,570,78,128,129,20,209,600,346,0,15,23,26,227,228,233,236,3,654,655,131,663,242,671,16,438,246,12,17]),o.os(o.s,2,[123,11,104,92,"big-data",200,18,36,14,564,127,565,566,108,5,568,569,570,78,128,129,20,209,600,346,0,15,23,26,227,228,233,236,3,654,655,131,663,242,671,16,438,246,12,17])]),o.ge(1)),o.cw(1,o.o([o.os(o.s,3,[123,29,11,104,200,18,36,14,22,209,0,15,23,26,227,228,233,236,3,131,242,16,438,246,12,17]),o.os(o.s,5,[123,11,104,200,36,14,22,209,346,0,15,23,26,227,228,233,236,3,131,242,16,246,12,17])]),o.ge(1)))),103455:o.q(o.ocq(o.cw(0,o.o([o.ps(4,"Cloud"),o.os(o.s,0,[7,353,400,166,451]),o.os(o.s,2,[1072,7,353,400,166,451])]),o.ge(1)),o.cw(1,o.o([o.ps(0,7),o.ps(5,7)]),o.ge(1)))),103456:o.q(o.ocq(o.cw(0,o.o([o.ps(4,482),o.os(o.s,0,[40,147,6]),o.os(o.s,2,[40,1068,6])]),o.ge(1)),o.cw(1,o.o([o.ps(0,6),o.ps(5,482)]),o.ge(1)))),103457:o.q(o.ocq(o.cw(0,o.o([o.ps(4,265),o.os(o.s,0,["actuator","advanced message queuing protocol","application agents","beacon technology","bluetooth low energy","chirps","competing consumers","connected devices","connectivity protection","constrained application protocol","data filtration","device-agnostic control","direct messaging","edge computing","edge gateway","edge layer","embedded device","embedded system","endpoint device","flow-based programming","geofencing","haze computing","home automation","ibeacon","industrial internet","integrator",1205,"internet protocol suite",363,"lightweight protocol","long range communication protocols","low-power devices","m2m","machine-to-machine","mcu","mesh network","message queuing telemetry transport","messaging protocols","microcontroller","mqtt","multi-agent system","near-field communication","nfc","operability","personal area network","propagator","radio frequency identification","real-time operating system","releasability","rfid","rtos","sensor","single-board computer","site-level management","store and forward","system on a chip","transmission control protocol","ubiquitous computing","wearables","z-wave","zigbee"]),o.os(o.s,2,["edge-computing",363])]),o.ge(1)),o.cw(1,o.o([o.os(o.s,0,[1205,363]),o.ps(5,265)]),o.ge(1)))),103459:o.q(o.ocq(o.tw(o.cw(0,o.o([o.y(4,492),o.ps(0,162),o.ps(2,162)]),o.ge(1)),2592e6),o.cw(1,o.y(5,492),o.ge(1)))),103460:o.q(o.ocq(o.cw(0,o.o([o.y(4,941),o.os(o.s,0,[1060,105,1117,1118,1159,1176,1177,80,1189,606,1223,1224,161,1231,1257,1259,"open source","open-source software",1265,1285,164,1293,1328,244]),o.os(o.s,2,[1060,105,1117,1118,1159,1176,1177,80,1189,606,1223,1224,161,1231,1257,1259,"open-source",1265,1285,164,1293,1328,244])]),o.ge(1)),o.cw(1,o.os(o.w,5,["Technical Debt","Source Code","README","Pull Request","Proprietary","OSI","ODBC","Open-source Software","Open Data","Open Community","Maintainer","Linux","Licensing Obligation","License","IDE","GPL (General Public License)","Governance","GNU General Public License",187,186,"FOSS","Fork","Eclipse Foundation","Community","Branch","Apache Foundation","Committer",941]),o.ge(1)))),103461:o.q(o.ocq(o.cw(0,o.o([o.pc_(1,24),o.ps(4,989),o.os(o.s,0,["anomaly detection","appsec",1074,1076,1086,1098,1100,1133,1138,1143,"denial of service",96,"encryption",1164,1173,"fuzz testing",1180,1198,1201,1210,1232,1249,1267,"pen testing","penetration testing",1290,1292,1304,1307,24,1332,1343,1365,1373,"zero day"]),o.os(o.s,2,[1074,1076,1086,1098,1100,1133,1138,1143,96,1164,1173,"fuzz-testing",1180,1198,1201,1210,1232,1249,1267,"pen-testing","penetration-testing",1290,1292,1304,1307,24,1332,1343,1365,1373,"zero-day"])]),o.ge(1)),o.cw(1,o.o([o.pc_(1,24),o.ps(5,989)]),o.ge(1)))),103464:o.q(o.ocq(o.cw(0,o.o([o.os(o.s,4,[1238,173]),o.os(o.s,0,[124,1080,91,547,1091,1178,97,81,9,158,378,1239,235,646,"programming language",3,1299,165,167,118,173]),o.os(o.s,2,[91,97,81,9,158,378,"mobile-dev",235,646,"programming-language",3,1299,165,"web-dev"])]),o.ge(1)),o.cw(1,o.o([o.os(o.s,3,[1080,91,547,1091,1178,97,158,1220,1239,3,165,167,118,173]),o.os(o.s,5,[1238,173])]),o.ge(1)))),103622:o.q(o.ocq(o.ocq(o.tw(o.cw(0,o.o([o.os(o.s,0,[1051,1,1052,198,35,1077,148,1085,1087,1094,1106,94,301,203,1116,1119,313,1122,47,126,1125,1126,1127,1128,"deployment pipeline",1149,2,96,8,336,337,1167,1168,1171,80,1203,1209,111,222,25,1222,372,631,1240,84,1258,1264,1266,1268,"production",1284,410,1287,1309,1313,1314,1325,170,28,430,1333,435,244,1346,1353,1354,448]),o.ref(2)]),o.ge(1)),2592e6),o.cw(1,o.o([o.y(5,182),o.os(o.s,3,[35,94,205,2,222,25,84,88])]),o.ge(1))),o.cw(2,o.os(o.s,6,[35,205,2,25,88]),o.ge(1)))),103626:o.q(o.acq(o.tw(o.cw(0,o.o([o.os(o.s,0,[38,39,536,11,42,44,204,45,46,48,31,5,1141,20,320,321,322,49,50,51,52,53,340,54,0,55,70,56,219,57,58,71,98,59,72,23,60,112,74,61,1254,75,396,397,62,63,1276,1281,238,651,652,27,76,115,64,65,66,28,33,67,119]),o.os(o.s,2,[38,39,11,42,44,204,45,46,48,31,5,20,1142,320,321,322,49,1154,50,51,1157,52,53,340,54,0,55,70,56,608,219,57,58,71,98,59,1218,72,23,60,112,74,61,1255,75,396,397,62,63,1277,1280,238,412,652,27,76,115,64,65,66,429,33,87,1344,67,119])]),o.ge(2)),2592e6),o.ocq(o.cw(2,o.o([o.os(o.s,2,[38,39,42,44,45,46,48,31,5,20,49,50,"document-store",51,1160,52,53,"fault-tolerance",54,0,55,70,56,57,58,71,59,72,23,114,61,62,63,412,76,64,65,66,33,87,67]),o.os(o.s,6,[38,39,11,42,44,45,46,48,31,5,20,49,50,51,1160,52,"event-processing",53,54,0,55,70,56,57,58,71,59,72,23,74,114,61,62,63,412,76,64,65,66,33,87,67])]),o.ge(1)),o.cw(1,o.os(o.s,3,[38,39,11,42,44,45,46,48,31,5,20,49,50,51,52,53,54,0,55,70,56,57,58,71,59,72,23,74,114,61,62,63,76,64,65,66,33,87,67]),o.ge(1))))),103807:o.q(o.ocq(o.ocq(o.ocq(o.tw(o.cw(2,o.o([o.os(o.s,2,["https://dzone.com/refcardz/getting-started-kubernetes","https://dzone.com/refcardz/kubernetes-native-database-essentials","https://dzone.com/refcardz/multi-region-database-deployments"]),o.os(o.s,6,[41,310,106,599,1193,110,112,1242,1246,113,1261,1262,1263,27,1301,"sap-hana","sql-server",678,119])]),o.ge(1)),7776e6),o.tw(o.cw(0,o.os(o.s,2,["https://dzone.com/articles/3-ways-to-install-cockroachdb-binary-docker-or-kub","https://dzone.com/articles/3-ways-to-reduce-latency-in-multi-region-deploymen","https://dzone.com/articles/a-brief-history-of-high-availability","https://dzone.com/articles/a-contrived-example-to-illustrate-how-to-track-las","https://dzone.com/articles/a-practical-approach-to-actually-scaling-your-data","https://dzone.com/articles/active-passive-vs-multi-active-database-topologies","https://dzone.com/articles/an-introduction-to-join-ordering","https://dzone.com/articles/automating-sql-user-generation-and-password-rotati","https://dzone.com/articles/aws-outperforms-gcp-in-the-2018-cloud-report","https://dzone.com/articles/back-up-cockroachdb-to-s3-via-https-proxy","https://dzone.com/articles/changed-data-capture-from-cockroachdb-to-confluent","https://dzone.com/articles/clean-up-your-outbox-tables-with-programmatic-ttl","https://dzone.com/articles/cockroachdb-admission-control","https://dzone.com/articles/cockroachdb-cdc-using-minio-as-cloud-storage-sink","https://dzone.com/articles/cockroachdb-cdc-with-hadoop-ozone-s3-gateway-and-d","https://dzone.com/articles/cockroachdb-flyway-schema-migration-tool","https://dzone.com/articles/cockroachdb-geoserver-horizontally-scalable-spatia","https://dzone.com/articles/cockroachdb-grants-and-schemas-explained","https://dzone.com/articles/cockroachdb-performance-characteristics-with-ycsba","https://dzone.com/articles/cockroachdb-statement-redirection-from-an-external","https://dzone.com/articles/cockroachdb-til-volume-1","https://dzone.com/articles/cockroachdb-til-volume-2","https://dzone.com/articles/cockroachdb-til-volume-3","https://dzone.com/articles/cockroachdb-til-volume-4","https://dzone.com/articles/cockroachdb-til-volume-5","https://dzone.com/articles/cockroachdb-til-volume-6","https://dzone.com/articles/cockroachdb-with-django-and-mit-kerberos","https://dzone.com/articles/cockroachdb-with-gssapi-deployed-via-systemd","https://dzone.com/articles/cockroachdb-with-kerberos-and-custom-service-princ","https://dzone.com/articles/cockroachdb-with-kerberos-and-docker-compose","https://dzone.com/articles/cockroachdb-with-mit-kerberos-using-a-native-clien","https://dzone.com/articles/cockroachdb-with-mixed-kerberos-and-certificates-a","https://dzone.com/articles/cockroachdb-with-sqlalchemy-and-mit-kerberos","https://dzone.com/articles/configure-single-sign-on-for-cockroachdb-dedicated","https://dzone.com/articles/configuring-cockroachdb-with-active-directory","https://dzone.com/articles/connect-jetbrains-datagrip-to-a-secure-cockroachdb","https://dzone.com/articles/data-center-failures-and-crdb-replication","https://dzone.com/articles/data-federation-with-cockroachdb-and-presto","https://dzone.com/articles/disaster-recovery-examples","https://dzone.com/articles/disk-spilling-in-a-vectorized-execution-engine","https://dzone.com/articles/dns-gotchas-with-cockroachdb-and-gssapi","https://dzone.com/articles/exploring-cockroachdb-with-jupyter-notebook-and-py","https://dzone.com/articles/exploring-cockroachdb-with-jupyter-notebook-and-r","https://dzone.com/articles/exploring-cockroachdb-with-microsoft-powershell","https://dzone.com/articles/exploring-pgbouncer-auth-types-with-cockroachdb","https://dzone.com/articles/free-fridays-building-a-neural-network-query-optim","https://dzone.com/articles/free-fridays-experiments-into-cockroachdb","https://dzone.com/articles/getting-started-with-cockroachdb-on-red-hat-opensh","https://dzone.com/articles/global-tables-vs-duplicate-indexes","https://dzone.com/articles/high-availability-without-giving-up-consistency","https://dzone.com/articles/highly-available-spatial-data-finding-pubs-in-lond","https://dzone.com/articles/how-5g-and-public-clouds-will-shape-the-future-of","https://dzone.com/articles/how-to-secure-a-previously-insecure-cluster","https://dzone.com/articles/how-to-use-cockroachdb-with-your-django-applicatio","https://dzone.com/articles/import-data-into-cockroachdb-with-kerberos-authent","https://dzone.com/articles/intro-to-multi-region-distributed-sql-topologies","https://dzone.com/articles/join-ordering-part-ii-the-sql","https://dzone.com/articles/kubernetes-distributed-stateful-apps-using-cockroa","https://dzone.com/articles/kubernetes-the-state-of-stateful-apps","https://dzone.com/articles/lessons-learned-from-2-years-of-nightly-jepsen-tes","https://dzone.com/articles/loading-thousands-of-tables-in-parallel-with-ray-i","https://dzone.com/articles/make-table-and-index-creation-faster-in-a-multi-region-cockroachdb-environment","https://dzone.com/articles/migrate-a-sql-server-database-to-cockroachdb","https://dzone.com/articles/migrating-feature-toggles-with-unleash-and-cockroa","https://dzone.com/articles/nested-transactions-in-cockroachdb-201","https://dzone.com/articles/nosql-vs-newsql-vs-distributed-sql-dzones-2020-tre","https://dzone.com/articles/parallel-commits-an-atomic-commit-protocol-for-dis","https://dzone.com/articles/performance-characteristics-working-with-jsonb-in","https://dzone.com/articles/practical-applications-of-json-why-and-where-you-s","https://dzone.com/articles/recover-from-a-disaster-using-a-userfile-backup","https://dzone.com/articles/recover-from-an-oops-with-cockroachdb","https://dzone.com/articles/running-cockroachdb-with-docker-compose-and-minio","https://dzone.com/articles/running-cockroachdb-with-docker-compose-part-1","https://dzone.com/articles/scaling-cockroachdb-to-200k-writes-per-second","https://dzone.com/articles/serverless-for-survival","https://dzone.com/articles/simplifying-cockroachdb-kerberos-architecture-with","https://dzone.com/articles/simulating-a-multi-region-cockroachdb-cluster-on-k","https://dzone.com/articles/sqlfmt-an-opinionated-online-sql-formatter","https://dzone.com/articles/three-headed-dog-meets-cockroach-cockroachdb-with","https://dzone.com/articles/time-and-related-data-types-in-postgresql","https://dzone.com/articles/top-5-useful-commands-with-cockroachdb","https://dzone.com/articles/tutorial-how-to-simulate-a-multi-region-cockroachd","https://dzone.com/articles/using-a-custom-cockroachdb-image-with-docker-and-kubernetes","https://dzone.com/articles/using-azure-load-balancer-with-cockroachdb","https://dzone.com/articles/using-cockroachdb-kubernetes-operator-with-azure-kubernetes-service","https://dzone.com/articles/using-cockroachdb-storage-attributes-for-heterogen","https://dzone.com/articles/using-cockroachdb-workload-with-kerberos","https://dzone.com/articles/using-pgbench-with-cockroachdb-serverless","https://dzone.com/articles/using-pgbouncer-with-cockroachdb","https://dzone.com/articles/what-does-gdpr-compliance-mean-for-my-database","https://dzone.com/articles/what-is-connection-pooling-and-why-should-you-care","https://dzone.com/articles/what-is-database-contention-and-why-should-you-car","https://dzone.com/articles/what-write-skew-looks-like","https://dzone.com/articles/whats-so-special-about-spatial-data","https://dzone.com/articles/working-with-multi-level-json-in-cockroachdb","https://dzone.com/articles/your-database-should-work-like-a-cdn"]),o.ge(1)),7776e6)),o.tw(o.cw(0,o.o([o.os(o.s,2,[41,310,106,599,1193,110,112,113,1261,1262,1263,27,"sap",33,678,119]),o.os(o.s,8,["amazon",41,310,106,599,110,112,1242,1246,113,75,27,1301,678,119]),o.ref(8)]),o.ge(1)),7776e6)),o.tw(o.cw(1,o.ref(8),o.ge(1)),7776e6))),104165:o.q(o.acq(o.cw(0,o.o([o.os(o.s,0,[41,13,7,353,400,166,451]),o.os(o.s,2,[1072,41,13,7,353,400,166,451])]),o.ge(2)),o.ocq(o.cw(2,o.o([o.os(o.s,2,[41,13,7]),o.os(o.s,6,[41,13,7])]),o.ge(1)),o.cw(1,o.ps(3,7),o.ge(1))))),104621:o.q(o.ocq(o.cw(2,o.os(o.s,2,["guides",1294,1350,1369]),o.ge(1)),o.cw(1,o.os(o.w,["node","type"],["guide",1369,1294,1350]),o.ge(1)))),105196:o.q(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.itp("liveramp_Bombora","1000094054",!1,"105196"),o.itp("liveramp_Bombora","1000095904",!1,"105196")),o.itp("liveramp_Bombora","1000884159",!1,"105196")),o.itp("eyeota","34888",!1,"105196")),o.itp("eyeota","6575",!1,"105196")),o.itp("eyeota","35033",!1,"105196")),o.itp("liveramp_MeritDirect","1002714076",!1,"105196")),o.itp("liveramp_DunandBradstreet","1000309906",!1,"105196")),o.itp("liveramp_MeritDirect","1002710216",!1,"105196"))),105197:o.q(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.itp("liveramp_Bombora","1000096694",!1,"105197"),o.itp("liveramp_Bombora","1000884139",!1,"105197")),o.itp("liveramp_Bombora","1000884139",!1,"105197")),o.itp("eyeota","12889",!1,"105197")),o.itp("eyeota","35299",!1,"105197")),o.itp("liveramp_MeritDirect","1002715436",!1,"105197")),o.itp("liveramp_MeritDirect","1002715676",!1,"105197"))),105200:o.q(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.itp("liveramp_Bombora","1000095934",!1,"105200"),o.itp("liveramp_Bombora","1000096784",!1,"105200")),o.itp("liveramp_Bombora","1000884179",!1,"105200")),o.itp("eyeota","35243",!1,"105200")),o.itp("liveramp_MeritDirect","1002715906",!1,"105200")),o.itp("liveramp_MeritDirect","1000073964",!1,"105200"))),105310:o.q(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.itp("eyeota","6555",!1,"105310"),o.itp("eyeota","34894",!1,"105310")),o.itp("liveramp_DunandBradstreet","1000310186",!1,"105310")),o.itp("liveramp_DunandBradstreet","1001640266",!1,"105310")),o.itp("liveramp_DunandBradstreet","1001640266",!1,"105310")),o.itp("liveramp_MeritDirect","1002714236",!1,"105310")),o.itp("liveramp_MeritDirect","1000072644",!1,"105310")),o.itp("eyeota","6564",!1,"105310")),o.itp("liveramp_Bombora","1005098959",!1,"105310")),o.itp("liveramp_DunandBradstreet","1000310916",!1,"105310")),o.itp("liveramp_MeritDirect","1002714166",!1,"105310")),o.itp("eyeota","61",!1,"105310")),o.itp("liveramp_DunandBradstreet","1001640156",!1,"105310"))),105462:o.q(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.itp("liveramp_MeritDirect","1002717026",!1,"105462"),o.itp("eyeota","13230",!1,"105462")),o.itp("eyeota","35717",!1,"105462")),o.itp("liveramp_MeritDirect","1000072604",!1,"105462")),o.itp("liveramp_Bombora","1000096344",!1,"105462")),o.itp("liveramp_DunandBradstreet","1000311496",!1,"105462")),o.itp("liveramp_Bombora","1000096334",!1,"105462")),o.itp("eyeota","6632",!1,"105462")),o.itp("liveramp_DunandBradstreet","1000311496",!1,"105462")),o.itp("liveramp_DunandBradstreet","1000310086",!1,"105462")),o.itp("liveramp_DunandBradstreet","1000309996",!1,"105462")),o.itp("liveramp_Bombora","1000095164",!1,"105462")),o.itp("liveramp_MeritDirect","1002709616",!1,"105462")),o.itp("eyeota","35271",!1,"105462")),o.itp("eyeota","34866",!1,"105462")),o.itp("liveramp_Bombora","1000095154",!1,"105462"))),105613:o.q(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.itp("liveramp_Stirista","1001178129",!1,"105613"),o.itp("liveramp_DunandBradstreet","1000309766",!1,"105613")),o.itp("liveramp_Bombora","1000096124",!1,"105613")),o.itp("eyeota","3",!1,"105613")),o.itp("eyeota","6524",!1,"105613")),o.itp("eyeota","35218",!1,"105613"))),105614:o.q(o.ocq(o.ocq(o.ocq(o.ocq(o.itp("liveramp_Stirista","1001178119",!1,"105614"),o.itp("liveramp_DunandBradstreet","1000309776",!1,"105614")),o.itp("eyeota","2",!1,"105614")),o.itp("eyeota","35217",!1,"105614")),o.itp("liveramp_DunandBradstreet","1002784216",!1,"105614"))),105615:o.q(o.itp("liveramp_Bombora","1005390249",!1,"105615")),105763:o.q(o.ocq(o.ocq(o.cw(0,o.o([o.os(o.s,0,[40,147,"bpm",1089,"ddd","domain-driven design","eai","eda","eip","ejb","enterprise intergration","enterprise javabeans","enterprise service bus","esb","etl","event-drive architecture","extract transform and load","hateoas","hypermedia as the engine of application state",607,6,"interface definition language","ipaas","java management extensions","java message service","javascript object notation","jms","jmx",98,"mep","message broker","message exchange pattern","message gateway","message queue","message-driven processing",631,"middleware","mom",395,"open source gateway interface","osgi","remote procedure call","representational state transfer",416,"rpc",1300,"sca","security assertion markup language","service component architecture","service-oriented architecture","simple object access protocol",116,"web service",1370]),o.os(o.s,2,[40,6,98,395,416,1300,1317,1370])]),o.ge(1)),o.cw(1,o.o([o.os(o.s,3,[40,6,98,395,416,116]),o.ps(5,482)]),o.ge(1))),o.cw(2,o.os(o.s,6,[40,6,98,395,416,116]),o.ge(1)))),106058:o.q(o.ocq(o.ocq(o.tw(o.cw(0,o.o([o.os(o.cx,1,[82,86,21,34,1,77,25,8,2]),o.ref(4),o.os(o.s,0,[1,150,94,95,2,82,10,34,37,"mobile app","object",407,4,168,86,"spring framework",171,445,21]),o.os(o.s,2,[1,1097,95,82,10,34,37,4,1305,86,437,21]),o.os(o.s,3,[1,150,95,82,10,34,37,4,168,86,171,21])]),o.ge(2)),2592e6),o.tw(o.cw(1,o.o([o.os(o.s,3,[1,150,95,2,82,10,34,37,4,168,86,171,21]),o.os(o.s,5,[1,2])]),o.ge(1)),2592e6)),o.tw(o.cw(2,o.o([o.os(o.s,2,[1,1096,95,2,82,10,34,37,4,1306,86,437,21]),o.os(o.s,6,[1,1096,95,2,82,10,34,37,4,1306,86,437,21])]),o.ge(1)),2592e6))),106059:o.q(o.cw(0,o.t,o.ge(1))),106060:o.q(o.tw(o.cw(0,o.ref(1),o.ge(2)),2592e6)),106061:o.q(o.tw(o.cw(0,o.o([o.os(o.s,4,[146,89,102,103,92,18,14,127,108,5,78,128,129,69,0,15,26,3,19,16,12,17]),o.os(o.s,0,[29,89,102,103,18,14,22,0,15,26,3,19,16,12,17]),o.os(o.s,2,[29,89,102,103,18,14,22,0,15,26,3,19,16,12,17]),o.os(o.s,3,[29,89,102,103,18,14,22,0,15,26,3,19,16,12,17])]),o.ge(2)),2592e6)),106063:o.q(o.tw(o.cw(0,o.ref(6),o.ge(2)),2592e6)),106064:o.q(o.tw(o.cw(0,o.o([o.ref(7),o.os(o.s,0,[47,126,326,2,6,88]),o.os(o.s,2,[47,315,1146,2,6,88]),o.os(o.s,3,[47,126,326,2,6,88])]),o.ge(2)),2592e6)),106065:o.q(o.cw(0,o.t,o.ge(1))),106066:o.q(o.ocq(o.ocq(o.tw(o.cw(0,o.o([o.os(o.cx,1,["Zones","Visualization","Unstructured data","Transformation","Telemetry","Taxonomy","Structured data","Stream processing","Smart data","Shard","Resilient distributed dataset","Relational database management system","Real-time stream processing","R","Python","Persistent storage","Parse","Normalizing","Normal distribution","Munging",916,"Ingestion",832,"Graph analytics","GPU-accelerated databases","Device layer",471,"Data validation","Data swamp",782,781,"Data preparation","Data operationalization",469,778,260,"Data governance","Data flow management","Data engineering","COAP","Cluster","Business intelligence","Blob storage",464,"Artificial intelligence",703,"Algorithm",472,22]),o.os(o.s,4,[11,92,18,14,127,108,5,78,128,129,69,0,15,26,3,19,16,12,17]),o.os(o.s,0,[29,11,18,14,22,0,15,26,3,19,16,12,17]),o.ref(5)]),o.ge(1)),2592e6),o.cw(1,o.o([o.ref(5),o.os(o.s,5,[11,92,18,14,127,108,5,78,128,129,69,0,15,26,3,19,16,12,17])]),o.ge(1))),o.cw("WebinarRegister",o.o([o.os(o.s,["title"],[29,11,18,14,22,0,15,26,3,19,16,12,17]),o.os(o.s,["zone"],[18,14,22,0,15,26,3,19,16,12,17])]),o.ge(1)))),106067:o.q(o.cw(0,o.t,o.ge(1))),106068:o.q(o.cw(0,o.t,o.ge(1))),106264:o.q(o.tw(o.cw(0,o.o([o.ref(4),o.os(o.s,0,[1,150,95,82,10,34,37,4,168,86,171,21,682]),o.os(o.s,2,[1,1097,95,82,10,34,37,4,1305,86,437,21,682]),o.os(o.s,3,[1,150,95,82,10,34,37,4,168,86,171,21,682])]),o.ge(2)),7776e6)),106265:o.q(o.tw(o.cw(0,o.ref(1),o.ge(2)),7776e6)),106266:o.q(o.tw(o.cw(0,o.o([o.os(o.s,4,[146,89,102,103,92,18,14,127,108,5,78,128,129,69,0,15,19,16,12,17]),o.os(o.s,0,[29,89,102,103,18,14,22,0,15,19,16,12,17]),o.os(o.s,2,[29,89,102,103,18,14,22,0,15,19,16,12,17]),o.os(o.s,3,[29,89,102,103,18,14,22,0,15,19,16,12,17])]),o.ge(2)),7776e6)),106267:o.q(o.tw(o.cw(0,o.ref(6),o.ge(2)),7776e6)),106268:o.q(o.tw(o.cw(0,o.o([o.ref(7),o.os(o.s,0,[125,47,126,326,2,6,88]),o.os(o.s,2,[125,47,315,1146,2,6,88]),o.os(o.s,3,[125,47,126,326,2,6,88])]),o.ge(2)),7776e6)),107367:o.q(o.ocq(o.ocq(o.tw(o.cw(0,o.o([o.os(o.s,0,[1083,149,1090,1114,1132,1226,1282,1368]),o.os(o.s,2,[1083,149,1090,1114,1132,1226,1282,1368])]),o.ge(1)),7776e6),o.itp("eyeota","13226",!1,"107367")),o.itp("eyeota","35714",!1,"107367"))),108546:o.q(o.ocq(o.ocq(o.cw(0,o.a([o.os(o.s,0,[456,537,"app store",541,"cert",558,"design document",583,"epic game","game design",1181,"game engine",597,341,"graphical user interface",602,"lumberyard",627,"mobile backend as a service",636,"physics engine","player input",648,650,669,"video game","virtual reality","websocket",681]),o.os(o.s,2,[456,537,1066,1069,1075,558,583,597,341,602,627,636,1279,648,650,669,"video-game",1359,1362,681])]),o.ge(1)),o.cw(2,o.os(o.s,6,[456,537,1066,1069,1075,558,583,597,341,602,627,636,1279,648,650,669,1359,1362,681]),o.ge(1))),o.cw(1,o.os(o.s,3,[1181,341]),o.ge(1)))),108966:o.q(o.cw(3,o.os(o.s,10,["1 to 49","100 to 249","250 to 499","50 to 99","500 to 999"]),o.ge(1))),108969:o.q(o.cw(3,o.os(o.s,10,["1,000 to 4,999","10,000 to 24,999","100,000+","25,000 to 49,999","5,000 to 9,999","50,000 to 99,999"]),o.ge(1))),110072:o.q(o.ocq(o.ocq(o.ocq(o.tw(o.cw(0,o.o([o.os(o.s,4,[7,69]),o.ps(7,"mariadb.com"),o.os(o.s,0,[202,"community server",328,60,85,661,"xpand trial"]),o.os(o.s,2,["cloud-database","community-server",1155,60,85,"sky-sql",661,"xpand"]),o.ps(8,917)]),o.ge(1)),7776e6),o.cw(1,o.o([o.os(o.cx,1,[60,202,85,328,7,69]),o.ps(["node","sponsor"],60),o.os(o.s,3,[202,328,85]),o.os(o.s,5,[7,69])]),o.ge(1))),o.tw(o.cw(2,o.ps(6,60),o.ge(1)),2592e6)),o.tw(o.cw(4,o.os(o.s,9,[202,"distributed database",328,60,85,661]),o.ge(1)),2592e6))),110121:o.q(o.cw(1,o.t,o.ge(1))),110597:o.q(o.tw(o.cw(0,o.o([o.os(o.s,4,[7,69,9,162]),o.os(o.s,0,[685,123,90,547,7,"code analysis","code complexity","code duplication","code-analysis","code-complexity","code-duplication",560,"cross-platform","data vizualization","data-vizualization",69,"dependencies","dependency management","dependency-management","deprecated","dynamic-analysis","entity framework","entity-framework","hibernate",606,"impact analysis","impact-analysis",216,9,219,"jetbrains","legacy code","legacy-code","maintenance","maven",162,"migration",231,75,"package",238,"refactoring","shared libraries","shared-libraries",666,"software-quality","spring",33,"static analysis","static-analysis","stored procedures","stored-procedures",99,244,"technical-debt","uml","visual studio","visual-studio",12])]),o.ge(1)),2592e6)),110605:o.q(o.ocq(o.ocq(o.itp("liveramp_Bombora","1005388079",!1,"110605"),o.itp("liveramp_Bombora","1000095794",!1,"110605")),o.itp("liveramp_DunandBradstreet","1003342659",!1,"110605"))),110607:o.q(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.itp("liveramp_Stirista","1000982129",!1,"110607"),o.itp("liveramp_Bombora","1000096334",!1,"110607")),o.itp("liveramp_Bombora","1005387449",!1,"110607")),o.itp("eyeota","12",!1,"110607")),o.itp("eyeota","35070",!1,"110607")),o.itp("eyeota","6632",!1,"110607"))),110716:o.q(o.tw(o.cw(0,o.os(o.cx,1,[47,88,6,126,"monitoring",133,2]),o.ge(1)),7776e6)),110769:o.q(o.tw(o.cw(0,o.os(o.cx,1,["development tools",1220,1212,9,79]),o.ge(1)),7776e6)),110771:o.q(o.cw(0,o.os(o.cx,1,[4,1,168,171,150]),o.ge(1))),110772:o.q(o.tw(o.cw(0,o.os(o.cx,1,["ai and machine learning",265,92,"databases",22,29]),o.ge(1)),7776e6)),110773:o.q(o.tw(o.cw(0,o.os(o.cx,1,[47,631,6,24,"cloud architecture","performance"]),o.ge(1)),7776e6)),112847:o.q(o.isp("liveramp_DZone_dzone","1011027731",!1,"112847")),112848:o.q(o.isp("liveramp_DZone_dzone","1011027741",!1,"112848")),112851:o.q(o.isp("liveramp_DZone_dzone","1011027751",!1,"112851")),113001:o.q(o.isp("liveramp_DZone_dzone","1011039731",!1,"113001")),113004:o.q(o.isp("liveramp_DZone_dzone","1011039721",!1,"113004")),113005:o.q(o.isp("liveramp_DZone_dzone","1011039761",!1,"113005")),113006:o.q(o.isp("liveramp_DZone_dzone","1011039741",!1,"113006")),113008:o.q(o.isp("liveramp_DZone_dzone","1011039791",!1,"113008")),113010:o.q(o.isp("liveramp_DZone_dzone","1011039681",!1,"113010")),113011:o.q(o.isp("liveramp_DZone_dzone","1011039711",!1,"113011")),113014:o.q(o.isp("liveramp_DZone_dzone","1011039781",!1,"113014")),113016:o.q(o.isp("liveramp_DZone_dzone","1011039691",!1,"113016")),113017:o.q(o.isp("liveramp_DZone_dzone","1011039751",!1,"113017")),113019:o.q(o.isp("liveramp_DZone_dzone","1011039771",!1,"113019")),113021:o.q(o.isp("liveramp_DZone_dzone","1011039701",!1,"113021")),113604:o.q(o.isp("liveramp_DZone_dzone","1011046971",!1,"113604")),113605:o.q(o.ocq(o.ocq(o.isp("liveramp_DZone_dzone","1011045131",!1,"113605"),o.itp("liveramp_DunandBradstreet","1000309946",!1,"113605")),o.itp("liveramp_Bombora","1005388829",!1,"113605"))),114681:o.q(o.isp("liveramp_DZone_dzone","1011076701",!1,"114681")),114833:o.q(o.isp("liveramp_DZone_dzone","1011142381",!1,"114833")),115381:o.q(o.isp("liveramp_Bombora_dzone","1011198851",!1,"115381")),115382:o.q(o.isp("liveramp_Bombora_dzone","1011198861",!1,"115382")),115383:o.q(o.isp("liveramp_Bombora_dzone","1011198871",!1,"115383")),115384:o.q(o.isp("liveramp_Bombora_dzone","1011198891",!1,"115384")),115609:o.q(o.isp("liveramp_Bombora_dzone","1011257751",!1,"115609")),115628:o.q(o.tw(o.cw(0,o.pc_(1,509),o.ge(1)),2592e6)),116089:o.q(o.cw(0,o.a([o.os(o.cx,1,["Data Warehouse","Apache Arrow","Apache Iceberg",702,31,567]),o.os(o.s,0,[29,1057,1061,567,31,20]),o.os(o.s,3,[29,1057,1061,567,31,20])]),o.ge(1))),116158:o.q(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.cw(0,o.os(o.s,0,[279,534,280,283,40,284,147,197,68,35,199,41,13,43,288,291,293,201,299,93,302,303,304,305,306,307,308,309,553,30,555,77,106,206,318,319,207,323,153,154,327,210,329,8,211,577,333,334,335,79,212,598,349,213,605,110,357,214,358,360,217,130,220,221,619,223,25,224,628,629,383,384,225,32,73,387,389,113,390,391,226,229,230,75,232,234,406,239,414,27,415,241,422,424,425,427,116,28,433,434,243,436,245,444,247,680]),o.ge(1)),o.cw(2,o.os(o.w,6,[142,101,143,141,8,181,180,196,151,139,272,271,264,251,134,28,192,268,27,255,267,189,73,30,138,43,270,269,140,262,259,252,178,68,"application-platform",813,"enterprise-application-development",217,212,"prescriptive-forecasting",75,"unidirectional-gateway",232,211,199,"new-relic",230,93,79,"apache-Cassandra",223,"integrated-cloud-services","dedicated-computing","sumo-logic",113,"beyond-security","cloud-managed","cloud-native",736,"cloud-app","data-platform","red-hat",241,753,220,"digital-integration-hub",197,"check-point",927,"micro-focus",915,"cloud-infrastructure",210,900,795,"elastic-compute","ca-technologies",214,247,234,"oracle-cloud",688,914,"multi-access-edge-computing",243,"Broadcom-limited","agentless-security",13,224,"micro-service",32,"smart-connected-products","server-infrastructure","amazon-web-service",248,"network-virtualization",229,"server-software",1040,221,"distribution-network-analysis",1068,174,213,"headless-bi","embedded-software",245,"cloud-management",239,144,"elastic-Kubernetes","native-cloud",35,"utility-bill-automation","cloud-orchestration","cloud-automation","system-management-software","cloud-integration",206,226,"remediation-as-code","seamless-integration",201,106,77,207,"infrastructure-as-code",841,"cloud-native-security",225,110,970]),o.ge(1))),o.cw(1,o.y(5,492),o.ge(1))),o.cw(0,o.os(o.cx,1,[142,101,143,141,8,181,180,196,151,139,272,271,264,251,134,28,192,268,27,255,267,189,73,30,138,43,270,269,140,262,259,252,178,68,214,291,243,207,284,813,335,217,212,406,75,444,232,211,199,391,230,93,79,"apache Cassandra",223,360,323,433,113,288,305,307,736,302,319,414,241,753,220,327,197,299,927,383,915,303,210,900,795,333,293,357,247,234,"oracle cloud",688,914,387,434,"Broadcom limited",279,13,224,384,32,427,424,280,248,390,229,425,1040,221,329,147,174,213,349,334,245,306,239,144,"elastic Kubernetes",389,35,"utility bill automation",308,"cloud automation",436,304,206,226,415,422,201,106,77,318,358,841,309,225,110,970]),o.ge(1))),o.cw(4,o.os(o.s,9,[279,534,280,283,40,284,147,197,68,35,199,41,13,43,288,291,293,201,299,93,302,303,304,305,306,307,308,309,553,30,555,77,106,206,318,319,207,323,153,154,327,210,329,8,211,577,333,334,335,79,212,598,349,213,605,110,357,214,358,360,217,130,220,221,619,223,25,224,628,629,383,384,225,32,73,387,389,113,390,391,226,229,230,75,232,234,406,239,414,27,415,241,422,424,425,427,116,28,433,434,243,436,245,444,247,680]),o.ge(1))),o.cw(0,o.os(o.s,3,[279,534,280,283,40,284,147,197,68,35,199,41,13,43,288,291,293,201,299,93,302,303,304,305,306,307,308,309,553,30,555,77,106,206,318,319,207,323,153,154,327,210,329,8,211,577,333,334,335,79,212,598,349,213,605,110,357,214,358,360,217,130,220,221,619,223,25,224,628,629,383,384,225,32,73,387,389,113,390,391,226,229,230,75,232,234,406,239,414,27,415,241,422,424,425,427,116,28,433,434,243,436,245,444,247,680]),o.ge(1)))),116530:o.q(o.ocq(o.cw(0,o.ps(2,1158),o.ge(1)),o.cw(0,o.ps(7,1158),o.ge(1)))),116684:o.q(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.itp("eyeota","6632",!1,"116684"),o.itp("liveramp_Bombora","1000096334",!1,"116684")),o.itp("liveramp_Stirista","1000302066",!1,"116684")),o.itp("eyeota","6642",!1,"116684")),o.itp("eyeota","35312",!1,"116684")),o.itp("liveramp_DunandBradstreet","1003342659",!1,"116684")),o.itp("liveramp_Bombora","1000095794",!1,"116684")),o.itp("liveramp_Bombora","1000095744",!1,"116684")),o.itp("liveramp_Bombora","1005389179",!1,"116684"))),117368:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[174,138,30,184,445,531,530,528,529,195,526,527,525,521,524,523,522,194,520,519,515,514,518,517,516,664,117,330,83,532,513,1028,511,508,507,979,957,172,506,505,504,502,499,497,496,494,493,491,490,157,489,487,484,188,215,481,823,495,814,480,479,478,475,474,473,152,179,465,463,459,100,461,175,457,144,142,101,143,141,8,181,180,196,151,139,512,510,483,6,477,476,260,258,105,125,13,120,121,135,734,136,733,735,820,468,164,1286,962,409,423,145,379,1023,1022,1024,1008,1007,798,797,261,796,274,21,1033,381,115,791,1032,273,439,99,431,170,1003,998,993,418,417,980,972,404,392,32,913,367,10,122,111,852,839,848,847,352,348,824,263,187,186,704,804,182,1e3,764,1110,754,36,256,93,742,726,253,287,249,720,198,710,282]),o.os(o.s,0,[282,1056,1062,40,125,198,1071,1078,13,287,148,1084,105,1093,1099,93,94,1109,36,312,1123,77,152,1140,153,154,2,8,330,332,337,80,1187,1190,348,352,1202,609,6,1206,1208,83,130,111,615,157,10,367,25,379,1234,381,32,392,404,164,409,1295,115,417,1297,418,423,1311,1318,1322,666,170,117,431,99,439,172,440,448,1358,21])]),o.ge(1)),7776e6)),117375:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[274,21,1033,381,115,791,1032,273,439,99,431,170,1003,998,993,418,417,980,972,404,392,32,913,367,10,122,111,852,839,848,847,352,348,824,263,187,186,704,804,182,1e3,764,30,1110,754,36,256,93,742,726,253,287,249,720,198,710,282]),o.os(o.s,0,[282,1056,1062,198,1071,1078,287,148,1084,1093,93,1109,36,1123,2,337,80,1190,348,352,1202,1206,1208,111,10,367,1234,381,32,392,404,1295,115,417,1297,418,1311,1318,1322,170,431,99,439,440,448,1358,21])]),o.ge(1)),7776e6)),117376:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[798,797,261,796,184]),o.os(o.s,0,[332])]),o.ge(1)),7776e6)),117377:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[532,445,531,529,528,195,530,379,527,526,525,524,1023,523,522,194,521,520,1022,1024,519,518,517,516,515,514,513,511,508,1008,1007,664,507,506,505,504,502,499,497,496,494,493,491,490,157,489,487,484,188,215,481,480,172,495,479,478,475,474,473,152,179,465,463,459,100,461,175,457]),o.os(o.s,0,[152,609,615,157,1217,379,666,172])]),o.ge(1)),7776e6)),117378:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[125,13,120,121,135,734,136,733,735,820,468,258,164,1286,962,409,423,145]),o.os(o.s,0,[125,13,1099,94,312,1140,1187,164,409,423])]),o.ge(1)),7776e6)),117379:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[174,215,512,510,188,483,6,477,476,260,258,105]),o.os(o.s,0,[40,105,312,6])]),o.ge(1)),7776e6)),117380:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[138,30,144,142,101,143,141,8,181,180,196,151,139]),o.os(o.s,0,[30,77,153,154,8,130,25])]),o.ge(1)),7776e6)),117381:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[184,445,531,530,528,529,195,526,527,525,521,524,523,522,194,520,519,515,514,518,517,516,664,117,330,83,532,513,1028,511,508,507,979,957,172,506,505,504,502,499,497,496,494,493,491,490,157,489,487,484,188,215,481,823,495,814,480,479,478,475,474,473,152,179,465,463,459,100,461,175,457]),o.os(o.s,0,[152,330,332,609,83,615,157,1217,117,172])]),o.ge(1)),7776e6)),117382:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[963,799,184,891,218,462,124,498,160,185,122,10,4,193,190,250,137,191,183,100,177,176,1,747,746,683,454,453,679,446,677,676,1351,675,674,118,670,1334,668,667,503,428,1316,665,662,659,657,421,420,419,658,656,649,647,644,1269,643,642,645,399,398,641,640,638,394,632,380,626,375,623,1229,620,1216,617,614,613,612,611,610,9,362,354,351,355,350,1192,1188,1186,1185,344,596,1174,339,588,338,586,585,584,582,581,1161,578,576,575,574,331,563,561,1108,1135,580,551,549,298,548,292,289,543,539,1105,300,544,43,286,281,277,275,981,1046,1037,449,1015,932,929,924,921,902,370,366,101,216,821,263,187,186,8,145,121,120,135,136,13,1047,1045,1044,1043,1036,1035,443,1026,984,33,983,997,995,660,990,988,167,982,1303,165,19,967,936,966,965,3,961,959,958,949,948,947,946,467,945,376,954,235,943,942,935,939,938,925,919,373,1228,158,860,899,616,859,858,857,861,856,851,840,842,607,630,836,830,829,828,827,603,601,826,825,819,817,557,816,815,812,386,811,594,810,805,794,793,572,786,785,783,780,777,739,740,562,738,1025,767,761,760,759,758,311,818,737,546,732,731,723,721,722,712,535,278,696,695,686,533,460,687,684,413,447,83,163,388,621,343,486,894,895,893,877,755,1038,1027,933,931,801,773,744,725,724,897,896,887,888,892,889,890,886,266,882,883,884,885,881,878,879,876,874,873,871,870,880,875,872,835,792,869,867,863,864,868,866,865,485,800,455,432,117,411,365,364,347,345,595,294,297,276,402,369,368,1371,452,1031,441,1018,1016,509,1012,1006,426,992,991,987,978,977,964,956,408,639,359,589,571,937,768,634,928,926,382,903,855,854,853,109,342,808,261,698,79,593,591,807,806,803,579,573,769,316,757,745,290,728,545,28,254,692,691,689,690,1017,715,714,713,711,709,708,705,706]),o.os(o.s,0,[685,533,275,276,"abap",277,278,1,535,281,124,1058,538,1059,1063,1064,"apache tomcat",1065,539,"assembly language",286,1079,1081,43,543,544,149,289,290,292,"c language","c programming language",546,294,297,548,298,549,1101,1102,551,1103,1104,300,1111,311,1112,1113,"common language runtime","compiled language","computer language","computer programming",557,"control language",316,561,562,107,1137,563,"defensive programming",572,8,"dynamic programming",331,575,576,578,580,581,1162,1163,582,584,585,586,"event-driven programming",1165,1166,587,338,588,339,594,596,79,1179,342,"generic programming",80,343,344,345,"graphql",347,109,601,603,350,351,81,354,355,"imperative programming",359,216,362,364,83,9,1213,365,366,611,612,1215,613,"jshint",98,"jsoup",614,616,10,368,158,1221,620,369,370,373,623,1230,375,626,376,378,380,382,630,632,163,386,1243,1245,388,1247,1248,1251,1252,1253,394,638,1256,640,"openssl",641,398,399,643,402,644,645,235,646,647,649,"prolog",408,3,411,651,413,240,656,"ruby programming language",165,419,420,1302,421,167,657,658,"scripting language",4,"sed",659,1308,660,426,662,"smalltalk",665,428,1317,1330,117,1331,33,667,668,670,432,1335,118,1337,441,674,675,"typescript",443,1352,676,677,446,447,449,1360,1363,679,"winjs",452,453,1372,454,1374,683,455])]),o.ge(1)),7776e6)),117383:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[455,432,117,411,365,364,347,345,595,294,297,276,486,402,369,368,1371,452,1031,441,1018,118,1016,509,1012,503,1006,426,992,991,987,978,977,498,964,956,408,639,359,589,571,937,768,634,928,926,163,382,903,855,854,853,83,218,109,342,808,261,698,79,593,591,807,806,803,579,573,769,316,757,745,467,290,728,545,28,254,692,691,689,690,460,1017,715,714,713,711,709,708,705,462,706,124]),o.os(o.s,0,[276,124,1058,538,1059,89,1063,1064,1065,"asp.net",149,545,290,"cakephp",294,297,1102,1113,316,571,573,579,1165,1166,589,591,593,595,79,1179,342,345,347,109,359,218,364,83,365,1215,368,1221,369,382,163,1245,1247,634,639,"object-oriented programming",402,408,"pytorch",411,"react native","scalatra",1308,426,1330,117,1331,28,432,1335,118,1337,441,"vb.net",452,455])]),o.ge(1)),7776e6)),117384:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[891,897,896,887,888,892,889,890,886,266,882,883,884,885,881,878,879,876,874,873,871,870,880,875,872,835,792,869,867,863,864,868,866,865,485,800,9]),o.os(o.s,0,[9])]),o.ge(1)),7776e6)),117385:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[218,462,124,498,413,447,83,163,388,621,343,486,894,895,893,877,755,1038,1027,933,931,801,773,744,725,724]),o.os(o.s,0,[124,538,1079,1081,1101,1112,1137,1163,343,218,83,"java script",1212,621,163,388,1251,1253,413,1352,447,1363])]),o.ge(1)),7776e6)),117387:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[683,454,453,679,446,677,676,1351,675,674,118,670,1334,668,667,503,428,1316,665,662,659,657,421,420,419,658,656,649,647,644,1269,643,642,645,399,398,641,640,638,394,632,380,626,375,623,1229,620,1216,617,614,613,612,611,610,9,362,354,351,355,350,1192,1188,1186,1185,344,596,1174,339,588,338,586,585,584,582,581,1161,578,576,575,574,331,563,561,1108,1135,580,551,549,298,548,292,289,543,539,1105,300,544,43,286,281,277,275,981,1047,1045,1044,1043,1036,1035,443,1026,984,33,983,997,995,660,990,988,167,982,1303,165,19,967,936,966,965,3,961,190,959,958,949,948,947,946,467,945,376,954,235,943,942,935,939,938,925,919,373,1228,158,860,899,616,859,858,857,861,856,851,840,842,607,630,836,830,829,828,827,603,601,826,825,819,817,557,816,815,812,386,811,594,810,185,805,794,793,572,786,785,783,780,777,739,740,562,738,1025,767,761,760,759,758,311,818,737,546,732,731,723,721,722,712,535,278,696,695,686,533,460,687,684]),o.os(o.s,0,[275,277,278,281,286,289,292,298,300,1111,311,107,331,574,338,339,344,350,351,81,354,355,362,610,617,373,375,376,378,380,386,394,1256,398,399,642,19,419,420,1302,421,167,428,33,118,443,446,1360,453,1372,454,1374])]),o.ge(1)),7776e6)),117388:o.q(o.tw(o.cw(0,o.a([o.os(o.s,0,[13,1103,1104,8,332,1162,80,"google chrome",216,1213,366,370,1230,"microsoft visual studio",1243,1248,1252,"pycharm","stack overflow",449,"visual studio code","xml editor"]),o.os(o.cx,1,[963,799,184,747,746,1046,1037,449,1015,932,929,924,921,902,370,366,101,216,821,263,187,186,8,145,121,120,135,136,13])]),o.ge(1)),7776e6)),117389:o.q(o.tw(o.cw(0,o.o([o.ref(3),o.os(o.s,0,[1049,1,587,10,407,240,4])]),o.ge(1)),7776e6)),117390:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[160,185,122,10,4,193,190,250,137,191,183,100,177,176,1,132,976,501,1009,1010,1019,975,500,974,934,450,194,285,1004,403,488,109,730,466,274,21,1041,1030,1029,273,195,175,1021,1020,99,985,1005,1002,1001,999,994,973,996,968,960,237,1278,955,802,405,923,922,385,37,920,918,377,911,909,908,907,906,905,904,34,898,850,401,849,356,834,833,831,809,140,790,789,787,784,772,771,317,179,766,765,314,295,741,253,134,716,1042,361,843,296]),o.os(o.s,0,[1049,1,1067,1070,285,148,1088,1092,295,296,314,1124,1131,317,1134,1136,208,1144,1147,1153,587,1169,109,1191,1195,1196,1199,356,1204,361,1214,10,34,1225,377,1233,1235,37,385,1236,1241,401,403,405,237,407,1283,1291,1296,240,4,1312,1319,1320,1321,1323,1324,132,1336,99,1339,1340,1341,1342,440,1355,1356,1366,21,1367,450])]),o.ge(1)),7776e6)),117391:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[450,1042,361,843,296]),o.os(o.s,0,[296,1199,361,1367,450])]),o.ge(1)),7776e6)),117392:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[274,21,1041,1030,1029,273,195,175,1021,1020,99,985,132,193,1005,1002,1001,999,994,4,501,500,973,996,968,960,237,1278,955,802,405,923,922,385,37,920,918,377,911,909,908,907,906,488,905,904,34,160,122,10,898,850,401,849,356,834,833,831,809,140,790,789,787,784,772,771,317,179,766,765,314,295,741,137,466,253,134,716,183,100,177,176,1]),o.os(o.s,0,[1,1067,1070,148,1089,"business requirements",1092,295,314,1124,1131,317,1134,1136,208,1144,1147,1153,1169,1191,1195,1196,356,1204,1214,10,34,1225,377,1233,1235,37,385,1236,1241,401,405,237,1283,1291,1296,"requirements analysis","requirements engineering",4,1312,1319,1320,1321,1324,"software project management",132,1336,99,1339,1340,1342,440,1355,1356,1366,21])]),o.ge(1)),7776e6)),117393:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[194,285,1004,403,488,109,730,466]),o.os(o.s,0,[285,1088,109,"lean manufacturing",403,1323,1341])]),o.ge(1)),7776e6)),117394:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[132,976,501,1009,1010,1019,975,500,974,934,137,191,160,4]),o.ref(0)]),o.ge(1)),7776e6)),117395:o.q(o.tw(o.cw(0,o.o([o.ref(3),o.ref(0)]),o.ge(1)),7776e6)),117396:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,["Topological data analysis","Exploratory data analysis","Data analysis expressions",776,"IT Operations Analytics","User behavior analytics","Behavioral analytics","Business analytics",702]),o.os(o.s,0,[29,1139])]),o.ge(1)),7776e6)),117397:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[19,"Spring Data","Personal data","Open data","Open Data Protocol","Datasource",719,"data type","Data stream",470,"Data quality","Master data management",779,468,"Data infrastructure","Data binding","Data access object",775,774,694,464,22,1375,1349,"Data structure","Data set",782,781,"Semantic data model","Standard data model",1095,"Erwin Data Modeler","Data modeling","data model","Data grid","Data cleansing",743]),o.os(o.s,0,[1095,22,1349,1375])]),o.ge(1)),7776e6)),117398:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,["MongoDB",917,"InnoDB","InfluxDB","HSQLDB","FoundationDB","Cosmos DB","DBpedia","CartoDB","Berkeley DB","ArangoDB","Apache CouchDB","Amazon DynamoDB","Db2 Database","Data store","CockroachDB",485,"Lightning Memory-Mapped Database",1120,1145,1338,131,1329,1172,1156,1298,1289,1271,1270,1207,1194,"Object database","Multi-model database",1050,1115,1073,1082,"Operational database",971,"XML database","Oracle NoSQL Database","Oracle Database","Key-value database","In-memory database","Document-oriented database","Distributed database","Database transaction","Database server","Database publishing","Database normalization","Database engine","Database dump","Database design","Database connection","Database application","Database administrator","Database abstraction layer","Comparative Toxicogenomics Database","Database index",257,472]),o.os(o.s,0,[1050,536,"apache couchdb","arangodb",1073,1082,"berkeley db","cartodb",204,1115,1120,"cosmos db","data store",69,"dbpedia",1145,1156,1172,"foundationdb",1194,"hsqldb",608,"innodb",1207,60,112,1270,1271,1289,1298,131,1329,1338])]),o.ge(1)),7776e6)),117399:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,["Metadata standard","Geospatial metadata",1200,"Metadata repository","Metadata",1152,471,"Digital Data Storage","Data storage","Oracle Data Mining",469,778,776,"Core Data",257,"Data acquisition","Data Interchange Format",775,774,"Chief data officer",743,121,120,719,"Aggregate data",694,464]),o.os(o.s,0,["abstract data type","aggregate data","array data type","azure data explorer",92,"change data capture","chief data officer",202,"core data","data access","data acquisition",1139,"data interchange format",108,5,"data storage",20,1152,1200,"metadata"])]),o.ge(1)),7776e6)),117400:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,["Windows IoT","IoTivity",265]),o.os(o.s,0,[363])]),o.ge(1)),7776e6)),117401:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,["Deep learning","Competitive intelligence",541,"Machine-generated data",1361,1184,1345,1175,1197,1048,"Machine-readable data","Machine learning",458]),o.os(o.s,0,[1048,146,541,"competitive intelligence",324,1175,1184,1197,374,"machine-generated data","machine-readable data",1345,1361])]),o.ge(1)),7776e6)),117402:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[174,953,952,951,189,950,930,266,73,138,30,986,144,8,151,139,36,192,178,68,272,271,264,251,134,28,268,27,255,267,32,43,270,269,140,262,259,252,393,1039,442,1014,1011,846,845,762,756,729,24,844,788,325,470,254,717,969,231,940,912,910,901,727,718,700,371,161,101,143,142,141,1034,1013,944,838,837,822,770,763,752,751,750,749,257,256,748,7,135,136,145,121,120,13,249,693,248,701,707,699,181,180,196,215,512,510,188,483,6,477,476,260,258,105]),o.os(o.s,0,[1055,40,68,41,13,43,149,105,7,36,312,1121,77,560,325,153,154,8,6,1211,130,25,161,371,1227,32,73,1250,393,84,1260,231,1272,1273,1274,1275,27,166,24,116,28,442,1364])]),o.ge(1)),7776e6)),117403:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[953,952,951,189,950,930,266,73,969,231,940,912,910,901,727,718,700,371,161,101,143,142,141]),o.os(o.s,0,[1211,130,161,371,1227,73,1250,84,231,1272,1273,1274,1275])]),o.ge(1)),7776e6)),117404:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[986,144,8,151,139,36,192,178,68,1034,1013,944,838,837,822,770,763,752,751,750,749,257,256,748,7,135,136,145,121,120,13,249,693,248,701,707,699]),o.os(o.s,0,[1055,68,41,13,7,36,1121,77,560,8,25,1260,166])]),o.ge(1)),7776e6)),117405:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[393,1039,442,1014,1011,846,845,762,756,729,24,844,788,325,470,254,717]),o.os(o.s,0,[149,325,393,24,442,1364])]),o.ge(1)),7776e6)),117406:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,1,[272,271,264,251,134,28,192,268,27,255,267,189,73,32,30,138,43,270,269,140,262,259,252,178,68]),o.os(o.s,0,[68,43,30,32,73,27,116,28])]),o.ge(1)),7776e6)),98287:o.q(o.cw(0,o.t,o.ge(1)))}||{},{"!UpdateSecondPartyData":["112847","112848","112851","113001","113004","113005","113006","113008","113010","113011","113014","113016","113017","113019","113021","113604","113605","114681","114833","115381","115382","115383","115384","115609"],"!UpdateThirdPartyData":["105196","105197","105200","105310","105462","105613","105614","105615","107367","110605","110607","113605","116684"],Download:["102199","102201","103451","103452","103453","103454","103455","103456","103457","103459","103460","103461","103464","103622","103626","103807","104165","104621","105763","106058","106066","108546","110072","110121","116158"],LinkClick:["102199","102201","103622","103626","103807","104165","104621","105763","106058","108546","110072","116158"],Pageview:["102199","102201","103451","103452","103453","103454","103455","103456","103457","103459","103460","103461","103464","103622","103626","103807","104165","105763","106058","106059","106060","106061","106063","106064","106065","106066","106067","106068","106264","106265","106266","106267","106268","107367","108546","110072","110597","110716","110769","110771","110772","110773","115628","116089","116158","116530","117368","117375","117376","117377","117378","117379","117380","117381","117382","117383","117384","117385","117387","117388","117389","117390","117391","117392","117393","117394","117395","117396","117397","117398","117399","117400","117401","117402","117403","117404","117405","117406","98287"],Register:["108966","108969"],Search:["110072","116158"],WebinarRegister:["106066"]}||{})}();!function(e){const t=self;function n(e,n,r,o){function a(n){if("function"!=typeof t.postMessage)return e.ports[0].postMessage(n);t.postMessage(n)}if(!r)return a([n,null,o]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",r),a([n,r])}t.addEventListener("message",(function(t){if(r=t,!Array.isArray(r.data)||2!==r.data.length)return;var r;const o=t.data,[a,i]=o;if("function"==typeof e)return function(e,t,r,o){const a=function(e,t){try{return{res:e(t)}}catch(e){return{err:e}}}(t,o);return Boolean(null===(i=a)||void 0===i?void 0:i.err)?n(e,r,a.err):!(c=a.res)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then?n(e,r,null,a.res):void a.res.then((function(t){n(e,r,null,t)}),(function(t){n(e,r,t)}));var i,c}(t,e,a,i);n(t,a,new Error("Please pass a function into register()."))}))}((function(e){switch(e.type){case"bootstrap":return _n(e.stateMap,...e.payload,Bn,Tn);case"updateEnvironment":return function(e,t,n,r,o,a){return r.segments&&(xn(r.segments),jn(r.segments),An(),Dn.setSegmentActivation=Mn(e)),r.lookalikeModels&&(zn=!0),r.segments&&(e=>{const t=Object.keys(e).length,n="1p"in e;return n&&t>1||!n&&t>0})(r.segments)&&(kn=!0),Dn=Object.assign(Object.assign(Object.assign(Object.assign({},Dn),r.viewId?{getCurrentView:()=>r.viewId}:{}),r.sessionId?{getCurrentSession:()=>r.sessionId}:{}),r.lookalikeModels?{getLookalikeModels:()=>r.lookalikeModels}:{}),Cn(e,t,n,qn.length>0?qn:[Sn],"updateEnvironment",o,a)}(e.stateMap,...e.payload,Bn,Tn);case"updateLAL":return function(e,t,n,r,o,a){return Dn.getLookalikeModels=()=>r,zn=!0,On(e,t,n,Sn,"updateLAL",o,a)}(e.stateMap,...e.payload,Bn,Tn);case"updateTPD":return function(e,t,n,r,o,a){jn(r),An(),Dn.setSegmentActivation=Mn(e),kn=!0;const i=Cn(e,t,n,qn.length>0?qn:[Sn],"updateTPD",o,a);return qn=[],i}(e.stateMap,...e.payload,Bn,Tn);case"updateExternalState":return function(e,t,n,r,o){return On(e,t,n,Sn,"updateExternalState",r,o)}(e.stateMap,...e.payload,Bn,Tn);case"process":return Cn(e.stateMap,...e.payload,"event",Bn,Tn);case"processTransitions":return function(e,t,n,r,o,a){return Cn(e,t,n,r,"transition",o,a)}(e.stateMap,...e.payload,Bn,Tn);case"noop":return{diff:{},errors:[]}}}))})();',"Worker",void 0,void 0)}var Kt=n(64),$t=n(6013),Ft=n(7545),Jt=n(7121);class Qt{constructor(e,t,n){this.externalData=e,this.localQueries=t,this.externalQueries=n,this.queryCodesAsList=[],this.queryCodesAsMap={};const r=this.externalData.getExternalJsonData(Kt.mL)||[],o=(0,Ut.fS)((()=>[]))((0,Ut.Y3)((()=>r.filter((e=>(0,Jt.UC)(e,this.localQueries,this.externalQueries))))));this.add(o)}has(e){return e in this.queryCodesAsMap}add(e){return(0,Rt.zG)(e.forEach((e=>this.queryCodesAsMap[e]=!0)),(e=>this.updateSegmentsList()))}remove(e){return(0,Rt.zG)(e.forEach((e=>delete this.queryCodesAsMap[e])),(e=>this.updateSegmentsList()))}getAllAsList(){return this.queryCodesAsList}getStdAsList(){return this.queryCodesAsList.filter((e=>e>=1e7))}getAllAsMap(){return this.queryCodesAsMap}getUpdates(e){const t=[],n=[];return Object.entries(e).forEach((([e,r])=>{const o=parseInt(e),i=(null==r?void 0:r.result)||{result:!1},s=!0===(null==i?void 0:i.result)&&!(o in this.queryCodesAsMap),a=!1===(null==i?void 0:i.result)&&o in this.queryCodesAsMap;s?t.push(o):a&&n.push(o)})),{entered:t,exited:n}}flush(){this.externalData.setExternalJsonData(Kt.mL,this.getAllAsList())}reset(){this.externalData.removeExternalData(Kt.mL),this.queryCodesAsList=[],this.queryCodesAsMap={}}updateSegmentsList(){this.queryCodesAsList=Object.keys(this.queryCodesAsMap).map((e=>parseInt(e)))}}const Vt={98287:"0c8b70cdb7",102199:"fd04aaab22",102201:"4fb6c7c28e",103451:"01cca993d9",103452:"6d63a0b2bf",103453:"5696039025",103454:"6575088889",103455:"b8f08243b0",103456:"ead689b0d5",103457:"fb28beb54a",103459:"674d923a7b",103460:"48d0327997",103461:"1b2195c34a",103464:"b5acd01ad4",103622:"68a38c2d9f",103626:"d626c11bb6",103807:"a5bac122c4",104165:"6e44dc1a29",104621:"8e511e6b65",105196:"178eabd3d4",105197:"7d13e27d49",105200:"7761907cae",105310:"03c624b30a",105462:"8fd216ee10",105613:"f732539ce0",105614:"31e1041e27",105615:"14c7ff39d0",105763:"4159172e38",106058:"7e5d809528",106059:"0c8b70cdb7",106060:"89f8ee6d61",106061:"6891fedbd7",106063:"894e7c3668",106064:"3513a3d5ef",106065:"0c8b70cdb7",106066:"9b521bd7ed",106067:"0c8b70cdb7",106068:"0c8b70cdb7",106264:"19700cf527",106265:"2d6a13b243",106266:"68803361f6",106267:"bb528c05c1",106268:"afb3d71fec",107367:"7cda9604ff",108546:"48d28a77bb",108966:"a46f08d5cd",108969:"6a5a529b79",110072:"bd0cc75f1c",110121:"e72ef84c1e",110597:"bdb597806a",110605:"3943e69fac",110607:"1d7a8c55fa",110716:"0deed55f1d",110769:"5b00308d48",110771:"33d47b35c1",110772:"90e8b35906",110773:"b4a5f6a747",112847:"03e66d8510",112848:"66829ab2a0",112851:"eeb8ed20d8",113001:"659b33d62f",113004:"136e22c7dc",113005:"34566f69dc",113006:"2ab883433d",113008:"08f7e01d24",113010:"6fdc22232b",113011:"7d1e8e4068",113014:"523c8f0de4",113016:"c679a22817",113017:"9ca2ad0841",113019:"8ee7916714",113021:"0cb512fe3c",113604:"8041a0445f",113605:"80d4218638",114681:"973a92132b",114833:"281fe80c60",115381:"1f2d9bb6c2",115382:"77a5b78d88",115383:"fce2a097d1",115384:"4422fa0578",115609:"84e954f2a0",115628:"3eda40de0d",116089:"29fcc3f652",116158:"ea6bdd17ec",116530:"21fab90ffd",116684:"0da1ab3480",117368:"c174c47ba6",117375:"c0fbfe3812",117376:"be68eb77c1",117377:"05c73ea2b8",117378:"becdfa3df8",117379:"060b8e28e9",117380:"c13c4feaad",117381:"ee2cd2a9da",117382:"14b1e76747",117383:"770baa7532",117384:"18c9e2104d",117385:"e56d73f577",117387:"2249614ea5",117388:"3a51922797",117389:"6c7bba8500",117390:"c79519a454",117391:"0f392b9c7e",117392:"06d58499b7",117393:"3317021655",117394:"4adfd3af0f",117395:"e4c5872628",117396:"90680faeaf",117397:"859ede0c0b",117398:"475a36d0c0",117399:"152e5ee3f6",117400:"9c71903de0",117401:"7493fcb9c1",117402:"2ff15f9e99",117403:"03f809817f",117404:"10bb3be68c",117405:"929cefe67a",117406:"b2e2f3dbba"},Ht=new Set([]);function Yt(){return(0,Bt.h)(new Wt)}class Zt{constructor(e,t,n,r,o,i,s,a,c,u,l,d,p,g,m,h=new Qt(p,Vt,Ht)){this.logger=e,this.network=t,this.permutiveData=n,this.sessionManager=r,this.messages=o,this.customProperties=i,this.realtime=s,this.permutive=a,this.queryWorker=c,this.trace=u,this.userId=l,this.viewId=d,this.externalData=p,this.transitionDebounceTime=g,this.transitionDebounceMaxTime=m,this.userSegments=h,this.queryMetadata=Vt,this.isWorkerReady=!1,this.extStateMap={},this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set,this.scheduler=new Ft.b(this.transitionDebounceTime,this.transitionDebounceMaxTime);this.debouncedProcessTransitions=this.scheduler.scheduleAccumulated((e=>this.processTransitions(e)),{concat:(e,t)=>e.concat(t),empty:[]});const f=this.permutiveData.getData("internal_query_states")||{},_=this.permutiveData.getData("external_query_states")||{},v=Object.keys(this.queryMetadata),y=Object.keys(f);this.hasNewOrModifiedQueries=v.length!==y.length||v.filter((e=>{var t;return this.queryMetadata[e]!==(null===(t=f[e])||void 0===t?void 0:t.checksum)})).length>0,e.log("QueryManager has new or modified queries",this.hasNewOrModifiedQueries);const b=this.hasNewOrModifiedQueries?(0,$t.fl)(f,(e=>{var t;return(null===(t=f[e])||void 0===t?void 0:t.checksum)===this.queryMetadata[e]})):f;this.extStateMap=this.hasNewOrModifiedQueries?(0,Rt.zG)((0,$t.fl)(_,(e=>e in b)),(e=>(this.permutiveData.setData("external_query_states",e),e))):_,this.stateMap={value:b,promise:Promise.resolve(b)};this.permutiveData.getData("query_states")&&this.permutiveData.setData("query_states",null)}bootstrap(e){const t=this.trace.startSpan("worker_bootstrap");return this.postMessage((t=>{const n={type:"bootstrap",payload:[this.queryMetadata,this.extStateMap,{segments:{"1p":this.userSegments.getAllAsMap()},sessionId:this.sessionManager.getSessionId(),viewId:this.viewId.get(),lookalikeModels:{}},e],stateMap:t};return this.queryWorker.postMessage(n)})).then((e=>(t.finish(),e)))}updateEnvironment(e){return this.postMessage((t=>this.queryWorker.postMessage({type:"updateEnvironment",payload:[this.queryMetadata,this.extStateMap,e],stateMap:t})))}updateLAL(e){return this.postMessage((t=>this.queryWorker.postMessage({type:"updateLAL",payload:[this.queryMetadata,this.extStateMap,e],stateMap:t})))}updateTPD(e){return this.postMessage((t=>this.queryWorker.postMessage({type:"updateTPD",payload:[this.queryMetadata,this.extStateMap,e],stateMap:t})))}process(e,t){return(0,Jt.AG)(e)?this.debouncedProcessTransitions([e]):this.processStandard([e],t)}updateExternalState(e){const t=(0,$t.b0)(e,((e,t)=>{const n=this.queryMetadata[e];return n&&t[n]?(0,Ut.Uo)(ot(t[n])):Ut.YP})),n=(0,$t.b0)(this.extStateMap,((e,t)=>(0,Ut.Uo)(ot(t)))),r=(e,t,n)=>(0,Rt.zG)((0,Ut.Y3)((()=>function(e,t){return Tt("join",e,t)}(e,t))),(0,Ut.fS)((()=>(this.network.error(`Failed to join external state for query: ${n}. Had ${nt(t)}, received ${nt(e)}}`,this.userId.get()),t)))),o=(0,$t.b0)(Object.assign(Object.assign({},n),t),((e,t)=>n[e]?(0,Ut.G)(rt(r(t,n[e],e))):(0,Ut.G)(rt(t))));this.permutiveData.setData("external_query_states",o),this.extStateMap=o;return this.postMessage((e=>this.queryWorker.postMessage({type:"updateExternalState",payload:[this.queryMetadata,this.extStateMap],stateMap:e})))}updateExternalSegments(e){const t={};for(const n of Object.keys(e)){const r=parseInt(n);!isNaN(r)&&Ht.has(r)&&(t[r]={result:{result:e[r]}})}const{entered:n,exited:r}=this.userSegments.getUpdates(t);this.trackSegmentsTransition(n,r),this.updateUserSegments(n,r);(n.length>0||r.length>0)&&this.messages.emit("permutive:segments:updated")}processStandard(e,t){return this.processImpl((t=>this.queryWorker.postMessage(Object.assign({type:"process"},this.makeProcessPayload()(t,e)))),e,t)}processTransitions(e){return this.processImpl((t=>this.queryWorker.postMessage(Object.assign({type:"processTransitions"},this.makeProcessPayload()(t,e)))),e,!1)}makeProcessPayload(){return(e,t)=>({payload:(0,Rt.bc)(this.queryMetadata,this.extStateMap,t),stateMap:e})}processImpl(e,t,n){return this.postMessage(e).then((e=>(0,Rt.zG)(n?this.setAsRealTimeifNeeded(t):(0,Rt.Q1)(),(t=>e))))}postMessage(e){return new Promise((t=>{this.stateMap.promise=this.stateMap.promise.then(e).then((({diff:e,errors:n})=>{const[r,o]=this.onStateChange(e,n);return t([e,o]),r})).catch((e=>(0,Rt.zG)(this.network.error(`Error during query execution. Got ${e}`,this.userId.get()),(e=>t([{},{segmentsEntered:new Set,segmentsExited:new Set}])),(e=>this.stateMap.value))))}))}onStateChange(e,t){return(0,Rt.zG)(t.length>0?this.network.error(`QL error(s). Got ${t.join("; ")}`,this.userId.get()):{},(t=>this.stateMap.value=Object.assign(Object.assign({},this.stateMap.value),e)),(e=>this.isWorkerReady?[e,this.onStateChangeReady(e)]:[e,{segmentsEntered:new Set,segmentsExited:new Set}]))}trackSegmentsTransition(e,t){e.forEach((e=>{this.trackTransition(!0,e),this.messages.emit("permutive:query:changed",{queryCode:e,result:{result:!0}})})),t.forEach((e=>{this.trackTransition(!1,e),this.messages.emit("permutive:query:changed",{queryCode:e,result:{result:!1}})}))}updateUserSegments(e,t){this.userSegments.add(e),this.userSegments.remove(t),this.userSegments.flush()}onStateChangeReady(e){const{entered:t,exited:n}=this.userSegments.getUpdates(e);this.trackSegmentsTransition(t,n),this.updateUserSegments(t,n),this.logger.log("Writing new segment and query state cache",e),this.permutiveData.setData("internal_query_states",e);const r=t.length>0||n.length>0;return(0,Rt.zG)(r,(e=>e?this.messages.emit("permutive:segments:updated"):{}),(e=>({segmentsEntered:new Set(t),segmentsExited:new Set(n)})))}trackTransition(e,t){const n=Kt.ED?this.customProperties.getCustomProps():{},r=Object.assign(Object.assign(Object.assign({},n),{segment_number:t}),{});e?this.segmentEntryQueryCodes.add(t):this.segmentExitQueryCodes.add(t),this.permutive.track(e?"SegmentEntry":"SegmentExit",r)}setAsRealTimeifNeeded(e){return!this.realtime.isRealtime()&&e.filter((e=>"Pageview"===e.name)).length>0?Promise.resolve(this.realtime.setAsRealtime(this.userSegments.getAllAsList().length)):Promise.resolve()}reset(){this.userSegments.reset(),this.permutiveData.setData("internal_query_states",{}),this.permutiveData.setData("external_query_states",{}),this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}}},7121:(e,t,n)=>{n.d(t,{AG:()=>a,UC:()=>i,Yh:()=>s});var r=n(6567),o=n(6013);const i=(e,t,n)=>e in t||(()=>{const t="number"==typeof e?e:parseInt(e);return!1===isNaN(t)&&n.has(t)})(),s=e=>(0,o.b0)(e,((e,t)=>t.state?(0,r.G)({[t.checksum]:t.state}):r.YP));function a(e){var t;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}},3253:(e,t,n)=>{n.d(t,{S:()=>s});var r=n(655),o=n(3735),i=n(6013);class s{constructor(e,t){var n;this.db=e,this.options=t,this.hasChanged=!1,this.options=null!==(n=this.options)&&void 0!==n?n:{},this.options.timeout_seconds=this.options.timeout_seconds||1800,this.options.session_data_key=this.options.session_data_key||"permutive-session",this.session_id=null}getSessionId(){return this.session_id}sessionHasChanged(){return this.hasChanged}decodeSessionData(e){return null===e?null:"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?Object.assign(Object.assign({},e),{last_updated:new Date(e.last_updated)}):null}reset(){return this.db.delete(this.options.session_data_key)}persistSessionData(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=e.last_updated.toISOString();yield this.db.put(Object.assign(Object.assign({},e),{last_updated:t}),this.options.session_data_key)}))}newSession(e){return this.hasChanged=!0,{session_id:(0,i.k$)(),last_updated:e}}hasExpired(e,t){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*this.options.timeout_seconds)}static initialise(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){const r=new s(t,n);e.deleteCookie(r.options.session_data_key);const i=new Date,a=yield r.db.get(r.options.session_data_key).catch(o.gn),c=r.decodeSessionData(a),u=null===c||r.hasExpired(i,c.last_updated)?r.newSession(i):Object.assign(Object.assign({},c),{last_updated:i});return yield r.persistSessionData(u),r.session_id=u.session_id,r}))}}},2747:(e,t,n)=>{n.d(t,{S:()=>h});var r=n(3735),o=n(787),i=n(6013),s=n(7545);class a{constructor(e,t,n,r,o){this.config=e,this.namespace=t,this.logger=n,this.network=r,this.userId=o,this.permutiveData={},this.permutiveDataSize=0,this.localStorageQueue=new Set,this.localStorageScheduler=new s.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.getDataChunk("misc")),this.getDataChunk("models")),this.getDataChunk("queries")),this.getDataChunk("tpd")),this.getDataChunk("enrichers"))}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),n=window.localStorage.getItem(t),r=(0,o.A)(n);return null===r?{}:(this.permutiveDataSize+=2*n.length,r)}chunkKeyToStorageKey(e){switch(e){case"models":return this.config.permutiveDataModelsKey;case"queries":return this.config.permutiveDataQueriesKey;case"tpd":return this.config.permutiveDataTPDKey;case"enrichers":return this.config.permutiveDataEnrichersKey;case"misc":return this.config.permutiveDataMiscKey;default:return(0,i.Fi)(e)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,n]=this.dataKeyToChunkInfo(e);return(0,i.Z_)(this.network,this.userId,(()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(n))))()}dataKeyToChunkInfo(e){const t=e=>(0,i.eu)(this.permutiveData,e);switch(e){case"models_data":case"models_last_updated":return[this.chunkKeyToStorageKey("models"),t(c)];case"query_states":case"internal_query_states":case"external_query_states":case"state_offset":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(u)];case"third-party-data":case"third-party-data-session-id":case"third-party-data-usage":return[this.chunkKeyToStorageKey("tpd"),t(l)];case"enricher:geoip":return[this.chunkKeyToStorageKey("enrichers"),t(d)];case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:twitter_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(p)];default:return(0,i.Fi)(e)}}}const c=["models_data","models_last_updated"],u=["query_states","internal_query_states","external_query_states","state_offset","event-source-id"],l=["third-party-data","third-party-data-session-id","third-party-data-usage"],d=["enricher:geoip"],p=["identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:twitter_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"];var g=n(590);const m=e=>{const{logger:t,consentTracking:n}=e,r=e=>{t.debug(`Data Store: Failed to write ${e} as consent is revoked`)};return e=>class extends e{constructor(){super(...arguments),this.writeData=(0,g.vX)(super.writeData.bind(this),r,n.isRevoked)}}},h=(e,t,n,o,i,s)=>new((0,r.zG)(a,m({consentTracking:s,logger:n})))(e,t,n,o,i)},1823:(e,t,n)=>{n.d(t,{$:()=>o});var r=n(6013);class o{constructor(e){this.permutiveData=e,this.eventSourceId=e.getData("event-source-id")||this.generateAndStoreEventSourceId()}get(){return this.eventSourceId}generateAndSet(){this.eventSourceId=this.generateAndStoreEventSourceId()}generateAndStoreEventSourceId(){const e=(0,r.k$)();return this.permutiveData.setData("event-source-id",e),e}}},7738:(e,t,n)=>{n.d(t,{L:()=>r});class r{constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}},1728:(e,t,n)=>{n.d(t,{u:()=>r});class r{constructor(e,t){this.metrics=e,this.messages=t}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){this._isRealtime=!0,this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{}),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){this._isReady=!0,this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{sdk_version:"v19.24.1"}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},2472:(e,t,n)=>{n.d(t,{a:()=>s});var r=n(655),o=n(3735),i=n(356);class s{constructor(e,t,n,r,o,i,s,a){this.config=e,this.localStorage=t,this.logger=n,this.queryManager=r,this.permutiveData=o,this.eventSourceId=i,this.cookies=s,this.externalData=a}reset(){return(0,r.mG)(this,void 0,void 0,(function*(){return this.logger.log("Resetting State"),(0,o.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>(0,i.XP)({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfwqp:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,_pclmc:!0,"permutive-events-cache":!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.queryManager.reset()),(e=>this.permutiveData.reset()),(e=>this.eventSourceId.generateAndSet()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataModelsKey),this.localStorage.delete(this.config.permutiveDataQueriesKey),this.localStorage.delete(this.config.permutiveDataTPDKey),this.localStorage.delete(this.config.permutiveDataEnrichersKey),this.localStorage.delete(this.config.permutiveDataMiscKey)])),o.Q1)}))}}},1714:(e,t,n)=>{n.d(t,{N:()=>h,e:()=>g});var r=n(2688),o=n(7183),i=n(70),s=n(3735),a=n(477),c=n.n(a);function u(){return c()('/*! permutive-javascript-sdk v19.24.1 (web) (built 2022-08-18T14:36:11.675Z) */(()=>{"use strict";const n=()=>({kind:"null",value:null}),r=n=>({kind:"string",value:n}),t=n=>({kind:"number",value:n}),e=n=>({kind:"array",value:n}),u=n=>({kind:"object",value:n}),i=n=>n,o=()=>({kind:"bottom"}),c=n=>({kind:"inner",a:n}),a=n=>({kind:"top",error:n}),s=n=>({kind:"unbounded",group:n}),f=(n,r)=>({kind:"windowed",key:r,group:n}),l=(n,r,t)=>({kind:"countLimit",n:t,limit:r,group:n}),d=(n,r,t)=>({kind:"uniqueLimit",n:t,limit:r,group:n}),p=n=>({kind:"numberGroup",group:n}),m=n=>({kind:"stringGroup",group:n}),g=n=>({kind:"tuple",tuple:n}),v=n=>({state:n}),h=(n,r)=>({commands:n,payload:r});function k(n){return n}function w(n,r,t,e,u,i,o,c,a){switch(arguments.length){case 1:return n;case 2:return r(n);case 3:return t(r(n));case 4:return e(t(r(n)));case 5:return u(e(t(r(n))));case 6:return i(u(e(t(r(n)))));case 7:return o(i(u(e(t(r(n))))));case 8:return c(o(i(u(e(t(r(n)))))));case 9:return a(c(o(i(u(e(t(r(n))))))));default:for(var s=arguments[0],f=1;f<arguments.length;f++)s=arguments[f](s);return s}}var y=function(n){return{equals:function(r,t){return r===t||n(r,t)}}},b=function(n){return y((function(r,t){for(var e in n)if(!n[e].equals(r[e],t[e]))return!1;return!0}))},x=function(n){return function(r,t){return r===t||0===n(r,t)}},j=function(n){return{equals:x(n),compare:function(r,t){return r===t?0:n(r,t)}}},N=function(n){return function(r){return j((function(t,e){return r.compare(n(t),n(e))}))}},q=function(n){return function(r,t){return-1===n.compare(r,t)}},L=function(n){return function(r,t){return 1===n.compare(r,t)}},O=function(n){return function(r,t){return r===t||n.compare(r,t)>-1?r:t}};var M={equals:function(n,r){return n===r}},S={equals:M.equals,compare:function(n,r){return n<r?-1:n>r?1:0}};const G=(n,r)=>{switch(n.kind){case"bottom":return{kind:"bottom"};case"inner":return c(r(n.a));case"top":return a(n.error)}},E=n=>j(((r,t)=>{if("bottom"===r.kind&&"bottom"===t.kind)return 0;if("bottom"===r.kind)return-1;if("bottom"===t.kind)return 1;if("top"===r.kind&&"top"===t.kind)return S.compare(r.error,t.error);if("top"===r.kind)return 1;if("top"===t.kind)return-1;if("inner"===r.kind&&"inner"===t.kind)return n.compare(r.a,t.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var _=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},A=function(n){return"Some"===n._tag},$={_tag:"None"},I=function(n){return{_tag:"Some",value:n}},C=function(n){return"Left"===n._tag},z=(Object.prototype.hasOwnProperty,function(n){return _([n[0]],n.slice(1))});var J=$,P=I;function R(n){return function(r){return n(r)?P(r):J}}var F=function(n){return"Left"===n._tag?J:P(n.right)},W=function(n){return{equals:function(r,t){return r===t||(H(r)?H(t):!H(t)&&n.equals(r.value,t.value))}}},B=function(n){return{equals:W(n).equals,compare:function(r,t){return r===t?0:D(r)?D(t)?n.compare(r.value,t.value):1:-1}}},T=function(n){return function(r){return H(r)?J:P(n(r.value))}},U=F,D=A,H=function(n){return"None"===n._tag},K=function(n){return function(r){return H(r)?n():r.value}};var Q;Q=void 0;var V=function(n){return n[0]},X=V;var Y=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},Z=function(n){return n.length>0},nn=function(n,r){return n<0||n>=r.length},rn=function(n){return function(r){return Y([n],r)}},tn=rn,en=function(n){return function(r){return Y(Y([],r),[n])}},un=en,on=z,cn=function(n){return Z(n)?I(n):$},an=function(n){return function(r){for(var t=Math.max(0,Math.floor(r)),e=[n(0)],u=1;u<t;u++)e.push(n(u));return e}};var sn=on;var fn=function(n){return function(r){var t=Math.max(1,n);return t>=r.length?[sn(r),[]]:[w(r.slice(1,t),tn(dn(r))),r.slice(t)]}},ln=function(n){return y((function(r,t){return r.length===t.length&&r.every((function(r,e){return n.equals(r,t[e])}))}))},dn=X;var pn={equals:function(n,r){return n===r}},mn={equals:pn.equals,compare:function(n,r){return n<r?-1:n>r?1:0}};var gn=function(n,r){return function(t){for(var e=t.length,u=n,i=0;i<e;i++)u=r(i,u,t[i]);return u}};var vn=function(n){return 0===n.length},hn=Z,kn=tn,wn=un,yn=function(n,r){return n<=0?[]:an(r)(n)};var bn=nn,xn=function(n){return function(r){return bn(n,r)?qn(r):r.slice(0,n)}};var jn=function(n,r){for(var t=n.length,e=0;e<t&&r(n[e]);e++);return e};var Nn=function(n){return function(r){return n<=0||vn(r)?qn(r):n>=r.length?[]:r.slice(n,r.length)}};var qn=function(n){return n.slice()},Ln=function(n){return vn(n)?[]:n.slice().reverse()},On=function(n){return function(r){return r.length<=1?qn(r):r.slice().sort(n.compare)}},Mn=function(n,r,t){for(var e=[],u=Math.min(n.length,r.length),i=0;i<u;i++)e[i]=t(n[i],r[i]);return e};var Sn=function(n){return function(r){return n>=1&&hn(r)?fn(n)(r):vn(r)?[qn(r),[]]:[[],qn(r)]}};var Gn=function(n){return function(r){return w(r,function(n){return function(r){for(var t=[],e=0;e<r.length;e++)t.push.apply(t,n(e,r[e]));return t}}((function(r,t){return n(t)})))}},En=function(n){return function(r){for(var t=[],e=0;e<r.length;e++){var u=n(e,r[e]);A(u)&&t.push(u.value)}return t}},_n=function(n){return En((function(r,t){return n(t)}))},An=_n(k),$n=gn,In=function(n){var r=Cn(n);return function(n){return r((function(r,t){return n(t)}))}},Cn=function(n){return function(r){return $n(n.of([]),(function(t,e,u){return n.ap(n.map(e,(function(n){return function(r){return w(n,wn(r))}})),r(t,u))}))}},zn=function(n){return j((function(r,t){for(var e=r.length,u=t.length,i=Math.min(e,u),o=0;o<i;o++){var c=n.compare(r[o],t[o]);if(0!==c)return c}return mn.compare(e,u)}))},Jn=function(n){return{_tag:"Left",left:n}},Pn=function(n){return{_tag:"Right",right:n}},Rn=function(n,r){return w(n,Bn(r))},Fn=function(n,r){return w(n,Un(r))},Wn="Either",Bn=function(n){return function(r){return Hn(r)?r:Pn(n(r.right))}},Tn=Pn,Un=function(n){return function(r){return Hn(r)?r:Hn(n)?n:Pn(r.right(n.right))}},Dn={URI:Wn,map:Rn,ap:Fn,of:Tn},Hn=C;var Kn=function(n){return-1===n?1:1===n?-1:0};function Qn(n,r){return An(n.map(r))}function Vn(n,r,t,e){const u=(n,r)=>{if(0===n.length)return An(r.map((n=>P({1:n[1],2:t(J,P(n[2]))}))));if(0===r.length)return An(n.map((n=>P({1:n[1],2:t(P(n[2]),J)}))));if(n.length>0&&r.length>0&&q(e)(n[0][1],r[0][1])){const[e,...i]=n,o=e[1],c=e[2];return kn({1:o,2:t(P(c),J)})(u(i,r))}if(n.length>0&&r.length>0&&L(e)(n[0][1],r[0][1])){const[e,...i]=r,o=e[1],c=e[2];return kn({1:o,2:t(J,P(c))})(u(n,i))}if(n.length>0&&r.length>0){const[e,...i]=n,[o,...c]=r,a=e[1],s=e[2],f=o[2];return kn({1:a,2:t(P(s),P(f))})(u(i,c))}throw new Error("Non exhaustive match in mapOption2")},i=N((n=>n[1]))(e),o=(n=>{const r=Qn(n,(n=>D(n[2])?P({1:n[1],2:n[2].value}):J));return 0===r.length?J:P(r)})(u(On(i)([...n].map((n=>({1:n[0],2:n[1]})))),On(i)([...r].map((n=>({1:n[0],2:n[1]}))))));return T((n=>new Map(n.map((n=>[n[1],n[2]])))))(o)}function Xn(n,r,t,e){const u=N((n=>n[0]))(e),i=On(u)([...r]).reduceRight(((n,r)=>{if(Hn(n)){const e=t(r[1],n.left);return D(e)?Jn(e.value):Pn(r[0])}return n}),Jn(n));return U(i)}function Yn(n,r){return new Map([...n].map(r))}function Zn(n,r){return new Map([...n].filter(r))}function nr(n){return JSON.stringify(rr(n))}function rr(n){switch(n.kind){case"null":return ur.encode(n);case"string":return ir.encode(n);case"number":return or.encode(n);case"array":return cr.encode(n);case"object":return ar.encode(n)}}function tr(n){return null===n?ur.decode(n):"number"==typeof n?or.decode(n):"string"==typeof n?ir.decode(n):Array.isArray(n)?cr.decode(n):ar.decode(n)}const er=(n,r)=>Jn(`Failed to decode. Input was ${JSON.stringify(n)}. Codec type was ${r}`),ur={encode:n=>null,decode:n=>null===n?Pn({kind:"null",value:null}):er(n,"SimpleNull")},ir={encode:n=>n.value,decode:n=>"string"==typeof n?Pn(r(n)):er(n,"SimpleString")},or={encode:n=>n.value,decode:n=>"number"==typeof n?Pn(t(n)):er(n,"SimpleNumber")},cr={encode:n=>n.value.map(rr),decode:n=>{if(Array.isArray(n)){const r=In(Dn)(tr)(n);return Bn(e)(r)}return er(n,"SimpleArray")}},ar={encode:n=>{const r=[...n.value.entries()];return Object.assign({},...Array.from(r,(([n,r])=>({[n]:rr(r)}))))},decode:n=>{if(n&&n.constructor===Object){const r=In(Dn)((([n,r])=>w(tr(r),Bn((r=>function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n}(n,r))))))(Object.entries(n));return Bn((n=>u(new Map([...n]))))(r)}return er(n,"SimpleObject")}};function sr(n){return w(n,lr,T(nr),K((()=>"<encode error>")))}function fr(n){return T(hr)(function(n){switch(n.state.kind){case"top":return P(r(n.state.error));case"bottom":return J;case"inner":return lr(n.state.a)}}(n))}function lr(n){return function(n){switch(n.kind){case"numberGroup":case"stringGroup":return dr(n.group);case"tuple":return n.tuple.length>0}}(n.payload)?P(e(function(n,r){const t=T((n=>kn(n)(r)))(n);return K((()=>r))(t)}(T((n=>r(function(n){const r=n=>{switch(n){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},t=n=>1===n[2]?r(n[1]):r(n[1])+JSON.stringify(n[2]);return n.map(t).join("")}(n))))(n.commands),function(n){const e=n=>{switch(n.kind){case"bottom":return{kind:"null",value:null};case"top":return r(n.error);case"inner":return t(n.a)}},i=n=>Qn([pr,mr,n=>w(n,vr,u,P)],(r=>r(n))),o=n=>Qn([pr,gr,n=>w(n,vr,(n=>Yn(n,(([n,r])=>[JSON.stringify(n),r]))),u,P)],(r=>r(n)));switch(n.kind){case"tuple":return n.tuple.map(e);case"stringGroup":return i(n.group);case"numberGroup":return o(n.group)}}(n.payload)))):J}function dr(n){switch(n.kind){case"unbounded":return n.group.size>0;case"windowed":return n.group.size>0||D(n.key);case"countLimit":case"uniqueLimit":return n.group.size>0||D(n.limit)}}function pr(n){switch(n.kind){case"unbounded":return J;case"windowed":return P(r("w"));case"countLimit":return P(r(1===n.n?"x":`x${n.n}`));case"uniqueLimit":return P(r(1===n.n?"u":`u${n.n}`))}}function mr(n){switch(n.kind){case"unbounded":return J;case"windowed":return P(r(D(n.key)?n.key.value:""));case"countLimit":case"uniqueLimit":return P(r(D(n.limit)?n.limit.value:""))}}function gr(n){switch(n.kind){case"unbounded":return J;case"windowed":return D(n.key)?P(t(n.key.value)):P({kind:"null",value:null});case"countLimit":case"uniqueLimit":return D(n.limit)?P(t(n.limit.value)):P({kind:"null",value:null})}}function vr(n){switch(n.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return n.group}}function hr(n){switch(n.kind){case"array":return 0===n.value.length?{kind:"null",value:null}:1===n.value.length?hr(n.value[0]):e(n.value.map(hr));case"object":return w(Zn(n.value,(([n,r])=>"null"!==r.kind)),(n=>Yn(n,(n=>[n[0],hr(n[1])]))),u);default:return n}}function kr(n){const r=n=>{if(0===n.length)return{kind:"bottom"};const r=(n=>{if(4!==n.length)return J;const[r,t,e,u]=n;if("string"===r.kind&&"string"===t.kind&&"object"===u.kind){const n=R((n=>wr(n[1].value)&&yr(n[2].value)))({1:r,2:t});return T((n=>({prim:n[1].value,grp:n[2].value,cutoff:e,m:u.value})))(n)}return J})(n);if(D(r)){const{prim:n,grp:t,cutoff:e,m:u}=r.value,i=br(e,u,xr(t));return"string"==typeof i?a(i):c(h(jr(n),i))}const t=(n=>{if(3!==n.length)return J;const[r,t,e]=n;if("string"===r.kind&&"object"===e.kind){const n=R((n=>yr(n.value)))(r);return T((n=>({grp:n.value,cutoff:t,m:e.value})))(n)}return J})(n);if(D(t)){const{grp:n,cutoff:r,m:e}=t.value,u=br(r,e,xr(n));return"string"==typeof u?a(u):c(h(J,u))}const e=(n=>{if(2!==n.length)return J;const[r,t]=n;if("string"===r.kind&&"object"===t.kind){const n=R((n=>wr(n.value)))(r);return T((n=>({prim:n.value,m:t.value})))(n)}return J})(n);if(D(e)){const{prim:n,m:r}=e.value;return c(h(jr(n),m(s(r))))}const u=(n=>{if(1!==n.length)return J;const[r]=n;return"object"===r.kind?P({m:r.value}):J})(n);if(D(u)){const{m:n}=u.value;return c(h(J,m(s(n))))}const i=(n=>{if(n.length<1)return J;const[r,...t]=n;if("string"===r.kind){const n=R((n=>wr(n.value)))(r);return T((n=>({prim:n.value,rest:t})))(n)}return J})(n);if(D(i)){const{prim:n,rest:r}=i.value;return c(h(jr(n),qr(r)))}return c(h(J,qr(n)))},t=n=>"array"===n.kind?Gn(t)(n.value):[n];return"null"===n.kind?v({kind:"bottom"}):v(r(t(n)))}function wr(n){const r=n.split("");if(!0==(0===r.length))return!1;{const[n,...t]=r;return-1!=="pmvn".indexOf(n)&&t.every((n=>-1!=="pmvn0123456789".indexOf(n)))}}function yr(n){const r=n.split("");switch(!0){case 0===r.length:return!1;case"w"===r[0]&&void 0===r[1]:return!0;default:{const[n,...t]=r;return-1!=="ux".indexOf(n)&&-1===t.map((n=>!isNaN(parseInt(n)))).indexOf(!1)}}}function br(n,r,t){switch(n.kind){case"string":return m(t({1:P(n.value),2:r}));case"number":case"null":return p(t({1:"null"===n.kind?J:P(n.value),2:Zn(Yn(r,(([n,r])=>[Number(n),r])),(n=>!isNaN(n[0])))}));default:return"{bad cutoff}"}}function xr(n){const r=n=>r=>d(r[2],r[1],n),t=n=>r=>l(r[2],r[1],n),e=n.split("");switch(!0){case"w"===e[0]&&void 0===e[1]:return n=>f(n[2],n[1]);case"u"===e[0]&&void 0===e[1]:return r(1);case"u"===e[0]&&void 0!==e[1]:return r(parseInt(e.slice(1).join("")));case"x"===e[0]&&void 0===e[1]:return t(1);case"x"===e[0]&&void 0!==e[1]:return t(parseInt(e.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function jr(n){return T(i)(cn(Nr(n,(n=>{const r=n.split("");if(0===r.length)return J;const[t,...e]=r,u=(n=>{switch(n){case"p":return P("add");case"m":return P("mul");case"v":return P("max");case"n":return P("min");default:return J}})(t);return T((n=>{const{init:r,rest:t}=(u=n=>{return"number"==typeof(r=parseInt(n))&&isFinite(r)&&Math.floor(r)===r;var r},function(n){var r=Sn(jn(n,u))(n);return{init:r[0],rest:r[1]}})(e);var u;return{1:{1:n,2:0===r.length?1:parseInt(r.join(""))},2:t.join("")}}))(u)}))))}function Nr(n,r){const t=r(n);return K((()=>[]))(T((n=>[n[1]].concat(Nr(n[2],r))))(t))}function qr(n){return g(n.map(Lr))}function Lr(n){switch(n.kind){case"number":return c(n.value);case"string":return a(n.value);case"null":return{kind:"bottom"};case"object":return a("{object}");case"array":return a("{array}")}}const Or={strategy:(n,r,t)=>e=>{if(H(t))return r;if("delta"===n&&H(r))return J;if(H(r))return t;if(D(r)&&D(t))return e(r.value,t.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(n,r,t,e,u,i)=>{const c=zn(E(i));if("append"===n&&"add"===r)return Mn(t,e,Ir("append",u.plus));if("append"===n&&"mul"===r)return Mn(t,e,Ir("append",u.times));if("append"===n&&"max"===r)return O(c)(t,e);if("join"===n&&"add"===r)return Mn(t,e,Ir("join",O(i)));if("join"===n&&"mul"===r)return Mn(t,e,Ir("join",O(i)));if("join"===n&&"max"===r)return O(c)(t,e);if("min"===r)return Or.operation(n,"max",t,e,u,function(n){return j(((r,t)=>Kn(n.compare(r,t))))}(i));if("delta"===n&&"max"===r)return L(c)(t,e)?t:e.map(o);if("delta"===n)return Mn(t,e,((n,r)=>L(E(i))(n,r)?n:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(n,r,t,e)=>{if("delta"===n&&"top"===t.kind&&"top"===e.kind)return L(S)(t.error,e.error)?a(t.error):{kind:"bottom"};if("delta"===n&&"bottom"===e.kind)return t;if("delta"===n&&"bottom"===t.kind)return{kind:"bottom"};if("top"===t.kind&&"top"===e.kind)return a(O(S)(t.error,e.error));if("top"===t.kind)return t;if("top"===e.kind)return e;if("inner"===t.kind&&"inner"===e.kind)return r(t.a,e.a);if("bottom"===t.kind)return e;if("bottom"===e.kind)return t;throw new Error("Non exhaustive match in extend")}},Mr={plus:(n,r)=>n+r,times:(n,r)=>n*r};function Sr(n,r,t,e){if("unbounded"===n.kind&&"unbounded"===r.kind){const u=n.group,i=r.group;return K(o)(T((n=>c(s(n))))(Vn(u,i,t,e)))}if("windowed"===n.kind&&"windowed"===r.kind){const u=n.key,i=n.group,a=r.key,s=r.group,l=O(B(e))(u,a);return K(o)(T((n=>c(f(n,l))))(Vn(i,s,t,e)))}if("countLimit"===n.kind&&"countLimit"===r.kind){const u=n.n,i=r.n;if(u===i){const i=n.limit,a=n.group,s=r.limit,f=r.group,d=O(B(e))(i,s);return K(o)(T((n=>c(l(n,d,u))))(Vn(a,f,t,e)))}return a("Non matching counts")}if("uniqueLimit"===n.kind&&"uniqueLimit"===r.kind){const u=n.n,i=r.n;if(u===i){const i=n.limit,a=n.group,s=r.limit,f=r.group,l=O(B(e))(i,s);return K(o)(T((n=>c(d(n,l,u))))(Vn(a,f,t,e)))}return a("Non matching counts")}return a("Non matching group types")}function Gr(n,r,t,e,u,i){const c=(n,r)=>({1:xn(n)(r).concat(yn(Math.max(0,n-r.length),o)),2:Nn(n)(r)}),a=(r,t,e)=>{if(0===r.length)return Or.operation(n,"max",t,e,u,i);if(r.length>0){const[o,...s]=r,f=c(o[2],t),l=f[1],d=f[2],p=c(o[2],e),m=p[1],g=p[2];return Or.operation(n,o[1],l,m,u,i).concat(a(s,d,g))}throw new Error("Non exhaustive match in recurse")};return Ln((s=n=>"bottom"===n.kind,function(n){return n.slice(jn(n,s))})(Ln(a(r,t,e))));var s}function Er(r,t,e){return K(n)(_r(r,J)(t,e))}function _r(n,r){const t=r=>(t,e)=>Or.strategy(n,t,e)(_r(n,r)),e=(e,u)=>{if(W(ln(b({1:M,2:pn}))).equals(e.commands,u.commands)){const i=((r,e,u)=>{if("stringGroup"===e.kind&&"stringGroup"===u.kind){const n=Sr(e.group,u.group,t(r),S);return G(n,(n=>m($r(n,S))))}if("numberGroup"===e.kind&&"numberGroup"===u.kind){const n=Sr(e.group,u.group,t(r),mn);return G(n,(n=>p($r(n,mn))))}if("tuple"===e.kind&&"tuple"===u.kind){const t=D(r)?r.value:[];return c(g(Gr(n,t,e.tuple,u.tuple,Mr,mn)))}throw new Error(`Non matching payload. Got ${e.kind} and ${u.kind}`)})(H(e.commands)?r:e.commands,e.payload,u.payload);return G(i,(n=>h(e.commands,n)))}throw new Error(`Non matching primitive strings. Got ${sr(e)} and ${sr(u)}`)};return(r,t)=>fr(v(Or.extend(n,e,kr(r).state,kr(t).state)))}function Ar(n,r,t){const e=T((r=>Zn(n,(([n,e])=>{return(u=t,function(n,r){return-1!==u.compare(n,r)})(n,r);var u}))))(r);return K((()=>n))(e)}function $r(n,r){switch(n.kind){case"unbounded":return n;case"windowed":return H(n.key)?n:f(Ar(n.group,n.key,r),n.key);case"countLimit":{const t=n.limit,e=n.n,u=n.group,i=(n,r)=>r<=1?J:P(r-1),o=Xn(e,u,i,r),c=O(B(r))(t,o);return l(Ar(u,c,r),c,e)}case"uniqueLimit":{const t=n.limit,e=n.n,u=n.group,i=(n,r)=>{if("object"===n.kind){const t=[...n.value.keys(),...r.keys()],u=new Set(t);return u.size>=e?J:P(u)}return J},o=Xn(new Set,u,i,r),c=O(B(r))(t,o);return d(Ar(u,c,r),c,e)}}}function Ir(n,r){return(t,e)=>Or.extend(n,((n,t)=>c(r(n,t))),t,e)}function Cr(n,r,t,e,u,i,o,c,a){switch(arguments.length){case 1:return n;case 2:return r(n);case 3:return t(r(n));case 4:return e(t(r(n)));case 5:return u(e(t(r(n))));case 6:return i(u(e(t(r(n)))));case 7:return o(i(u(e(t(r(n))))));case 8:return c(o(i(u(e(t(r(n)))))));case 9:return a(c(o(i(u(e(t(r(n))))))));default:for(var s=arguments[0],f=1;f<arguments.length;f++)s=arguments[f](s);return s}}var zr=function(n){return"Some"===n._tag},Jr={_tag:"None"},Pr=function(n){return{_tag:"Some",value:n}},Rr=function(n){return"Left"===n._tag},Fr=Object.prototype.hasOwnProperty,Wr=Rr,Br=function(n){return function(r){return Wr(r)?n(r.left):r.right}};var Tr=function(n){return function(r){return!n(r)}};var Ur=Jr,Dr=Pr;var Hr=zr;var Kr=function(n){for(var r in n)if(Fr.call(n,r))return!1;return!0};function Qr(n){return function(r){var t={},e=!1;for(var u in r)if(Fr.call(r,u)){var i=r[u];n(u,i)?t[u]=i:e=!0}return e?t:r}}var Vr=function(n){return Qr((function(r,t){return n(t)}))};var Xr=Kr;var Yr=Vr;Yr(Tr(Xr));Tr((function(n){return 0===n.length}));function Zr(n,r){const t=Object.keys(n),e=t.length,u={};for(let i=0;i<e;i++){const e=t[i],o=r(e,n[e]);Hr(o)&&(u[e]=o.value)}return u}function nt(n,r){const t=Cr((n=>Zr(n,((n,r)=>r.state?Dr({[r.checksum]:r.state}):Ur)))(n),tr,Br((n=>u(new Map)))),e=Cr(tr(r),Br((n=>u(new Map))));return Cr(function(n,r){return Er("delta",n,r)}(t,e),(n=>rr(n)))||{}}!function(n){const r=self;function t(n,t,e,u){function i(t){if("function"!=typeof r.postMessage)return n.ports[0].postMessage(t);r.postMessage(t)}if(!e)return i([t,null,u]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",e),i([t,e])}r.addEventListener("message",(function(r){if(e=r,!Array.isArray(e.data)||2!==e.data.length)return;var e;const u=r.data,[i,o]=u;if("function"==typeof n)return function(n,r,e,u){const i=function(n,r){try{return{res:n(r)}}catch(n){return{err:n}}}(r,u);return Boolean(null===(o=i)||void 0===o?void 0:o.err)?t(n,e,i.err):!(c=i.res)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then?t(n,e,null,i.res):void i.res.then((function(r){t(n,e,null,r)}),(function(r){t(n,e,r)}));var o,c}(r,n,i,o);t(r,i,new Error("Please pass a function into register()."))}))}((function(n){switch(n.type){case"delta":return nt(n.stateMap,n.lastSentStateMapWithChecksum);case"noop":return{}}}))})();',"Worker",void 0,void 0)}var l=n(6013),d=n(7545),p=n(7121);function g(){return(0,o.h)(new u)}const m={concat:(e,t)=>Object.assign(Object.assign({},e),t),empty:{}};class h{constructor(e,t,n,r,o,i,s,a,c){this.api=e,this.network=t,this.sessionManager=n,this.permutiveData=r,this.queryManager=o,this.metrics=i,this.userId=s,this.eventSourceId=a,this.stateWorker=c,this.DEBOUNCE_TIME=1e3,this.MAX_DEBOUNCE_TIME=5e3,this.fetchUnseenState=!0,this.scheduler=new d.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedSyncIfNotEmpty=this.scheduler.scheduleAccumulated((e=>this.syncIfNotEmpty.bind(this)("standard",e)),m),this.fetchUnseenState=!!f.includes("18ad0c5b-460c-4d19-a729-dc537805538f")||this.sessionManager.sessionHasChanged(),this.stateOffset=this.permutiveData.getData("state_offset")||0,this.lastSentStateMapWithChecksum=(0,p.Yh)(this.permutiveData.getData("internal_query_states")||{}),this.stateWorker.postMessage({type:"noop"})}sync(e){return(0,s.zG)(this.debouncedSyncIfNotEmpty(e),(e=>Promise.resolve()))}syncWithUnseen(){return this.syncIfNotEmpty("unseen",{}).then(s.Q1)}syncIfNotEmpty(e,t){const[n,o,i]="standard"===e?[this.stateOffset,t,this.fetchUnseenState]:"unseen"===e?[this.stateOffset,this.queryManager.stateMap.value,!0]:[0,{},!0],a=this.metrics.startTimer("sdk_compute_delta_seconds",{}),c={type:"delta",stateMap:o,lastSentStateMapWithChecksum:this.lastSentStateMapWithChecksum},u=this.stateWorker.postMessage(c).then((e=>(this.metrics.stopTimer("sdk_compute_delta_seconds",a),e))),l=e=>{this.fetchUnseenState=!1;const t=(0,s.ls)((e=>this.network.error(`Error sending state delta. Got ${(0,r.w)(e)}`,this.userId.get())),(e=>({})));return this.api.state(this.metrics,this.userId.get(),this.eventSourceId.get(),e,n,i).then((e=>function(e){return!!e}(e)?this.onStateResponse(e):{})).then((t=>(this.lastSentStateMapWithChecksum=e,t))).catch(t)};return u.then((e=>i||Object.keys(e).length>0?l(e):Promise.resolve({})))}resetSync(e,t){return(0,s.zG)(this.reset(),(n=>Promise.all([this.syncIfNotEmpty("reset",{}),e.segments(),t.getModels()]).then((([e,t,n])=>this.queryManager.bootstrap([]).then((e=>{this.queryManager.updateEnvironment({segments:(0,l.PM)({"1p":this.queryManager.userSegments.getAllAsMap()},t),lookalikeModels:n})}))))))}reset(){this.lastSentStateMapWithChecksum={}}onStateResponse(e){const t=(0,i.Y3)((()=>JSON.parse(e.state)),(e=>this.network.error(`Failed to parse State API response, got ${e}`,this.userId.get()))),n=e=>e?this.queryManager.updateExternalState(e):(0,s.Q1)();return(0,i.tO)(t)?(0,s.zG)(e.state_offset,(e=>this.stateOffset=e),(e=>this.permutiveData.setData("state_offset",e)),(e=>n(t.right)),(e=>t.right)):{}}}const f=["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]},7258:(e,t,n)=>{n.d(t,{u:()=>r});class r{constructor(e,t,n,r,o){this.permutiveData=e,this.permutiveReset=t,this.userId=n,this.viewId=r,this.eventsCache=o}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.permutiveData.getDataSize()+this.eventsCache.getStateSizeInBytes()}reset(){return this.permutiveReset.reset()}}},7846:(e,t,n)=>{n.d(t,{M:()=>s});var r=n(3735),o=n(6567),i=n(6013);class s{constructor(e,t,n,r){this.config=e,this.clientContext=t,this.cookies=n,this.externalData=r,this.userId=this.getOrGenerateUserId(),this.set(this.userId)}get(){return this.userId}set(e){this.cookies.setCookie(this.config.cookieName,e,!0),this.externalData.setExternalData(this.config.cookieName,e),this.clientContext.updateContext(["user_id",e]),this.userId=e}getOrGenerateUserId(){return(0,o.fS)((()=>(0,o.fS)(i.k$)(this.getUserIdFromLocalStorage())))(this.getUserIdFromCookie())}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=(0,o.DT)(i.Gz);return(0,r.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),o.ij,(0,o.tS)(t))}}},6919:(e,t,n)=>{n.d(t,{W:()=>o});var r=n(6013);class o{constructor(e,t){this.clientContext=e,this.config=t,t.viewId&&(0,r.Gz)(t.viewId)?this.set(t.viewId):this.generateAndSet()}get(){return this.viewId}generateAndSet(){return this.set((0,r.k$)())}set(e){return this.viewId=e,this.clientContext.updateContext(["view_id",this.viewId]),this.viewId}}},2485:(e,t,n)=>{n.d(t,{_:()=>o});var r=n(590);const o=e=>{const{logger:t,consentTracking:n}=e,o=(e,n)=>(t.debug(`DB: Failed to write ${String(n)} as consent is revoked`),Promise.resolve(n));return e=>class extends e{constructor(){super(...arguments),this.put=(0,r.vX)(super.put.bind(this),o,n.isRevoked)}}}},3195:(e,t,n)=>{n.d(t,{S:()=>a});var r=n(3735),o=n(2485),i=n(787);class s{constructor(e){this.namespace=e}put(e,t){return(0,r.zG)(this.namespace.getNamespacedStorageKey(String(t)),(t=>window.localStorage.setItem(t,JSON.stringify(e))),(e=>Promise.resolve(t)))}get(e){return(0,r.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>window.localStorage.getItem(e)),i.A,(e=>Promise.resolve(e)))}delete(e){return(0,r.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>Promise.resolve(window.localStorage.removeItem(e))))}deleteStore(){return Promise.resolve()}}const a=(e,t,n)=>new((0,r.zG)(s,(0,o._)({logger:t,consentTracking:n})))(e)},5595:(e,t,n)=>{n.d(t,{m:()=>r});class r extends Error{constructor(e){super(e),this.name="StoreClosingError"}}},1057:(e,t,n)=>{n.d(t,{Ec:()=>s,_8:()=>i});var r=n(6567),o=n(6013);const i=e=>{const t=e.__tcfapi,n={type:"aborted"},i=["tcloaded","useractioncomplete"];return t?(0,o.a4)((()=>a(t,"getTCData")),(()=>a(t,"getTCData").then((e=>"loaded"===(null==e?void 0:e.cmpStatus)&&i.includes(null==e?void 0:e.eventStatus))))).then((0,r.g_)((()=>n),(e=>({type:"loaded",data:e})))):Promise.resolve({type:"missing"})},s=e=>e.gdprApplies?(0,r.G)(e.vendor.consents):r.YP,a=(e,t)=>new Promise((n=>{e(t,2,(e=>{n(e)}))}))},3351:(e,t,n)=>{n.d(t,{D:()=>r});const r={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468}},2520:(e,t,n)=>{n.d(t,{U:()=>s});var r=n(655),o={equals:function(e,t){return e===t}},i=n(6013);class s{constructor(e,t,n,r,o,i,s,a,c,u,l){this.network=e,this.logger=t,this.api=n,this.permutiveData=r,this.messages=o,this.sessionManager=i,this.metrics=s,this.permutiveIdentity=a,this.queryManager=c,this.permutive=u,this.userId=l,this.logger.log("Enabling tpd reporting"),this.messages.on("permutive:segments:updated",(()=>{this.reportUsage()})),this.userSegments=this.permutiveData.getData("third-party-data")||{},this.lastCheckedSession=this.permutiveData.getData("third-party-data-session-id")||"",this.lastUserIdentitiesChecked=new Date}hasUserIdentityChanged(){const e=this.lastUserIdentitiesChecked<this.permutiveIdentity.getIdentitiesLastModified;return this.lastUserIdentitiesChecked=new Date,e}segments(){if(this.segmentsPromise)return this.segmentsPromise;const e=this.sessionManager.getSessionId();if(!1===this.hasUserIdentityChanged()&&this.lastCheckedSession===e)return Promise.resolve(this.userSegments);const t=(0,i.b2)();this.lastCheckedSession=e;const n=this.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{}),r=Object.assign(Object.assign({},this.permutiveIdentity.getCustomerDefinedIdentitiesMap()),this.permutiveIdentity.getTPDIdentitiesMap());if(Object.keys(r).length>0){const e=this.permutiveIdentity.getPrioritizedIdentities(r),n=a(e);this.api.tpd(this.metrics,n).then((e=>{this.userSegments=c(e),t.resolve(this.userSegments)})).catch((e=>{this.network.error(`Third Party Data segments retrieval failed with reason: ${e}`,this.userId.get()),t.resolve({})}))}else t.resolve({});const s=t.promise.then((e=>this.userSegments));return s.then((t=>{this.permutiveData.setData("third-party-data-session-id",e),this.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",n);const r=this.permutiveData.getData("third-party-data")||{},s=(0,i.rB)((0,i.rB)(o)),a=(0,i.rB)(o);if(0===Object.keys(r).length||!s.equals(r,t)){this.permutiveData.setData("third-party-data",this.userSegments);const e=Object.entries(t||{});(r?e.filter((([e,t])=>!a.equals(r[e]||{},t))):e).forEach((([e,t])=>this.fireSegments(e,Object.keys(t))))}})),this.segmentsPromise=s,this.segmentsPromise}reset(e){"short-circuit"!==e?(this.segmentsPromise=null,this.userSegments={}):this.segmentsPromise=null}fireSegments(e,t){this.permutive.track("ThirdPartySegments",{data_provider:e,segments:t})}reportUsage(){const e=u(this.queryManager.stateMap.value),t=(0,i.vp)(JSON.stringify(e));if(this.permutiveData.getData("third-party-data-usage")!==t&&Object.keys(e).length>0){this.permutiveData.setData("third-party-data-usage",t);const n={user_id:this.userId.get(),time:new Date,tpd_segments:e};this.api.tpdUsage(this.metrics,n)}}}const a=e=>(null==e?void 0:e.reduce(((e,t)=>(e[t.tag]=t.id,e)),{}))||{},c=e=>Object.entries(e).reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:(0,i.j5)(n)})),{}),u=e=>{const t={},n=Object.keys(e),o=n.length;for(let i=0;i<o;i++){const o=n[i],s=e[o],{activations:a}=s;(0,r._T)(s,["activations"]);a&&Object.keys(a).length>0&&(t[o]=a)}return t}},2223:(e,t,n)=>{n.d(t,{C:()=>c});var r=n(655),o=n(9320),i=n(3735);const s=(a=[[{name:"dfp",import:Promise.resolve().then(n.bind(n,242))}],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[{name:"web",import:Promise.resolve().then(n.bind(n,8482))}],[],[]],(0,i.zG)((0,o.xH)(a),(0,o.u4)({},((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.import})))));var a;const c=({_internals:e,logger:t,network:n,permutiveMethods:o,q:i,clientContext:a})=>{const c=Object.entries(s).map((([s,c])=>(0,r.mG)(void 0,void 0,void 0,(function*(){return t.log(`Loading addon ${s}`),(yield c).load(i,o,e,n,a)}))));return Promise.all(c)}},1567:(e,t,n)=>{n.r(t),n.d(t,{createAddon:()=>D,getCachedClassificationModelSegments:()=>_,getCachedCleanRoomSegments:()=>v,getCachedDFPSegments:()=>y});var r=n(2688),o=n(9320),i=n(3735),s=n(6567),a=n(2751);var c=n(5506),u=n(6013);const l=e=>Array.isArray(e)?{gam:e,xandrSsp:[]}:e,d="_pdfps";n(9678);let p=!1;let g;const m=e=>{const{logger:t}=e;!0!==p&&googletag.pubadsReady&&(null!=g||(g=({slot:n})=>{const{getContentUrl:r}=n;if(!r||"function"!=typeof r)return;(0,i.zG)(r(),(0,a.pn)("&trunc=1"))&&(t.debug("DFP content URL has been truncated!"),(({metrics:e,logger:t})=>{p||(e.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),p=!0,t.debug("DFP has exceeded targeting limit"))})(e),googletag.pubads().removeEventListener("slotRenderEnded",g),g=null)}),googletag.pubads().addEventListener("slotRenderEnded",g))},h={liveSegments:[],classificationModelSegments:[],cleanRoomSegments:[],eligibleSegments:{}},f={segments:h,getGAMKeyValues:()=>({permutive:f.segments.liveSegments.join(",")})},_=e=>{const t=s.fS((()=>({gam:[],xandrSsp:[]})));return(0,i.zG)(e.getExternalJsonData("_pclmc"),s.ij,(0,s.UI)(l),t)},v=e=>{const t=e.getExternalJsonData("_pcrdbs")||[],n=e.getExternalJsonData("_pcrprs")||[];return(0,o.G0)(a.Eq)(t)(n)},y=e=>e.getExternalJsonData(d)||[],b=(e,t)=>e.filter((e=>e in t)).map((e=>t[e])),w=(e,t)=>{const{logger:n,externalData:i,network:s}=e;let a=t.map(String).concat(h.classificationModelSegments).concat(h.cleanRoomSegments);if(0===a.length)return n.debug("DFP has no targeting values, skipping update"),h.liveSegments;n.debug("DFP is updating with targeting values",a),((e,t,n)=>{const{logger:r}=e;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],m(e),window.googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:i}=googletag.pubads(),s=e("permutive")||[],a=Object.values(t.eligibleSegments).map(String).concat(t.classificationModelSegments).concat(t.cleanRoomSegments).concat("rts"),c=(0,o.uK)((e=>a.includes(e))),{left:u}=c(s),l=n.concat(u).concat("rts");r.debug("DFP setting GPT targeting to",l),i("permutive",l)}))})(e,h,a);try{i.setExternalJsonData(d,a)}catch(e){const t=(0,r.w)(e),o="DFP failed to set data. Got:";n.error(o,t),s.error(`${o} ${t.message}`)}return(({api:e,logger:t},n)=>{(0,c.$S)("sync_segments_cookie",!1)?(t.debug("DFP syncing segment cookie _pdfps"),e.segmentSync({key:d,value:n})):t.debug("DFP sync segments cookie not enabled, skipping sync")})(e,JSON.stringify(a)),n.debug("DFP live segments updated to",t),t},k=e=>{const{logger:t,messages:n,queryManager:r,externalData:o,cookies:i,network:s,userId:a}=e;n.on("permutive:segments:updated",(0,u.Z_)(s,a,(()=>{t.debug("DFP received 'permutive:segments:updated' event");const n=r.userSegments.getAllAsList();h.liveSegments=((e,t)=>{const{logger:n}=e,r=b(t,h.eligibleSegments);return(0,u.cO)(r,h.liveSegments)?(n.debug("DFP new segments are equal to live segments, skipping update"),h.liveSegments):w(e,r)})(e,n)}))),n.on("permutive:classificationmodels:db:updated",(0,u.Z_)(s,a,(n=>{t.debug("DFP received 'permutive:classificationmodels:db:updated' event"),h.classificationModelSegments=n.gam,h.liveSegments=w(e,h.liveSegments)}))),n.on("permutive:cleanroom:db:updated",(0,u.Z_)(s,a,(n=>{t.debug("DFP received 'permutive:cleanroom:db:updated' event"),h.cleanRoomSegments=n,h.liveSegments=w(e,h.liveSegments)}))),n.on("permutive:reset",(0,u.Z_)(s,a,(()=>{t.debug("DFP received 'permutive:reset' event"),o.removeExternalData(d),i.deleteCookie(d),h.liveSegments=[]})))},D=e=>{const{logger:t,activationManager:n,queryManager:r,messages:o,externalData:i}=e;h.classificationModelSegments=_(i).gam,h.cleanRoomSegments=v(i),h.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),n={};for(const e of t.dfp)n[e]=e;for(const e of Object.keys(t.dfp_legacy)){const r=Number(e);n[r]=t.dfp_legacy[r]}return n})(n),h.liveSegments=y(i),t.debug("DFP initialised with segments",h);const s=r.userSegments.getAllAsList(),a=b(s,h.eligibleSegments);return h.liveSegments=w(e,a),k(e),o.emit("permutive:dfp:ready"),f}},242:(e,t,n)=>{n.r(t),n.d(t,{load:()=>a});var r=n(64),o=n(6013),i=n(1567);const s={},a=(e,t,n)=>{e.push({functionName:"addon",arguments:["dfp",{}]});window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>c(t,n)))},c=(e,t)=>{e.ready(t.makeSafe((()=>_(t.metrics))),"realtime"),v(t.externalData),w(t.userId,t.viewId),g(e),googletag.cmd.push((()=>{m(e),h(e)})),window.addEventListener("message",l(e),!1)},u=({advertiserId:e,campaignId:t,lineItemId:n,creativeId:r})=>({advertiser_id:(0,o.ke)(e),campaign_id:(0,o.ke)(t),line_item_id:(0,o.ke)(n),creative_id:(0,o.ke)(r)}),l=e=>t=>{var n;try{const r=JSON.parse(t.data);if(!r.permutive_type||"google_ad_click"!==r.permutive_type)return;const{ad_unit_path:o,creative_id:i,advertiser_id:a,order_id:c,line_item_id:l}=null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},p=u({lineItemId:l,advertiserId:a,campaignId:c,creativeId:i});let g;Object.keys(s).some((e=>{const{slot:t,creative_id:n}=s[e];if((null==t?void 0:t.ad_unit_path)===o&&n===p.creative_id)return g=s[e],!0})),g=null!=g?g:Object.assign(Object.assign({},p),{is_empty:!1}),d(e,g)}catch(e){}},d=(e,t)=>{r.PH&&t&&e.track("SlotClicked",t)},p=(e,t,n)=>{s[t]=n,f(e,n),b(e,t)},g=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const n=t.getResponseInformation();if(!n)return;const r=Object.assign(Object.assign({},u(n)),{is_empty:!1,service_name:"publisher_ads",slot:y(t)}),o=t.getSlotElementId();p(e,o,r)}))},m=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const n=Object.assign(Object.assign({},u(t)),{is_empty:t.isEmpty,service_name:t.serviceName,slot:y(t.slot)});if(t.size){const[e,r]=t.size;"number"==typeof e&&"number"==typeof r&&(n.width=e,n.height=r)}const r=t.slot.getSlotElementId();p(e,r,n)}))},h=e=>{r.EW&&googletag.pubads().addEventListener("impressionViewable",(({slot:t,serviceName:n})=>{const r=t.getResponseInformation();if(!r)return;const o=Object.assign(Object.assign({},u(r)),{service_name:n,slot:y(t)});e.track("SlotViewable",o)}))},f=(e,t)=>{if(!r.CL)return;var n;n=Object.assign(Object.assign({},t),{rendered_timestamp:Date.now()}),e.track("SlotRendered",n)},_=e=>{let t=0;const n=googletag.pubadsReady&&googletag.pubads().getSlots();n&&n.forEach((e=>e.getResponseInformation()&&t++));const r=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:r,value:1,labels:{target:"dfp"}})},v=e=>{const t=(0,i.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:n}=googletag.pubads(),r=e("permutive")||[];n("permutive",[...new Set([...t.map(String),...r])])}))},y=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return r.jH?Object.assign(Object.assign({},t),(()=>{const t={},n=[];let r=[];const o=(e,o)=>{const i="slot"===e?e=>t[e]=1:()=>{},s=o.getTargetingKeys();r=s;for(let s=0;s<r.length;s++){const a=r[s];if(void 0!==t[a]&&"service"===e)continue;const c=[],u=o.getTargeting(a);for(let e=0;e<u.length;e++)c.push(u[e].toString());c.length>0&&(i(a),n.push({key:a,value:c}))}};return o("slot",e),o("service",googletag.pubads()),{targeting_keys:n}})()):t},b=(e,t)=>{let n=!1;const r=()=>{n&&d(e,s[t])},o=()=>{n=!0},i=()=>{n=!1};try{window.addEventListener("blur",r);const e=document.getElementById(t);e.addEventListener("mouseover",o),e.addEventListener("mouseout",i)}catch(e){}},w=(e,t)=>{const{setTargeting:n}=googletag.pubads()}},8482:(e,t,n)=>{n.r(t),n.d(t,{WebAddon:()=>E,load:()=>D});var r=n(655),o=n(2688),i=n(70),s=n(3735),a=n(4011),c=n(6567),u=n(7209),l=n(64),d=n(6013),p=n(3760),g=n(5506);const m=(0,g.MU)("add_alchemy_entities",!1),h=(0,g.MU)("add_alchemy_taxonomy",!1);function f(e){return Object.assign(Object.assign(Object.assign({},e&&h?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{}),e&&m?{entity_names:"$alchemy_entity_names"}:{}),{})}function _(e,t,n,r){const o=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),e),t);n.track("Pageview",o).then((e=>{r.emit("permutive:event:pageview",e)}))}function v(e,t,n,r,o,i){return Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},r),n),{aggregations:Object.assign({PageviewEngagement:Object.assign({engaged_time:e},l.UW?{completion:t}:{})},l.ED?{SegmentEntry:Array.from(o),SegmentExit:Array.from(i)}:{})})}function y(e,t,n,r,o,i,s,a=!0,u=c.YP){const l=v(e,t,n,r,o,i),d=(0,c.fS)((()=>null))(u);let p={useBeacon:a};null!==d&&(p=Object.assign(Object.assign({},p),{unprocessedData:d})),s.track("PageviewComplete",l,p)}const b=["mousemove","click","scroll"],w=["email","tel","submit","reset","button","file","password","radio","checkbox"],k=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],D=(e,t)=>{0};class E{constructor(e){this.dirtyState=!1,this.totalCompletion=0,this.totalEngagedTime=0,this.hasPageviewCompleteFired=!1,this.cleanupPageEngagementDetection=s.Q1,this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.unprocessedPVC=e.unprocessedPVC,this.options.customProperties.overrideCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0,l.Uy&&this.resetTimeout()}).bind(this),_(f(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),l.t2&&(this.timerHandle=this.registerEngagementInterval(this.getEventInterval())),l.Uy&&(this.setPageviewCompleteTimeout(l.MU),(0,d.aq)((()=>{this.hasPageviewCompleteFired||y(this.totalEngagedTime,this.totalCompletion,f(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes,this.permutive)}),navigator.userAgent))}sendLinkClickEvent(e,t){if(window.location.href&&e.href){const n=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:n},{useBeacon:t})}}sendFormSubmissionEvent(e){{const t=e.currentTarget,n={form:Object.assign(Object.assign(Object.assign({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{}),t.name&&"string"==typeof t.name?{name:t.name}:{}),t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",n)}}trackEngagementInterval(e){return(0,s.zG)(this.updateState(e),(({engaged_time:e,total_engaged_time:t,completion:n,total_completion:r})=>function(e,t,n,r,o,i){const s=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t},o),{completion:n,total_completion:r});i.track("PageviewEngagement",s)}(e,t,n,r,this.options.customProperties.getCustomProps(),this.permutive)),(e=>{if(!this.hasPageviewCompleteFired)return function(e,t,n,r,o,i,s,a,c,u){const l=v(e,t,s,a,c,u);return o.then((e=>{const t={props:l,sessionId:n,viewId:r,client:e};i.put(t)}))}(this.totalEngagedTime,this.totalCompletion,this.options.sessionManager.getSessionId(),this.options.viewId.get(),this.clientContext.getClient(),this.unprocessedPVC,f(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes)}))}reset(e){return(0,r.mG)(this,void 0,void 0,(function*(){if(this.disablePageEngagementDetection(),l.Uy){const e=yield this.unprocessedPVC.getIfPresent();this.hasPageviewCompleteFired=!1,y(this.totalEngagedTime,this.totalCompletion,f(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes,this.permutive,!1,e)}this.dirtyState=!1,this.options.state.viewId.generateAndSet(),this.totalCompletion=0,this.totalEngagedTime=0,this.options.customProperties.overrideCustomProps(e.page||{}),this.updateWebOptions(e),this.enablePageEngagementDetection();const t={logger:this.logger,config:Object.assign(Object.assign({},this.options.config),{watson:e.watson}),clientContext:this.clientContext,api:this.api,permutiveData:this.options.permutiveData,metrics:this.options.metrics,sessionManager:this.options.sessionManager,enrichers:this.options.enrichers,network:this.options.network};(0,p.H)(t)().then((()=>{_(f(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),l.t2&&(clearInterval(this.timerHandle),this.timerHandle=this.registerEngagementInterval(this.getEventInterval()))}))}))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==w.indexOf(e.type.toLowerCase())||-1!==k.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return setInterval((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=n=>e(n)?(0,c.G)(n):n.parentElement?e(n.parentElement)?(0,c.G)(n.parentElement):t(n.parentElement):c.YP;l.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>{e.addEventListener("submit",(0,d.Z_)(this.options.network,this.options.userId,this.sendFormSubmissionEvent.bind(this)))})),l.qr&&document.body.addEventListener("click",(e=>{if(e.target instanceof Element){const n=t(e.target);return(0,c.g_)((()=>{}),(t=>this.sendLinkClickEvent(t,((e,t)=>!("_blank"===t.target||e.metaKey||e.ctrlKey||e.shiftKey||2===e.which||3===e.which))(e,t))))(n)}}),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,s.zG)((0,i.Y3)((0,s.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,u.uZ)(a.Df)(0,1)),o.w),(0,i.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}setPageviewCompleteTimeout(e){return window.setTimeout((()=>{this.hasPageviewCompleteFired||(y(this.totalEngagedTime,this.totalCompletion,f(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes,this.permutive,!1),this.hasPageviewCompleteFired=!0)}),e)}resetTimeout(){clearTimeout(this.pageviewCompleteTimeoutHandle),this.pageviewCompleteTimeoutHandle=this.setPageviewCompleteTimeout(l.MU)}registerPageEngagementCleanup(e){if("function"!=typeof e)return this.logger.warn("No page detection cleanup was registered"),null;this.cleanupPageEngagementDetection=()=>(0,i.Y3)((()=>{e(),this.cleanupPageEngagementDetection=s.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,o.w)(e))))}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,s.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const n=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>n(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||b}getEventInterval(){return this.options.eventInterval||5}updateWebOptions(e){var t;e.watson={enabled:"boolean"==typeof(null===(t=e.watson)||void 0===t?void 0:t.enabled)?e.watson.enabled:this.options.config.watson.enabled};const n={addPageEngagementDetection:void 0,dirtyEvents:void 0,eventInterval:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options=Object.assign(Object.assign(Object.assign({},this.options),n),e)}}},275:(e,t,n)=>{n.d(t,{J:()=>o});const r=e=>"string"==typeof e&&"$"===e[0];class o{constructor(){this.replacementMap={}}register(e){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),e.getReplacementMap)}enrich(e,t){return this.enrichRecursive(e,t)}enrichRecursive(e,t){const n={output:{},isFullyEnriched:!0},o=Object.keys(e);for(let i=0;i<o.length;i++){const s=o[i],a=e[s];switch(!0){case r(a):const[e,o]=this.isPropertyReplaceable(a);n.output[s]=e?o:a,this.replacementMap.hasOwnProperty(a)&&o===a&&t&&delete n.output[s],n.isFullyEnriched=!!e&&n.isFullyEnriched;break;case null!==a&&"object"==typeof a&&a.constructor===Object:const i=this.enrichRecursive(a,t);n.output[s]=i.output,n.isFullyEnriched=n.isFullyEnriched&&i.isFullyEnriched;break;default:n.output[s]=a}}return n}isPropertyReplaceable(e){const t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]}}},3760:(e,t,n)=>{n.d(t,{B:()=>a,H:()=>c});var r=n(3735),o=n(5151),i=n(7112);const s=[],a=e=>{s.push(e)},c=e=>{const t=s.map((t=>(0,i.Y3)((()=>t.load(e)),(t=>{e.network.error(t)}))));return(0,r.zG)((0,o.RD)(t),(0,o.UI)(r.Q1))}},4762:(e,t,n)=>{n.d(t,{F:()=>i});var r=n(3735),o=n(6567);class i{constructor(e,t,n){this.urls=e,this.config=t,this.network=n}identify(e,t,n){return this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",(0,o.G)(this.config.apiVersion)),method:"POST",payload:{user_id:t,aliases:n},contentType:"text/plain",dataType:"json",withCredentials:!0})}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",(0,o.G)(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}track(e,t,n){const r=this.getTrackUrl(t,{isFullyEnriched:n,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:r,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBatch(e,t){const n=this.getTrackUrl(t,{isFullyEnriched:!0,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:n,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBeacon(e,t){const n=this.getTrackUrl(e,{isFullyEnriched:t,useBeacon:!0});return this.network.reqWithBeacon({url:n,payload:e})}trackBatchBeacon(e){const t=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!0});return this.network.reqWithBeacon({url:t,payload:e})}tpd(e,t){return this.reqWithMetrics(e,"sdk_http_tpd_seconds",{url:this.urls.getEndpointUrl("/tpd",(0,o.G)(this.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1})}tpdUsage(e,t){return this.reqWithMetrics(e,"sdk_http_tpd_usage_seconds",{url:this.urls.getEndpointUrl("/tpd/usage",(0,o.G)(this.config.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",(0,o.G)(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}modelsBinary(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1})}modelsJson(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}state(e,t,n,r,i,s){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/state",(0,o.G)("v1.0"),[["fetch_unseen",JSON.stringify(s)]]),method:"POST",payload:{group_id:t,event_source_id:n,state:JSON.stringify(r),last_seen_offset:i},contentType:"text/plain",dataType:"json",withCredentials:!1})}cleanRoom(e,t){return this.network.req({url:this.urls.getAdvertiserEndpointUrl("/segment",(0,o.G)(this.config.advertiserApiVersion),[["new-session",e.toString()]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}classificationModels(e){return this.network.req({url:this.urls.getClassificationModelsEndpointUrl("/segment",(0,o.G)(this.config.classificationModelsApiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"json",withCredentials:!1})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/18ad0c5b-460c-4d19-a729-dc537805538f-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}getSocioDemoPredictions(e){return this.network.req({method:"POST",url:this.urls.getEndpointUrl("/demographic/infer/v3",(0,o.G)(this.config.apiVersion)),dataType:"json",payload:e,withCredentials:!1})}reqWithMetrics(e,t,n){const o=e.startTimer(t,{});return this.network.req(n).then((n=>(0,r.zG)(e.stopTimer(t,o),(e=>n))))}getTrackUrl(e,t){const{isFullyEnriched:n,useBeacon:r}=t,i=Array.isArray(e),s=!n;return this.urls.getEndpointUrl(i?"/batch/events":"/events",(0,o.G)(this.config.apiVersion),[["enrich",JSON.stringify(s)],["sdkp",JSON.stringify(!r)]])}getModelsUrl(e){const t=`https://${this.config.cdnBaseUrl}`;switch(e){case"binary":return`${t}/models/v2/18ad0c5b-460c-4d19-a729-dc537805538f-models.bin`;case"json":return`${t}/models/18ad0c5b-460c-4d19-a729-dc537805538f-models.json`}}}},550:(e,t,n)=>{n.d(t,{XO:()=>o,bk:()=>s,kJ:()=>r,mh:()=>i,sv:()=>a});const r=e=>Object.assign({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{}},c(e)),o=e=>Object.assign({id:e.id||null,name:e.name,time:(u(e.time)?e.time:new Date).toISOString(),properties:e.properties||{}},c(e)),i=(e,t)=>Object.assign({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties},c(t)),s=e=>void 0!==e.request_id,a=e=>void 0!==e.properties,c=e=>Object.assign(Object.assign({},e.session_id?{session_id:e.session_id}:{}),e.view_id?{view_id:e.view_id}:{}),u=e=>isFinite(e)&&e instanceof Date},8110:(e,t,n)=>{n.d(t,{s:()=>o});var r=n(6567);class o{constructor(e){this.config=e,this.PATH_JOINER_Q="?",this.PATH_JOINER_A="&"}getEndpointUrl(e,t,n=[]){return this.getUrl("base",e,t,n)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t,n=[]){return this.getUrl("adv",e,t,n)}getClassificationModelsEndpointUrl(e,t,n=[]){return this.getUrl("clm",e,t,n)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm"}}getUrl(e,t,n,o){const i=this.getUrlPrefix(e),s=(0,r.g_)((()=>""),(e=>`/${e}`))(n),a=`${this.config.apiProtocol}://${this.config.apiHost}${i}${s}${t}`;return this.makeUrlWithQueryParams(a,o.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const n=t.map((([e,t])=>`${e}=${t}`)).join(this.PATH_JOINER_A),r=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${r}${n}`}}},590:(e,t,n)=>{n.d(t,{NY:()=>g,vX:()=>y,D1:()=>v});var r=n(655),o=n(3735),i=n(3195);const s="permutive-consent";var a=n(6567);const c=(e,t)=>(0,o.zG)((0,a.ij)(t),(t=>!1===e&&(0,a.Wi)(t)?{isValid:!0,consentData:u()}:(e=>(0,a.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var t;return!0===e.opt_in&&"string"==typeof e.token&&(null===(t=e.token)||void 0===t?void 0:t.length)>0})(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:l()})),u=()=>({opt_in:!0,token:s}),l=()=>({opt_in:!1,token:""}),d=e=>{return(0,o.ls)((t=e,e=>(0,o.zG)(c(t.consentRequired,e),(({consentData:e,isValid:n})=>(t.consentDatabase.put(e,s),n)))),(({logger:e,messages:t})=>n=>{const r=n?"given":"revoked";return e.log("Consent has been",r),t.emit(`permutive:consent:${r}`),n})(e));var t},p=e=>(t,n)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",n)},g=(e,t,n,{consentRequired:a})=>(0,r.mG)(void 0,void 0,void 0,(function*(){const r={isRevoked:()=>!1,listenForConsent:o.Q1},u=(0,i.S)(n,t,r),{giveConsent:l,revokeConsent:g,isRevoked:m}=(()=>{let e=!0;return{revokeConsent:()=>e=!1,giveConsent:()=>e=!0,isRevoked:()=>!1===e}})(),h=yield u.get(s);c(a,h).isValid?l():g();const f={isRevoked:m,listenForConsent:p(e)};f.listenForConsent(g,l);return{consentTracking:f,consentValidation:d({consentDatabase:u,consentRequired:a,logger:t,messages:e}),consentDatabase:u}}));var m=n(9320),h=n(70),f=n(5151),_=n(6992);const v=e=>{const{partialTagWithKey:t}=e,n=t.key;var r;window[n].consent=(r=e,(0,o.ls)(r.consentModule.consentValidation,(e=>e?(0,_.H)(r)():null)));const i=(0,a.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,o.zG)((0,o.a9)(t.consentDatabase.get(s)),(0,f.UI)((e=>c(t.consentRequired,e).isValid)));var t}),f.of);return(0,o.zG)((0,o.zG)((({consentModule:e,tag:t})=>{const n=(0,m.Ew)((function(e){return"consent"===e.functionName}))(t.q);return(0,a.UI)((t=>e.consentValidation(t.arguments[0])))(n)})(e),i),(0,f.UI)((e=>e?(0,h.F2)(!0):(0,h.t$)("No consent to run on the page"))))},y=(e,t,n)=>(...r)=>(n()?t:e)(...r)},4910:(e,t,n)=>{n.d(t,{S:()=>L});var r=n(3735),o=n(6567),i=n(8206),s=n(655),a=n(4011),c=n(5857),u=n(64),l=n(550);const d=(e,t)=>{switch(p(e.event,e.isEventFullyEnriched,t)){case"immediate":return m(e);case"memoryOnly":return h(e);case"response":return f(e);case"deferred":return _(e);case"never":return v(e)}},p=(e,t,n)=>n?"deferred":g(e.name,t),g=(e,t)=>S.has(e)?"memoryOnly":E.has(e)?"never":t?"immediate":"response",m=({event:e,requestData:t,requestOptions:n,queryManager:o,eventsBatch:i,stateSync:u,metrics:l,logger:d})=>(0,s.mG)(void 0,void 0,void 0,(function*(){const[s,{segmentsEntered:p,segmentsExited:g}]=yield k(e,l,o,d),m=(0,c.e5)(a.Eq)((0,c.G0)(a.Eq)(new Set(t.segments),p),g);return d.log(`Adding ${e.name} to batch, with segments`,m),Promise.all([i.add(Object.assign(Object.assign({},t),{segments:[...m]}),n,"immediate"),u.sync(s)]).then(r.Q1)})),h=({event:e,metrics:t,queryManager:n,logger:o})=>k(e,t,n,o).then(r.Q1),f=({requestData:e,requestOptions:t,queryManager:n,eventsCache:r,eventHandler:o,api:i,metrics:s,logger:a})=>i.track(s,e,!1).then((o=>y(o,e,t,r,s,n,a))).then((({event:e,error:t})=>D(o,e,t))),_=({event:e,isEventFullyEnriched:t,requestData:n,api:i,eventHandler:s})=>Promise.all([i.trackBeacon(n,t),D(s,e,o.YP)]).then(r.Q1),v=({requestData:e,requestOptions:t,eventsBatch:n})=>n.add(e,t,"never"),y=(e,t,n,r,o,i,s)=>(0,l.bk)(e)?b(e,t,n):w(e,t,n,r,o,i,s),b=(e,t,n)=>{const i={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:new Date};return(0,r.zG)(n.error(e.error.message),(t=>Promise.resolve({event:i,error:(0,o.G)(e)})))},w=(e,t,n,i,s,a,c)=>{const u=(0,l.sv)(e)?(0,l.kJ)(Object.assign(Object.assign({},e),{session_id:t.session_id,view_id:t.view_id})):(0,l.mh)(e,t);return k(u,s,a,c).then((e=>(0,r.zG)(n.success(u),(e=>i.add(u,{persistOnDisk:!0})),(e=>({event:u,error:o.YP})))))},k=(e,t,n,o)=>M.has(e.name)?(0,r.zG)(t.startTimer("sdk_events_querylanguage_seconds",{}),(i=>n.process(e,!0).then((n=>(0,r.zG)(t.stopTimer("sdk_events_querylanguage_seconds",i),(t=>o.log("Processing event",e,"caused the following update",n)),(e=>n)))))):Promise.resolve([{},{segmentsEntered:new Set,segmentsExited:new Set}]),D=(e,t,n)=>{e.newEvent((0,l.XO)(t),(0,o.fS)((()=>null))(n))},E=new Set(["ThirdPartySegments","SlotRendered"]),S=new Set([...u.D0?["PageviewEngagement"]:[],...u.ED?["SegmentEntry","SegmentExit"]:[]]),P=new Set(["PageviewComplete"]),M=new Set(["!UpdateSecondPartyData","!UpdateThirdPartyData","Download","LinkClick","Pageview","Register","Search","WebinarRegister"]);var O=n(1057),q=n(3351);var C=n(6013);class I{constructor(e,t={}){this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var x=n(8941);class T{constructor(e,t,n,r,o,i,s,a,c,u,l,d,p,g,m,h,f,_,v,y,b,w,k,D,E,S,P,M,O,q,C,I,x){this.namespace=e,this.logger=t,this.api=n,this.eventHandler=r,this.activationManager=o,this.sessionManager=i,this.metrics=s,this.viewId=a,this.userId=c,this.network=u,this.enrichers=l,this.clientContext=d,this.unprocessedPVC=p,this.eventsBatch=g,this.queryManager=m,this.stateSync=h,this.eventsCache=f,this.taskQueue=_,this.identities=v,this.permutiveReset=y,this.messages=b,this.addons=w,this.trace=k,this.permutiveRealtime=D,this.state=E,this.customProperties=S,this.config=P,this.permutiveData=M,this.externalData=O,this.cookies=q,this.tpd=C,this.models=I,this.identitiesIngestor=x,this.initialisedAddons=[],this.triggerListeners=[]}identify(e){this.logger.log("<call> identify",e);const t=(0,C.b2)(),n=this.identities.parseCustomerDefinedIdentities(e),o=Object.assign(Object.assign({},this.identities.getIdentitiesMap()),n.reduce(((e,{tag:t,id:n,priority:r,expiry:o})=>Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({id:n},void 0!==r?{priority:r}:{}),void 0!==o?{expiry:o}:{})})),{})),s=Object.values(o).map((e=>e.id)),a=this.identities.getPrioritizedIdentities(o);if("string"==typeof e&&(0,i.Bt)("18ad0c5b-460c-4d19-a729-dc537805538f","18ad0c5b-460c-4d19-a729-dc537805538f",s,window.location.hostname,this.userId.get()))return t.resolve(),t.promise;return this.taskQueue.add(new I((e=>{this.logger.log("<task> identify ",n);const o=this.userId.get();this.api.identify(this.metrics,this.userId.get(),a).then((i=>(this.identities.setIdentities(n),this.tpd.reset("short-circuit"),(0,x.WI)(this.logger,this.queryManager,this.tpd,this.trace),i.user_id===o?(0,r.zG)(this.logger.log("<done> identify ",n),(t=>e()),(e=>t.resolve())):this.permutiveReset.reset().then((e=>(0,r.zG)(this.userId.set(i.user_id),(e=>this.eventsCache.reset()),(e=>this.stateSync.resetSync(this.tpd,this.models))))).then((r=>{this.logger.log("<done> identify",n),e(),t.resolve()}))))).then((e=>this.identitiesIngestor.ingestIfEligible(n).catch((e=>this.network.error(`Couldn't ingest identities, got ${e}`,this.userId.get())))))}),{wait_prev:!0,block_next:!0})),t.promise}on(e,t){return this.eventHandler.addListener({name:e,callback:t,once:!1})}once(e,t){return this.eventHandler.addListener({name:e,callback:t,once:!0})}track(...e){var t,n,o;const[i,s,a]=[e[0],e[1]||{},e[2]||{}],c=this.trace.startSpan("track_event");this.logger.log("<call> track",i);const u=(0,C.b2)();if(!this.api)return this.network.error("The API hasn't been loaded."),u.reject(),u.promise;const l=null!==(t=a.unprocessedData)&&void 0!==t?t:{},p=null!==(n=l.sessionId)&&void 0!==n?n:this.sessionManager.getSessionId(),g=null!==(o=l.viewId)&&void 0!==o?o:this.viewId.get(),m={success:a.success||(e=>{}),error:a.error||((e,t)=>{})};return this.taskQueue.add(new I((e=>{this.logger.log("<task> track",i);const{output:t,isFullyEnriched:n}=this.enrichers.enrich(s,S.has(i));this.metrics.track({name:n?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});return(l.client?Promise.resolve(l.client):this.clientContext.getClient()).then((o=>{var l;const h=Object.assign(Object.assign({},t),{client:s.client?(0,C.PM)(o,s.client):o}),f={user_id:this.userId.get(),name:i,segments:this.queryManager.userSegments.getAllAsList(),properties:h,session_id:p,view_id:g},_={name:i,properties:h,session_id:p,view_id:g,time:new Date};return((e,t)=>d(e,t).then((t=>P.has(e.event.name)?e.unprocessedPVC.reset():(0,r.Q1)())))({event:_,requestData:f,isEventFullyEnriched:n,requestOptions:m,logger:this.logger,queryManager:this.queryManager,stateSync:this.stateSync,eventsCache:this.eventsCache,eventHandler:this.eventHandler,metrics:this.metrics,eventsBatch:this.eventsBatch,api:this.api,unprocessedPVC:this.unprocessedPVC},null!==(l=a.useBeacon)&&void 0!==l&&l).then((t=>{this.logger.log("<done> track",_.name),u.resolve(_),e(),c.finish()})).catch((e=>{m.error(e),this.network.error(e,this.userId.get())}))}))}))),u.promise}trigger(e,t,n){const r=(0,C.b2)();this.logger.log("<call> trigger",e),this.triggerListeners=this.triggerListeners||[];return this.taskQueue.add(new I((t=>{this.logger.log("<task> trigger",e);const o=this.messages.on("permutive:query:changed",(function(t){t.queryCode===e&&(n(t.result),r.resolve(t.result))}));this.triggerListeners.push(o),this.logger.log("<done> trigger",e),t()}))),r.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const n=(0,C.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new I((r=>{var o;this.logger.log("<task> segment",e);const i=this.queryManager.stateMap.value[e];i&&(t((null===(o=null==i?void 0:i.result)||void 0===o?void 0:o.result)||!1),n.resolve()),this.logger.log("<done> segment",e),r()}))),n.promise}segments(e,t="all"){const n=(0,C.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new I((r=>{this.logger.log("<task> segments ("+t+")");const o=o=>{e(o),n.resolve(o),this.logger.log("<done> segments ("+t+")"),r()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{o(this.addons.dfp.segments.liveSegments)})):o(this.queryManager.userSegments.getAllAsList())}))),n.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.stateSync.reset(),this.unprocessedPVC.reset(),this.queryManager.bootstrap([])]).then((([e])=>(0,r.zG)(this.userId.set(e.id),(e=>this.eventsCache.reset())))).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.network.error(`Error resetting internals. Got ${e}`)}))}addon(e,t){const r=Object.assign(Object.assign({},t),{permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedPVC:this.unprocessedPVC,metrics:this.metrics,namespace:this.namespace,state:this.state,queryManager:this.queryManager,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,userSegments:this.queryManager.userSegments,addons:this.addons,enrichers:this.enrichers,externalData:this.externalData,cookies:this.cookies});if(-1===this.initialisedAddons.indexOf(e))switch(this.initialisedAddons.push(e),e){case"web":Promise.resolve().then(n.bind(n,8482)).then((e=>this.addons.web=new e.WebAddon(r))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"overlays":case"scriptrunner":case"nativo":case"freewheel":case"facebook_pixel_v2":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"tracking_pixel":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":case"classification_models":case"clean_room":case"gam_log":case"socio_demo_cohorts":case"smart":case"tradedesk":case"ddp":case"dbm":case"appnexus":case"pubmatic":case"ctv":0;break;case"dfp":Promise.resolve().then(n.bind(n,1567)).then((e=>this.addons.dfp=e.createAddon(r)))}else"web"===e&&!0!==t.auto_init?((e,t,n,r)=>new Promise(((i,s)=>{var a;const c=(0,o.Y3)(e);if((0,o.pC)(c))return i(c.value);n.once(t,(()=>(0,o.g_)((()=>s(new Error(`Error after waiting for event ${t}`))),i)((0,o.Y3)(e))));const u=null!==(a=null==r?void 0:r.timeout)&&void 0!==a?a:1e4;setTimeout((()=>s(new Error(`Event ${t} was not received within the timeout period ${u}ms`))),u)})))((()=>this.addons.web.reset(t)),"permutive:web:ready",this.messages).catch((e=>{this.network.error(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())})):"ctv"===e&&(null==t||t.auto_init)}addonIfTCFConsent(e,t){const n=()=>{switch(e.key){case"tradedesk":this.addons.tradedesk=new e.Addon(t);break;case"ddp":this.addons.ddp=new e.Addon(t);break;case"appnexus":this.addons.appnexus=new e.Addon(t);break;case"pubmatic":this.addons.pubmatic=new e.Addon(t)}},i=t=>t[q.D[e.key]]?n():(0,r.Q1)();return(0,O._8)(window).then((e=>{switch(e.type){case"missing":return n();case"aborted":return(0,r.Q1)();case"loaded":return(0,r.zG)((0,O.Ec)(e.data),(0,o.g_)(n,i))}}))}ready(e,t="initialised"){const n=(0,C.b2)(),r=()=>{e(),n.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?r():this.messages.on("permutive:ready",r);break;case"realtime":this.permutiveRealtime.isRealtime()?r():this.messages.once("permutive:realtime",r)}return n.promise}}var A=n(590);const j=e=>{const{logger:t,consentTracking:n}=e,o=(...e)=>(t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null));return e=>class extends e{constructor(...e){super(...e),this.track=(0,A.vX)(super.track.bind(this),o,n.isRevoked),n.listenForConsent((()=>this.consentRevoked()),r.Q1)}consentRevoked(){return(0,s.mG)(this,void 0,void 0,(function*(){return yield this.sessionManager.reset(),this.reset()}))}}},L=(e,t,n,o,i,s,a,c,u,l,d,p,g,m,h,f,_,v,y,b,w,k,D,E,S,P,M,O,q,C,I,x,A,L)=>new((0,r.zG)(T,j({consentTracking:L,logger:t})))(e,t,n,o,i,s,a,c,u,l,d,p,g,m,h,f,_,v,y,b,w,k,D,E,S,P,M,O,q,C,I,x,A)},7281:(e,t,n)=>{n.d(t,{Oc:()=>l,l9:()=>d});var r=n(1828),o=n(70),i=n(3735);class s{constructor(){}setItem(e,t){return(0,i.zG)(JSON.stringify(t),(t=>window.sessionStorage.setItem(e,t)))}getItem(e){return(0,i.zG)(window.sessionStorage.getItem(e),JSON.parse)}}class a{constructor(){}setItem(){}getItem(){return null}}const c=e=>(0,o.tS)((e=>1===e.size?(0,o.F2)(null):(0,o.t$)("Iterable Maps not supported")))((e=>"function"==typeof e.Map?(0,o.F2)(new e.Map([["a",1]])):(0,o.t$)("Maps not supported"))(e)),u=e=>(0,o.tS)((e=>2===e.size?(0,o.F2)(null):(0,o.t$)("Iterable Sets not supported")))((e=>"function"==typeof e.Set?(0,o.F2)(new e.Set([1,2])):(0,o.t$)("Sets not supported"))(e)),l=e=>(0,i.zG)((0,r.gz)(o.G5)(c(e),u(e),(e=>{const t=["QuotaExceededError","QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED"];return(0,o.Y3)((()=>{const t="_permutive_ls_test";e.localStorage.setItem(t,t),e.localStorage.removeItem(t)}),(n=>e.localStorage&&0===e.localStorage.remainingSpace||t.some((e=>-1!==String(n).indexOf(e)))?"localStorage quota exceeded":"localStorage not supported"))})(e),(e=>e.Worker&&e.Blob?(0,o.F2)(null):(0,o.t$)("WebWorkers not supported"))(e)),(e=>(0,o.UI)(i.Q1)(e))),d=e=>{const t=(0,o.Y3)((()=>{const t="_permutive_ls_test";e.sessionStorage.setItem(t,t),e.sessionStorage.getItem(t),e.sessionStorage.removeItem(t)}),(e=>"sessionStorage not supported"));return(0,i.zG)(t,(0,o.g_)((()=>new a),(()=>new s)))}},8941:(e,t,n)=>{n.d(t,{eS:()=>g,$A:()=>p,Yj:()=>u,co:()=>l,N7:()=>d,MA:()=>m,WI:()=>h});var r=n(655),o=n(3735),i=n(6567),s=n(8206),a=(n(6013),n(449));const c=e=>(0,r.mG)(void 0,void 0,void 0,(function*(){const{logger:t,network:n,q:o,api:i,userId:s,identities:c,reset:u,eventsCache:l,metrics:d,identitiesIngestor:p,messages:g}=e,m=s.get(),h=()=>o.findIndex((e=>"identify"===e.functionName)),f=e=>{if(e<0)return[];const t=o.splice(e,1)[0];return c.parseCustomerDefinedIdentities(t.arguments[0]).concat(f(h()))},_=f(h()),v=c.getIdentitiesMap(),y=_.reduce(((e,{tag:t,id:n,priority:r,expiry:o})=>Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({id:n},o?{expiry:o}:{}),void 0!==r?{priority:r}:{})})),{}),b=Object.assign(Object.assign({},v),y);t.log("Starting identification... Identities are:",b);const w=c.getPrioritizedIdentities(b),k=yield i.identify(d,m,w).then((e=>{return n={user_id:e.user_id},(0,r.mG)(void 0,void 0,void 0,(function*(){const e=n.user_id;return e===m?{identityChanged:!1}:(t.log(`Got different user id from API: ${e}`),yield u.reset(),s.set(e),yield l.reset(a.m),{identityChanged:!0,userId:e})}));var n})).catch((e=>(0,r.mG)(void 0,void 0,void 0,(function*(){return n.error(`Couldn't set identity for user ${m}. Got ${e}`,m),{identityChanged:!1}})))).finally((()=>{c.setIdentities(Object.entries(b).map((([e,{id:t,priority:n,expiry:r}])=>Object.assign(Object.assign({tag:e,id:t},r?{expiry:r}:{}),void 0!==n?{priority:n}:{}))))}));return p.ingestIfEligible(w).catch((e=>n.error(`Couldn't ingest identities, got ${e}`,k.identityChanged?k.userId:m))),g.emit("permutive:user:ready"),t.log("<done> init identity ",k),k}));function u(e,t,n,r,o,i){e.log("Identity has changed"),i.track({name:"sdk_identity_changed_total",value:1,labels:{}});const s=t.startSpan("ss_reset_sync");return n.resetSync(r,o).then((()=>s.finish()))}function l(e,t,n,s,a,c,u){e.log("Identity hasn't changed"),u.track({name:"sdk_identity_remained_total",value:1,labels:{}});const l=a.hasNewOrModifiedQueries,d=t.startSpan(`qm_bootstrap_${l}`);return c.resetIfNeeded().then((e=>e?(u.track({name:"sdk_reset_hearst_count",value:1,labels:{}}),n.reset()):Promise.resolve())).then((()=>l?c.all().then((e=>a.bootstrap(e))):a.bootstrap([]))).then((()=>s.getIfPresent())).then((0,i.g_)((()=>e.log("No unprocessed PVC data detected")),(t=>(0,o.zG)(e.log("Unprocessed PVC data detected",t),(e=>{const{props:n}=t;return{props:n,unprocessedData:(0,r._T)(t,["props"])}}),(({props:e,unprocessedData:t})=>n.track("PageviewComplete",e,{unprocessedData:t}).finally((()=>s.reset()))))))).then((()=>d.finish()))}function d(e,t){return(0,s.Bt)("18ad0c5b-460c-4d19-a729-dc537805538f","18ad0c5b-460c-4d19-a729-dc537805538f",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.state.userId.get())?t.reset():Promise.resolve()}function p(e,t,n,r,o,i,s,a,u,l,d,p,g,m,h,f){const _=o.startSpan("identify");return c({logger:t,network:n,api:r,q:e,userId:a,identities:u,reset:l,eventsCache:d,metrics:p,identitiesIngestor:g,messages:m}).catch((e=>({identityChanged:!1}))).then((e=>(_.finish(),e)))}function g(e,t){e.context=t.getContext()}function m(e,t,n,r){const o=r.startSpan("lal_http");return n.getModels().then((n=>{e.log("Loaded lookalike models"),o.finish();const i=r.startSpan("update_env_lal");return t.updateLAL(n).then((()=>i.finish()))}))}function h(e,t,n,r){const o=r.startSpan("tpd_http");return n.segments().then((n=>{e.log("Loaded TPD segments"),o.finish();const i=r.startSpan("update_env_tpd");return t.updateTPD(n).then((()=>i.finish()))}))}},6785:(e,t,n)=>{function r(e,t,n,r,o){o.debug("set SDK as ready"),e.setAsReady(),t.emit("permutive:api:ready"),n.track({name:"sdk_local_storage_byte_total",value:r.getStateSizeInBytes(),labels:{}}),n.track({name:"sdk_query_states_byte_total",value:e.getStateSizeInBytes(),labels:{}})}n.d(t,{R:()=>r})},3368:(e,t,n)=>{n.d(t,{$o:()=>f,uU:()=>v,je:()=>_});var r=n(70),o=n(3735),i=n(2688),s=n(6567),a=n(3629);class c{constructor(e,t,n){this.urls=e,this.config=t,this.logger=n,this.clientErrorsSent=0}req(e){return this.reqImpl(e).then((e=>(0,o.MZ)(e)))}reqWithBeacon({url:e,payload:t}){return null===navigator||void 0===navigator?void 0:navigator.sendBeacon(e,JSON.stringify(t))}error(e,t,n){return this.config.sendClientErrors&&this.clientErrorsSent<3?this.errorNetwork(e,t,n).catch((0,o.ls)(i.w,(e=>this.logger.error(e)))):(0,o.zG)((0,i.w)(e),(e=>this.logger.error(e)),(e=>Promise.resolve()))}errorNetwork(e,t,n){var r,o,i,c,u,l,d,p;const g=e instanceof Error?e:new Error(JSON.stringify(e)),m={error_message:null!==(o=null===(r=null==g?void 0:g.message)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",stack_trace:null===(i=null==g?void 0:g.stack)||void 0===i?void 0:i.split("\n")},h=t?{user_id:t}:{},f=Object.assign({platform:"web",sdk_version:"v19.24.1",ql_runtime_version:"v5.1.1",timestamp:null!=n?n:new Date,domain:null!==(u=null===(c=null===window||void 0===window?void 0:window.location)||void 0===c?void 0:c.hostname)&&void 0!==u?u:"",url:(0,a.bk)(null===(l=null===window||void 0===window?void 0:window.location)||void 0===l?void 0:l.href),referrer:(0,a.bk)(null===document||void 0===document?void 0:document.referrer),user_agent:null!==(d=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==d?d:"",error_message:null!==(p=m.error_message)&&void 0!==p?p:String(e),stack_trace:m.stack_trace},h);return this.req({url:this.urls.getSdkErrorsUrl("/errors",(0,s.G)(this.config.sdkErrorsApiVersion)),method:"POST",payload:[f],contentType:"text/plain",dataType:"text",withCredentials:!1})}reqImpl(e){const{url:t,dataType:n,contentType:o,method:i,withCredentials:s,timeout:a}=e;return new Promise(((c,u)=>{const l=new XMLHttpRequest,d="POST"===e.method?"string"==typeof(p=e.payload)?p:JSON.stringify(p):null;var p;l.onload=function(){if(this.status>=400){const e="text"===this.responseType||""===this.responseType?this.responseText:"Couldn't access response text";u(`Failed ajax request. Status code was ${this.status}. ${e}`)}else if("json"===n){const e=this.responseText?(0,r.Y3)((()=>JSON.parse(this.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(this.responseText)}. Got ${e}`)):(0,r.F2)(null);(0,r.g_)(u,c)(e)}else c("text"===n?this.responseText:this.response)},l.onerror=()=>u(new Error("Network request failed")),l.ontimeout=()=>u(new Error("Network request timed out")),l.open(i,t,!0),o&&l.setRequestHeader("content-type",o),l.timeout=a||l.timeout,l.withCredentials=s||l.withCredentials,l.responseType="binary"===n?"arraybuffer":l.responseType,l.send(d)}))}}var u=n(6013);const l="__permutive.",d="__permutiveConfigQueryParams";const p={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",apiProtocol:"https",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,a._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataModelsKey:"permutive-data-models",permutiveDataQueriesKey:"permutive-data-queries",permutiveDataTPDKey:"permutive-data-tpd",permutiveDataEnrichersKey:"permutive-data-enrichers",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"18ad0c5b-460c-4d19-a729-dc537805538f.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:["internal_query_states"],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0}},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},g=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},n={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(e).reduce(((r,o)=>{if(t.hasOwnProperty(o)){const t="true"===e[o];return Object.assign(Object.assign({},r),{[o]:t})}if(n.hasOwnProperty(o)){const t=Number(e[o]);return isNaN(t)?r:Object.assign(Object.assign({},r),{[o]:t})}return Object.assign(Object.assign({},r),{[o]:e[o]})}),{})},m=e=>Object.entries(e).reduce(((e,[t,n])=>{if(!(0===t.indexOf(l)))return e;const r=t.replace(l,"");return[...e,[r,n]]}),[]),h=(e,t,n)=>{var r;const i=(0,o.zG)(t,m,(e=>(0,u.m8)(...e)),g),s=null!==(r=p[e.environment])&&void 0!==r?r:{};return(0,u.PM)(p.default,s,e,((e,t)=>{const n=t.getItem(d),r=(0,u.PM)(n,e);return t.setItem(d,r),r})(i,n))},f=e=>{var t,n;const i="18ad0c5b-460c-4d19-a729-dc537805538f",s=void 0!==(null===(t=e[i])||void 0===t?void 0:t.q)&&void 0!==(null===(n=e[i])||void 0===n?void 0:n.config)?i:"permutive";return(0,o.zG)(e[s],(0,r.ij)("Can't find permutive tag on the page"),(0,r.UI)((e=>({tag:e,key:s}))))},_=({tag:e,key:t},n,r)=>Object.assign(Object.assign({},e),{config:h(Object.assign(Object.assign({},e.config),{windowKey:t}),n,r)}),v=(e,t,n)=>new c(e,t,n)},6112:(e,t,n)=>{n.d(t,{F:()=>i});var r=n(7112),o=n(6830);const i=(0,r.Y3)((()=>{const e=(0,o.e)();return e.postMessage({type:"noop"}),Promise.resolve(e)}),(e=>`Failed to start QueryWorker. Got ${e}`))},9848:(e,t,n)=>{n.d(t,{LA:()=>a});var r=n(9320),o=n(7209),i=n(6013);const s=(e,t,{network:n,state:r})=>{n.error(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,r.userId.get())};function a(e,t,n,a,d,p){const g=function(e){const t=(0,r.uK)((e=>-1!==u.indexOf(e.functionName)))(e),n=t.right,s=t.left.filter((e=>"consent"!==e.functionName)),a=(0,o.Zt)(((e,t)=>c(e)&&c(t)?(0,i.lW)(l).compare(e.arguments[0],t.arguments[0]):(0,i.lW)(u).compare(e.functionName,t.functionName))),d=(0,r.DY)(a)(n);return d.concat(s)}(e),m=p.startSpan("queued_methods"),h={network:d,state:t.state};g.forEach((e=>{try{(e=>{e.functionName in n?n[e.functionName].apply(a,e.arguments):s(new Error("Does not exist."),e,h)})(e)}catch(t){const n=t instanceof Error?t:new Error("Unknown error.");s(n,e,h)}})),m.finish()}const c=e=>"addon"===e.functionName,u=["identify","trigger","addon","track"],l=["dfp","appnexus_adserver","web"]},5791:(e,t,n)=>{n.d(t,{y:()=>v});var r=n(655),o=n(2688),i=n(9320),s=n(3735),a=n(9384),c=function(e,t){return function(){return t(e())}},u=function(e){return function(t){return c(t,e)}},l=s.a9,d=(s.yR,s.yR,a.F4,a.Xl,function(){return Math.random()});function p(e,t){return(0,s.zG)(d,u((function(n){return Math.floor((t-e+1)*n+e)})))}u((function(e){return e<.5}));var g=n(356),m=n(274),h=n(6013);class f{constructor(e,t,n,o,i){this.sdkInitTimestamp=e,this.api=t,this.messages=n,this.logger=o,this.enrichers=i,this.environment="web",this.pendingMetrics=[],this.pendingTimers={},this.messages.on("permutive:ready",(()=>{const e=p(3e4,9e4),t=n=>window.setTimeout((()=>(0,r.mG)(this,void 0,void 0,(function*(){const n=(yield this.processPending())?5e3:e();t(n)}))),n);t(5e3),(0,h.aq)((()=>{this.processPending.bind(this)}),navigator.userAgent)})),this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}track(e){this.pendingMetrics.push(e)}trackTimeSinceInit(e,t){const n=(performance.now()-this.sdkInitTimestamp)/1e3;this.logger.debug("metrics: timer stopped",e,n),this.track({name:e,value:n,labels:t})}startTimer(e,t){const n=performance.now(),r=this.generateRandomKey(e);return this.pendingTimers[r]={startTime:n,labels:t},r}stopTimer(e,t){const n=this.pendingTimers[t];if(n){const r=(performance.now()-n.startTime)/1e3;this.logger.debug("metrics: timer stopped",e,r),this.track({name:e,value:r,labels:n.labels}),delete this.pendingTimers[t]}}processPending(){return(0,r.mG)(this,void 0,void 0,(function*(){if((0,i.xb)(this.pendingMetrics))return!0;const e=this.pendingMetrics;this.pendingMetrics=[];const t=()=>(0,s.zG)({},(e=>(0,g.dx)("continent",m.U.$ip_geo_info_continent)(e)),(e=>this.enrichers.enrich(e,!0).output));try{return yield this.api.metrics({context:Object.assign(Object.assign({},t()),{environment:this.environment,events_count:0,segments_count:0}),items:e}),!0}catch(t){return this.logger.error(`Metrics: Request failed from error ${(0,o.w)(t).message}`,e),this.pendingMetrics=[...this.pendingMetrics,...e],!1}}))}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}}class _{track(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}function v(e,t,n,r,o,i,s){return(null!==(a=r.getData("metricsEnabled"))&&void 0!==a?a:(()=>{const e=Math.random()<=n.metricsSamplingPercentage/100;return r.setData("metricsEnabled",e),e})())?new f(e,t,o,i,s):new _;var a}},6992:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>initialiseWebSDK,f:()=>initialisationSequence});var tslib__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(655),fp_ts_Either__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(70),fp_ts_function__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(3735),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(7112),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8764),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5506),_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(427),_core_crypto_AESCrypto__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(1228),_core_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4572),_core_events_EventsCacheWeb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8790),_core_events_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(2923),_core_events_PermutiveEventsBatch__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4314),_core_events_PermutiveUnprocessedPVCWeb__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3530),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9417),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(8206),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(6815),_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9175),_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3319),_core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(6715),_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(4828),_core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(8167),_publisher_cohorts_legacy_models_PermutiveModelsNoOp__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(933),_core_queries_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6830),_core_session_SessionManager__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(3253),_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2747),_core_state_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1823),_core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(7738),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(1728),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(2472),_core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1714),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(7258),_core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(7846),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(6919),_core_store_LocalStorageWeb__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(3195),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1057),_core_third_party_ThirdPartyBase__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(2520),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2223),_dynamic_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(275),_dynamic_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(3760),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(4762),_http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(8110),_utils_event_handler_PermutiveEventHandler__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(9409),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(6013),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(7749),_utils_Trace__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(998),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(3629),_Consent__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(590),_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(7281),_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(8941),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(6785),_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(3368),_initialisation_queryWorkerInit__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(6112),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(9848),_initialisation_setupMetrics__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(5791),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(4910);const sdkInitTimestamp=window.performance.now(),initialiseWebSDK=({queryWorker,tag,partialTagWithKey,urls,network,namespace,messages,logger,consentModule})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Y3)((()=>(0,tslib__WEBPACK_IMPORTED_MODULE_30__.mG)(void 0,void 0,void 0,(function*(){const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,trace=new _utils_Trace__WEBPACK_IMPORTED_MODULE_31__.l(config),sdkReadySpan=trace.startSpan("sdk_ready"),{consentTracking,consentValidation}=consentModule;window[windowKey].consent=consentValidation;const context=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__.PM)(tag.context||{},{path:window.location.pathname,url:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_32__.bk)(window.location.href),referrer:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_32__.bk)(document.referrer)}),createInternalsSpan=trace.startSpan("internals"),eventHandler=new _utils_event_handler_PermutiveEventHandler__WEBPACK_IMPORTED_MODULE_33__.b,cookieStore=(0,_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_8__.S)(namespace,config,logger,consentTracking),localStorage=(0,_core_store_LocalStorageWeb__WEBPACK_IMPORTED_MODULE_17__.S)(namespace,logger,consentTracking),externalData=(0,_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_9__.S)(namespace,logger,consentTracking),clientContext=new _core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_34__.z(context),viewId=new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_16__.W(clientContext,config),userId=new _core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_15__.M(config,clientContext,cookieStore,externalData),permutiveData=(0,_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_12__.S)(config,namespace,logger,network,userId,consentTracking),eventSourceId=new _core_state_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_13__.$(permutiveData),enrichers=new _dynamic_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_35__.J,api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_36__.F(urls,config,network),metrics=(0,_initialisation_setupMetrics__WEBPACK_IMPORTED_MODULE_27__.y)(sdkInitTimestamp,api,config,permutiveData,messages,logger,enrichers),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_7__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identityPromise=identities.prepareThirdPartyIdentities(),models=new _publisher_cohorts_legacy_models_PermutiveModelsNoOp__WEBPACK_IMPORTED_MODULE_37__.p,identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_38__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_39__.u(metrics,messages),sessionManager=yield _core_session_SessionManager__WEBPACK_IMPORTED_MODULE_11__.S.initialise(cookieStore,localStorage),_internals=new _core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_40__.P(logger,network,userId,viewId,messages,sessionManager,cookieStore,externalData);_internals.metrics=metrics,_internals.identities=identities;const eventsCache=new _core_events_EventsCacheWeb__WEBPACK_IMPORTED_MODULE_3__.K(config,namespace,logger,network,trace,metrics,userId,consentTracking),eventsBatch=new _core_events_PermutiveEventsBatch__WEBPACK_IMPORTED_MODULE_4__.c(eventHandler,api,metrics,userId,network,eventsCache),unprocessedPVC=new _core_events_PermutiveUnprocessedPVCWeb__WEBPACK_IMPORTED_MODULE_5__.w(config,namespace,metrics,new _core_crypto_AESCrypto__WEBPACK_IMPORTED_MODULE_41__.E,logger,consentTracking,network),customProperties=new _core_events_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_42__.X,queryManagerTransitionDebounceTime=1e3,queryManagerTransitionMaxDebounceTime=1e4,queryManager=new _core_queries_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_10__.x(logger,network,permutiveData,sessionManager,messages,customProperties,permutiveRealtime,permutiveGlobal,queryWorker,trace,userId,viewId,externalData,queryManagerTransitionDebounceTime,queryManagerTransitionMaxDebounceTime);_internals.queryManager=queryManager;const permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_43__.a(config,localStorage,logger,queryManager,permutiveData,eventSourceId,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_44__.i(messages),stateSync=new _core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_14__.N(api,network,sessionManager,permutiveData,queryManager,metrics,userId,eventSourceId,(0,_core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_14__.e)()),thirdParty=new _core_third_party_ThirdPartyBase__WEBPACK_IMPORTED_MODULE_19__.U(network,logger,api,permutiveData,messages,sessionManager,metrics,identities,queryManager,permutiveGlobal,userId),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_0__.v(logger,permutiveGlobal,clientContext),state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_45__.u(permutiveData,permutiveReset,userId,viewId,eventsCache);_internals.state=state;const permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__.S)(namespace,logger,api,eventHandler,activationManager,sessionManager,metrics,viewId,userId,network,enrichers,clientContext,unprocessedPVC,eventsBatch,queryManager,stateSync,eventsCache,taskQueue,identities,permutiveReset,messages,_internals.addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,thirdParty,models,identitiesIngestor,consentTracking);createInternalsSpan.finish(),[].forEach((s=>{(0,fp_ts_Either__WEBPACK_IMPORTED_MODULE_46__.Y3)((()=>eval(s)),(e=>{network.error(Object.assign(Object.assign({},e),{message:`Error running custom script ${s}`}),userId.get())}))})),_internals.addBlocker("permutive:queries:initialised"),_internals.messages.on("permutive:blockers:empty",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods),permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getContext(),permutiveGlobal.addons=_internals.addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_26__.LA)(permutiveGlobal.q,_internals,permutiveGlobal,permutiveMethods,network,trace)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_20__.C)({_internals,logger,network,permutiveMethods,q:permutiveGlobal.q,clientContext}),loadAddonsSpan.finish();const loadEnrichersSpan=trace.startSpan("load_enrichers"),enricherEnv={api,config,clientContext,logger,permutiveData,metrics,sessionManager:_internals.sessionManager,enrichers,network},loadEnrichersPromise=(0,_dynamic_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_47__.H)(enricherEnv)();loadEnrichersPromise.then((()=>{loadEnrichersSpan.finish()}));const resolveIdentify=()=>(0,tslib__WEBPACK_IMPORTED_MODULE_30__.mG)(void 0,void 0,void 0,(function*(){yield identityPromise,yield(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__.N7)(_internals,permutiveMethods);const e=yield(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__.$A)(permutiveGlobal.q,logger,network,api,trace,permutiveMethods,unprocessedPVC,userId,identities,permutiveReset,eventsCache,metrics,identitiesIngestor,messages,stateSync,externalData);return yield e.identityChanged?(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__.Yj)(logger,trace,stateSync,thirdParty,models,metrics):(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__.co)(logger,trace,permutiveMethods,unprocessedPVC,queryManager,eventsCache,metrics),e})),init=()=>(0,tslib__WEBPACK_IMPORTED_MODULE_30__.mG)(void 0,void 0,void 0,(function*(){(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__.eS)(permutiveGlobal,clientContext),(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__.MA)(logger,queryManager,models,trace),(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__.WI)(logger,queryManager,thirdParty,trace),yield loadEnrichersPromise,(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_48__.R)(queryManager,messages,metrics,state,logger),sdkReadySpan.finish()}));return resolveIdentify().then(init)}))),(e=>`Exception during initialisation. Got ${e}`)),initialisationSequence=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_49__.zG)(fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Do,(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("support",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_50__.Oc)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("queryWorker",(()=>_initialisation_queryWorkerInit__WEBPACK_IMPORTED_MODULE_25__.F)),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("sessionStorage",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_50__.l9)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("partialTagWithKey",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_24__.$o)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("queryParams",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_32__.zM)()))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("tag",(({partialTagWithKey:e,queryParams:t,sessionStorage:n})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_24__.je)(e,t,n)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("logger",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_51__.SX)(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("urls",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_52__.s(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("network",(({tag:e,urls:t,logger:n})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_24__.uU)(t,e.config,n)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("namespace",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_53__.L(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("messages",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_54__.Q))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consentModule",(({tag:e,namespace:t,logger:n,messages:r})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.fF)((()=>(0,_Consent__WEBPACK_IMPORTED_MODULE_22__.NY)(r,n,t,e.config))))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consent",(e=>(0,_Consent__WEBPACK_IMPORTED_MODULE_22__.D1)(e))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.tS)((e=>initialiseWebSDK(e))))},6013:(e,t,n)=>{n.d(t,{Fi:()=>P,G6:()=>S,Gz:()=>w,PM:()=>p,PQ:()=>M,Z_:()=>I,a4:()=>h,aq:()=>y,b0:()=>k,b2:()=>m,cO:()=>O,eu:()=>_,fl:()=>E,hk:()=>d,j5:()=>C,k$:()=>b,ke:()=>v,lW:()=>q,m8:()=>D,rB:()=>f,vp:()=>g});var r=n(4268),o=n(3735),i=n(6567),s=n(7209),a=n(6017),c=n(356),u=n(5857),l=n(2751);const d=(0,c.hX)((0,a.ff)(c.xb));function p(...e){return e.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}function g(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(0,a.ff)(l.xb);function m(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),reject:t,resolve:e}}function h(e,t,n={}){const{waitTimeInMs:r,exponentialBackOff:s,maxAttempts:a}=p({waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},n);let c=0;const u=n=>new Promise((r=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>r((0,i.G)(e)))):(0,o.zG)(c++,(e=>e<a?setTimeout((()=>r(u(n*(s?2:1)))),n):r(i.YP)))))));return u(r)}function f(e){const t={equals:(t,n)=>t[0]===n[0]&&e.equals(t[1],n[1])},n=(0,u.Eh)(t);return(0,r.Uz)((e=>new Set(Object.entries(e))))(n)}function _(e,t){const n=Object.create(null);for(const r of t)n[r]=e[r];return n}function v(e){if("string"==typeof e){const t=+e;if(!isNaN(t))return t}return e}function y(e,t){const n=t=>{if(!r&&t)return r=!0,e()};let r=!1;["blur","visibilitychange"].forEach((e=>{window.addEventListener(e,(()=>n(document.hidden&&function(e){return/Mobi|Android/i.test(e)}(t))))})),["beforeunload","pagehide"].forEach((e=>{window.addEventListener(e,(()=>n(!0)))}))}function b(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function w(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function k(e,t){const n=Object.keys(e),r=n.length,o={};for(let s=0;s<r;s++){const r=n[s],a=t(r,e[r]);(0,i.pC)(a)&&(o[r]=a.value)}return o}function D(...e){const t={},n=e.length;for(let r=0;r<n;r++){const[n,o]=e[r];t[n]=o}return t}function E(e,t){return k(e,((e,n)=>t(e)?(0,i.G)(n):i.YP))}function S(e){return/^((?!chrome|android).)*safari/i.test(e)}function P(e){}function M(e){return new Promise((t=>{setTimeout((()=>{Promise.resolve(e()).then(t)}),0)}))}function O(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function q(e){return(0,s.Zt)(((t,n)=>{const r=e.indexOf(t),o=e.indexOf(n);switch(!0){case-1===r&&-1===o:return 0;case-1!==r&&-1===o:return-1;case-1===r&&-1!==o:return 1;default:return r<=o?-1:1}}))}function C(e){return e.reduce(((e,t)=>(e[t]=!0,e)),{})}function I(e,t,n){return(...r)=>{try{return n(...r)}catch(n){e.error(n,t.get())}}}},998:(e,t,n)=>{n.d(t,{l:()=>r});class r{constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=!1,this.placeholderSpan={spanId:null,finish:()=>({})},this.shouldUsePerformanceMark=(null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled}startSpan(e){var t;if(this.shouldUsePerformanceMark){const n=this.generateId(),r=`permutive_${e}`,o=`${r}${n}_start`;return null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t||t.mark(o),{spanId:o,finish:()=>{var e,t;null===(t=null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.measure)||void 0===t||t.call(e,r,o)}}}return this.placeholderSpan}generateId(){return"_"+Math.random().toString(36).substr(2,9)}}},9409:(e,t,n)=>{n.d(t,{b:()=>r});class r{constructor(){this.events=[],this.listeners=[]}newEvent(e,t){this.events.push([e,t]),[...this.listeners].forEach((n=>{this.handle(e,t,n)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,n){const r="string"==typeof n.name&&e.name===n.name,o=n.name.test&&n.name.test(e.name),i=r||o;if(i)try{n.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}i&&n.once&&this.remove(n)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let n=0;n<this.events.length&&t;n++)this.handle(this.events[n][0],this.events[n][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}},7545:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(6013);class o{constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e,t=this.timeoutDurationInMilliseconds,n=this.maxTimeOutDurationInMilliseconds){return this.debounce(e,t,n)}scheduleAccumulated(e,t,n=this.timeoutDurationInMilliseconds,r=this.maxTimeOutDurationInMilliseconds){return this.debounce(e,n,r,t)}scheduleForPageUnload(e){return(0,r.aq)(e,navigator.userAgent)}debounce(e,t,n,o){let i,s,a=null==o?void 0:o.empty,c=[];return u=>{o&&(a=o.concat(a,u));const l=(0,r.b2)();c.push(l);return i&&window.clearTimeout(i),i=window.setTimeout((()=>{window.clearTimeout(s),s=null;const t=e(o?a:u);c.forEach((e=>e.resolve(t))),a=null==o?void 0:o.empty,c=[]}),t),s||(s=window.setTimeout((()=>{window.clearTimeout(i),s=null;const t=e(o?a:u);c.forEach((e=>e.resolve(t))),a=null==o?void 0:o.empty,c=[]}),n)),l.promise}}}},7749:(e,t,n)=>{n.d(t,{i:()=>r});class r{constructor(e){this.messages=e,this.queue=[],this.nextNotify=null,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,window.setTimeout(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,n=0;for(let r=0;r<this.queue.length;r++){const o=this.queue[r];if(o.complete)n+=1;else if(o.started)t=!0,e=e||o.blocks();else{if(o.waits()&&t)break;e||(t=!0,e=e||o.blocks(),o.execute((()=>{this.notify()})))}}this.queue.splice(0,n)}size(){return this.queue.length}}},3629:(e,t,n)=>{n.d(t,{_Y:()=>s,bk:()=>i,zM:()=>o});var r=n(3735);const o=()=>{var e,t;const n=null===(t=null===(e=window.location.href.split("?")[1])||void 0===e?void 0:e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===n?{}:n.reduce(((e,t)=>{const[n,r]=t.split("=");return Object.assign(Object.assign({},e),{[n]:r})}),{})},i=e=>{if(!e)return"";return(0,r.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function s(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),r=e.match(/localhost/);if((null==n?void 0:n.length)>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return(null==t?void 0:t.length)>0?t[0]:(null==r?void 0:r.length)>0?"localhost":""}},933:(e,t,n)=>{n.d(t,{p:()=>r});class r{getModels(){return Promise.resolve({})}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(70),t=__webpack_require__(3735),n=__webpack_require__(3760),r=__webpack_require__(6567),o=__webpack_require__(274);__webpack_require__(6013);class i extends class{constructor(e,t){this.config=e,this.logger=t,this.defaultReplacementMap=this.filterReplacementMap(this.config.defaultMap),this.replacementMap=this.setReplacementMap(this.config.replacementMap)}get getReplacementMap(){return this.replacementMap}setReplacementMap(e){return this.replacementMap=Object.assign(Object.assign({},this.defaultReplacementMap),this.filterReplacementMap(e)),this.logger.debug(`enrichers[${this.config.name}]: replacement map updated`,this.getReplacementMap),this.getReplacementMap}}{filterReplacementMap(e){return e}}const s="geoip",a="enricher:geoip",c={},u={include_geo:(null==c?void 0:c.include_geo)||!0,include_isp:(null==c?void 0:c.include_isp)||!0,include_ip_hash:(null==c?void 0:c.include_ip_hash)||!0,include_ip:(null==c?void 0:c.include_ip)||!1},l=(e,n)=>{const{$ip_geo_info_continent:a,$ip_address:c,$ip_address_hash:u}=o.U,l={$ip_geo_info_continent:a,$ip_address:c,$ip_geo_info:{city:o.U.$ip_geo_info_city,continent:o.U.$ip_geo_info_continent,country:o.U.$ip_geo_info_country,postal_code:o.U.$ip_geo_info_postal_code,province:o.U.$ip_geo_info_province},$ip_address_hash:u,$ip_isp_info:{autonomous_system_number:0,isp:o.U.$ip_isp_info_isp,autonomous_system_organization:o.U.$ip_isp_info_autonomous_system_organization,organization:o.U.$ip_isp_info_organization}},d=(0,t.zG)((0,r.Y3)((()=>({$ip_geo_info:e.geo_info,$ip_geo_info_continent:e.geo_info.continent,$ip_isp_info:e.isp_info,$ip_address:e.ip,$ip_address_hash:e.ip_hash}))),(0,r.fS)((()=>({}))));return new i({name:s,defaultMap:l,replacementMap:d},n)},d=({clientContext:e,api:t,permutiveData:n,metrics:r,sessionManager:o,enrichers:i,network:s,logger:c,config:d})=>{const g=t=>{t.isp_info&&e.updateContext(["isp",t.isp_info.isp],["organization",t.isp_info.organization],["autonomous_system_number",t.isp_info.autonomous_system_number],["autonomous_system_organization",t.isp_info.autonomous_system_organization]),t.geo_info&&e.updateContext(["continent",t.geo_info.continent],["country",t.geo_info.country],["city",t.geo_info.city],["province",t.geo_info.province],["postal_code",t.geo_info.postal_code])},m=n.getData(a);return m&&m.session_id===o.getSessionId()?(g(m.data),i.register(l(m.data,c)),Promise.resolve()):(c.debug("enrichers[geoip]: start HTTP request"),p(t,r,d,u).then((e=>(c.debug("enrichers[geoip]: end HTTP request"),g(e),n.setData(a,{session_id:o.getSessionId(),data:e}),e))).catch((e=>(s.error(`Error while registering the geoip enricher: got ${e}`),null))).then((e=>{i.register(l(e,c))})))},p=(e,t,n,o)=>{const i=[];return o.include_geo&&i.push(["include","geo"]),o.include_isp&&i.push(["include","isp"]),o.include_ip&&i.push(["include","ip"]),o.include_ip_hash&&i.push(["include","ip_hash"]),e.reqWithMetrics(t,"sdk_http_geoip_seconds",{url:e.urls.getEndpointUrl("/geoip",(0,r.G)(n.apiVersion),i),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})},g=()=>(0,n.B)({load:d});const m=()=>{};var h,f=__webpack_require__(6992);h=f.f,g(),m(),h().then((0,e.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),t.Q1))})()})();